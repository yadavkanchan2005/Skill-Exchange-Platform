import{r as a}from"./stimulus-helpers-d189GC1Y-1.js";import{E as l}from"./ez-base-controller-CGJ-YSBe-1.js";import{e as r}from"./events-BT2vjsWp-1.js";import{t as c}from"./helpers-AnDMAI8W-1.js";import m from"./ez-form-select-field-controller-HqpSojeb-1.js";import{E as d}from"./modal-controller-BhBNOS3Y-1.js";import{D as h,A as u}from"./ajax-dialog-controller-DZsjwl_e-1.js";import"./performance-helpers-DpsuwFL7-1.js";import"./js-Cz0CWeBA-1.js";import"./init-user-BlDnuGFC-1.js";import"./ez-custom-events-B3OAI6ej-1.js";import"./rails-ujs-DLwK8N9E-1.js";import"./button-helpers-CvZG-X-W-1.js";const n=class n extends l{constructor(){super(...arguments),this.blurSubMenu=e=>{this.element.contains(e.target)||this.closeDropDown()},this.openDropDown=()=>{window.addEventListener("keyup",this.allowEscClose),window.addEventListener("click",this.blurSubMenu),this.addLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.remove("is-closed"),this.element.classList.add("is-open")})},this.closeDropDown=()=>{window.removeEventListener("keyup",this.allowEscClose),window.removeEventListener("click",this.blurSubMenu),this.removeLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.add("is-closed"),this.element.classList.remove("is-open")})},this.allowEscClose=e=>{e.keyCode===27&&this.closeDropDown()}}connect(){this.element.addEventListener(r.util.ez_drop_down.close_drop_down,this.closeDropDown)}disconnect(){this.element.removeEventListener(r.util.ez_drop_down.close_drop_down,this.closeDropDown)}handleSubMenuClick(){this.element.classList.contains("is-open")?this.closeDropDown():this.openDropDown()}closeExploreMenuItems(){c("CloseSearchExploreSubMenus")}addLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(t=>{this.closeSubMenuOnClick()&&t.addEventListener("click",this.closeDropDown)})}removeLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(t=>{t.removeEventListener("click",this.closeDropDown)})}closeSubMenuOnClick(){return this.hasCloseOnLinkClickValue?this.closeOnLinkClickValue:!0}};n.values={closeOnLinkClick:Boolean};let o=n;const s=class s extends l{connect(){this.flagLoaded()}on(){this.elementTargets.forEach(e=>{e.classList.add(...this.nameClasses)})}off(){this.elementTargets.forEach(e=>{e.classList.remove(...this.nameClasses)})}};s.classes=["name"],s.targets=["element"];let i=s;a([["ez-drop-down",o],["ez-form-select",m],["ez-modal",d],["dialog-modal",h],["ajax-dialog",u],["toggle-class",i]]);
