import{r as n}from"./stimulus-helpers-d189GC1Y-1.js";import{E as l}from"./ez-base-controller-CGJ-YSBe-1.js";import{s as p,au as h}from"./tracking-Lad8KHcD-1.js";import{P as u}from"./partner-image-results-C_Z13ZPW-1.js";import"./performance-helpers-DpsuwFL7-1.js";import"./js-Cz0CWeBA-1.js";import"./helpers-AnDMAI8W-1.js";import"./init-user-BlDnuGFC-1.js";import"./index-C4xxlH8f-1.js";import"./_commonjsHelpers-BosuxZz1-1.js";const d="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2026.1.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20147.6%2020.9'%20style='enable-background:new%200%200%20147.6%2020.9;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23FC3441;}%20%3c/style%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M88.1,11.6c-0.2,0-1-0.2-1.2-0.2c-1.2-0.2-2.2-0.5-2.2-1.7c0-1,1.1-1.5,2.4-1.5c2,0,3.7,0.9,3.9,1l1.1-2.9%20c-0.4-0.2-2.2-1.2-5-1.2c-2.6,0-5.7,1.3-5.7,4.7c0,3,2.1,3.9,4.2,4.3c0.3,0.1,1.2,0.2,1.4,0.2c1.4,0.2,2.1,0.7,2.1,1.7%20c0,1.1-1.1,1.7-2.7,1.7c-2.6,0-4.2-0.8-4.6-1l-1.2,2.8c0.4,0.2,2.2,1.2,5.6,1.2c3.4,0,6.1-1.7,6.1-4.8%20C92.5,13.2,90.5,12.1,88.1,11.6'/%3e%3cpath%20class='st0'%20d='M98.4,0l-3.2,1.8v3.8h-1.7v3.1h1.7v6.6c0,2.8,1.2,5.4,5.3,5.4h1.3v-3.1h-0.5c-2,0-2.9-1.2-2.9-2.7V8.6h3.7%20V5.5h-3.7V0'/%3e%3cpath%20class='st0'%20d='M123.5,8.3c1.2,0,2.5,0.6,2.9,1.9l2.9-1.1c-0.8-2.9-3.5-4-5.8-4c-4.2,0-5.9,2.6-5.9,5.2v5.3%20c0,2.5,1.7,5.2,5.9,5.2c2.4,0,5-1.1,5.8-4l-2.9-1.1c-0.4,1.4-1.7,1.9-2.9,1.9c-2.2,0-2.8-1.2-2.8-2.5v-4.3%20C120.7,9.5,121.3,8.3,123.5,8.3'/%3e%3cpolyline%20class='st0'%20points='137.1,12.3%20143.1,5.5%20139.2,5.5%20134,11.4%20134,0%20130.8,0%20130.8,20.6%20134,20.6%20134,15.8%20135.1,14.6%20139.7,20.6%20143.5,20.6%20137.1,12.3%20'/%3e%3cpath%20class='st0'%20d='M111.1,8.8h-3.3c-0.5,0-1,0.4-1,1v3.6h-3.3V9.8c0-2.3,1.9-4.2,4.2-4.2h3.3V8.8'/%3e%3cpath%20class='st0'%20d='M108.4,17.3h3.3c0.5,0,1-0.4,1-1v-3.6h3.3v3.6c0,2.3-1.9,4.2-4.2,4.2h-3.3V17.3'/%3e%3cpath%20class='st0'%20d='M54.1,5.5h3.7v3.1h-3.7v6.2c0,1.6,0.8,2.7,2.9,2.7h0.5v3.1h-1.3c-4.1,0-5.3-2.5-5.3-5.4V8.6h-5.4v6.2%20c0,1.6,0.8,2.7,2.9,2.7h0.5v3.1h-1.3c-4.1,0-5.3-2.5-5.3-5.4V8.6h-1.6V5.5h1.6V1.8L45.5,0v5.5h5.4V1.8L54.1,0V5.5'/%3e%3cpath%20class='st0'%20d='M19.5,5.2c-1,0-2,0.2-3,0.6V0h-3.2v20.6h3.2V8.8c0.6-0.4,1.6-0.6,2.5-0.6c2,0,3,1.1,3,2.8v9.6h3.2V10.5%20C25.2,7.5,23,5.2,19.5,5.2'/%3e%3cpath%20class='st0'%20d='M35.8,17.6c-0.6,0.3-1.4,0.5-2.1,0.5c-2.4,0-3.3-1.2-3.3-2.9V5.5h-3.2v9.7c0,3.8,2.2,5.6,6.1,5.6%20c1.9,0,3.9-0.5,5.7-1.3V5.5h-3.2V17.6'/%3e%3cpath%20class='st0'%20d='M7.4,11.6c-0.2,0-1-0.2-1.2-0.2C5,11.2,4,11,4,9.8c0-1,1.1-1.5,2.4-1.5c2,0,3.7,0.9,3.9,1l1.1-2.9%20c-0.4-0.2-2.2-1.2-5-1.2c-2.6,0-5.7,1.3-5.7,4.7c0,3,2.1,3.9,4.2,4.3c0.3,0.1,1.2,0.2,1.4,0.2c1.4,0.2,2.1,0.7,2.1,1.7%20c0,1.1-1.1,1.7-2.7,1.7c-2.6,0-4.2-0.8-4.6-1L0,19.7c0.4,0.2,2.2,1.2,5.6,1.2c3.4,0,6.1-1.7,6.1-4.8C11.7,13.2,9.8,12.1,7.4,11.6'%20/%3e%3cpath%20class='st0'%20d='M71,10.4c0-2.8-2.1-5.2-5.9-5.2c-4.3,0-5.9,2.7-5.9,5.2v5c0,3.5,2.2,5.5,5.9,5.5c3.3,0,5-1.9,5.5-3l-2.7-1.6%20c-0.2,0.7-1.3,1.6-2.8,1.6c-2,0-2.7-1.1-2.7-2.5l0-0.8H71V10.4%20M67.8,11.9h-5.4v-1.1c0-1.2,0.6-2.5,2.7-2.5c2,0,2.7,1.3,2.7,2.5%20V11.9z'/%3e%3cpath%20class='st0'%20d='M73,10.4v10.2h3.2v-9.9c0-0.9,0.5-2.3,2.8-2.3c0.4,0,1.2,0.1,1.5,0.2V5.4c-0.3-0.1-0.9-0.2-1.6-0.2%20C74.8,5.2,73,7.8,73,10.4'/%3e%3cpath%20class='st0'%20d='M146.1,8.2c-0.9,0-1.6-0.7-1.6-1.5s0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6C147.6,7.6,146.9,8.2,146.1,8.2%20M146.1,5.5c-0.7,0-1.2,0.5-1.2,1.2c0,0.6,0.5,1.2,1.2,1.2c0.7,0,1.2-0.5,1.2-1.2C147.2,6,146.7,5.5,146.1,5.5z%20M146.3,7.4%20C146.3,7.4,146.3,7.4,146.3,7.4L146,6.9h-0.2v0.5c0,0,0,0,0,0h-0.3c0,0,0,0,0,0V5.9h0.6c0.4,0,0.6,0.3,0.6,0.5v0%20c0,0.2-0.1,0.4-0.3,0.5l0.3,0.5c0,0,0,0,0,0H146.3z%20M146.4,6.4c0-0.1-0.1-0.2-0.3-0.2h-0.2v0.5h0.2C146.3,6.7,146.4,6.6,146.4,6.4%20L146.4,6.4z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o=class o extends l{constructor(){super(...arguments),this.noResultTimer=null,this.clearNoResultsTimeout=e=>{e.detail!=="END_OF_RESULTS"&&window.clearTimeout(this.noResultTimer)},this.addMoreButtonHref=(e=null)=>{this.hasViewMoreButtonTarget&&(this.viewMoreButtonTarget.href=e.view_more_url)}}connect(){this.waitForCondition(()=>{var e;return(e=window.partnerService)==null?void 0:e.ready()},()=>{window.partnerService.showDirect()?this.afterConnected():this.element.remove()})}afterConnected(){this.searchTerm=this.apiResultsWrapperTarget.getAttribute("data-keyword"),this.resourceID=this.apiResultsWrapperTarget.getAttribute("data-resource-id"),this.getPartnerImageResults(),this.noResultTimer=setTimeout(()=>{this.element.querySelector(".ez-resource-thumb")||this.element.parentNode.removeChild(this.element)},this.noResultsDelay),window.addEventListener("resultsLoaded",this.clearNoResultsTimeout)}disconnect(){window.removeEventListener("resultsLoaded",this.clearNoResultsTimeout)}setLogo(e){const r=this.element.querySelector(".partner-logo-placeholder");if(r)if(e.logo_path){const t=new Image;t.src=`${new URL(Object.assign({"../../../../../frontend/components/partner/img/shutterstock-logo.svg":d})[`../../../../../frontend/components/partner/img/${e.logo_path}`],import.meta.url)}`,t.alt=e.alt_text,t.classList.add("partner-sponsored-results__footer__partner-logo"),r.replaceWith(t)}else{const t=document.createElement("span");t.textContent=e.name,t.classList.add("partner-sponsored-results__footer__sponsored-text__partner-name"),r.replaceWith(t)}}setCouponInfo(e){if(!e){this.couponCodeLinkTarget.remove();return}const r=e.percent?this.couponCodeLinkTarget.innerHTML.replace(/{{coupon_percent}}/g,e.percent):this.percentlessCouponLinkTextValue;this.couponCodeLinkTarget.innerHTML=r,this.couponCodeLinkTarget.classList.remove("is-hidden")}trackClick(e){p({element:this.element,data:{action:h,label:`Terms-${this.termsValue}`,partner_click_selection:e}})}get noResultsDelay(){return 15*1e3}partnerClick(){this.trackClick("Partner-Content")}revealPromoCode(e){e.preventDefault(),this.trackClick("Partner-Coupon"),this.makeCouponWindow(),window.location.href=this.makeCouponCodePartnerUrl()}makeCouponCodePartnerUrl(){return window.partnerService.couponUrl()}makeCouponWindow(){const{code:e,percent:r,expDate:t}=window.partnerService.couponInfo(this.partnerResponse);if(!e)return;const a=window.partnerService.partnerConfig(this.partnerResponse.provider),s=new URLSearchParams;e&&s.set("code",e),r&&s.set("percent",r),t&&s.set("exp_date",t);const i=window.open("","partner-sale","width=520,height=340");i.location.href=`/${a.name.toLowerCase()}-coupons/coupon_code?${s.toString()}`}getPartnerImageResults(){new u(this.apiResultsWrapperTarget,this.searchTerm,this.addMoreButtonHref).getResults({controllerElem:this.element,page:this.apiResultsWrapperTarget.getAttribute("data-page"),placement:this.placementValue,limit:Number(this.apiResultsWrapperTarget.getAttribute("data-limit")),rowHeight:Number(this.apiResultsWrapperTarget.getAttribute("data-row-height")),maxRows:this.apiResultsWrapperTarget.getAttribute("data-max-rows"),padWithTerm:this.apiResultsWrapperTarget.getAttribute("data-pad-with-term"),backfillImageUrl:this.apiResultsWrapperTarget.getAttribute("data-backfill-image-url"),receivedResponse:r=>{this.partnerResponse=r;const{provider:t}=this.partnerResponse,a=window.partnerService.partnerConfig(t),s=window.partnerService.couponInfo(r);this.setLogo(a),this.setCouponInfo(s)}})}viewMoreClick(){this.trackClick("Partner-View More")}};o.targets=["apiResultsWrapper","couponCodeLink","viewMoreButton"],o.values={percentlessCouponLinkText:String,placement:String,terms:String};let c=o;n([["partner-sponsored-results",c]]);
