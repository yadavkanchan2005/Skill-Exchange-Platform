(()=>{var SE=Object.create;var da=Object.defineProperty,bE=Object.defineProperties,AE=Object.getOwnPropertyDescriptor,wE=Object.getOwnPropertyDescriptors,vE=Object.getOwnPropertyNames,kc=Object.getOwnPropertySymbols,TE=Object.getPrototypeOf,Mc=Object.prototype.hasOwnProperty,RE=Object.prototype.propertyIsEnumerable;var aa=(i,e,t)=>e in i?da(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,w=(i,e)=>{for(var t in e||(e={}))Mc.call(e,t)&&aa(i,t,e[t]);if(kc)for(var t of kc(e))RE.call(e,t)&&aa(i,t,e[t]);return i},B=(i,e)=>bE(i,wE(e));var Bc=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var f=(i,e)=>()=>(i&&(e=i(i=0)),e);var pi=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var CE=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of vE(e))!Mc.call(i,s)&&s!==t&&da(i,s,{get:()=>e[s],enumerable:!(r=AE(e,s))||r.enumerable});return i};var Di=(i,e,t)=>(t=i!=null?SE(TE(i)):{},CE(e||!i||!i.__esModule?da(t,"default",{value:i,enumerable:!0}):t,i));var E=(i,e,t)=>(aa(i,typeof e!="symbol"?e+"":e,t),t);var O=(i,e,t)=>new Promise((r,s)=>{var n=d=>{try{a(t.next(d))}catch(c){s(c)}},o=d=>{try{a(t.throw(d))}catch(c){s(c)}},a=d=>d.done?r(d.value):Promise.resolve(d.value).then(n,o);a((t=t.apply(i,e)).next())});var Ft,OE,LS,Tt,xE,kS,Fc,Uc,la,Gc,Li,ca,fa,ms,hs,Vc,gs,qc,ua,zc,Hc,mi,rt,_s,Es,$c,Yc,jc,Kc,Tr,Wc,Qc,J=f(()=>{Ft="freestar.com",OE="undefined",LS=`${OE}pubfig.min.js`,Tt="https://a.pub.network/core",xE="undefined",kS=`${xE}prebid.js`,Fc=[{siteId:285,restrictedCountries:["IN","VN","NP","DZ","IQ","MA","AF","TR","EG","PK","ID","MA","BD","RS","PH","TN","BG"]}],Uc=["triplelift"],la=["revolvingRail","slidingUnit","superflex","interstitial","stickyRail"],Gc=[[468,60],[728,90],[970,90],[970,250],[300,50],[300,100],[320,50],[320,100],[120,600],[160,600],[300,250],[300,600],[336,280],[1,1],[0,0]],Li="15184186",ca="1966186",fa={v1:[{precision:2,min:0,max:20,increment:.01},{precision:2,min:20,max:40,increment:.5},{precision:2,min:40,max:100,increment:1},{precision:2,min:100,max:150,increment:2.5},{precision:2,min:150,max:250,increment:5},{precision:2,min:250,max:400,increment:10},{precision:2,min:400,max:800,increment:50}],v2:[{precision:2,min:0,max:2,increment:.01},{precision:2,min:2,max:10,increment:.05},{precision:2,min:10,max:20,increment:.5},{precision:2,min:20,max:100,increment:5}]},ms=["AT","BE","BG","HR","CY","CZ","DK","EE","EL","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","NO","IS","LI","CH"],hs=["CA","CO","CT","VA","UT"],Vc=[285],gs={gumgum:'[id^="ad_is"]',thirtyThreeAcross:'[class^="ttx-lb"]',undertone:'[class^="ut_container"]',kargo:'[class^="kargo-ad"]',yieldmo:'[class^="ym-adhesion"]',ogury:'[class^="ogy-footer-ad"]'},qc=850,ua="dianomi_context_script",zc="https://www.dianomi.com/js/contextfeed.js",Hc=["sortable"],mi="FREESTAR",rt="NONE",_s={FREESTAR:"FREESTAR",NONE:"PUBLISHER"},Es="00000000-0000-0000-0000-000000000000",$c=["BD","DZ","MM","NI","CM","MR","GN","CG","CN","ET","SS","PK","TN","PS","AO","BJ","VE","HT","TG","MG","SO","GM","KH","YE","IR","RU","SD","VG","TJ","SM","GL","BQ","TL","AX","MF","MH","MP","TD","VU","WS","BI","SY","DJ","NE","AS","AI","GQ","CU","PM","SB","PW","FM","YT","TO","CK","ER","MS","UM","GW","BL","NR","KM","KI","FK","CC","CF","TM","WF","ST","IO","TV","NF","SH","VA","EH","KP","NU","AQ","TK","CX","SJ","PN"],Yc="https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js",jc=899033,Kc=1035372,Tr="fs.config",Wc="amazon",Qc=25});function Jc(i,e,t){if(!e)return;let s=(Array.isArray(e)?e:e.match(/([^[.\]])+/g)).reduce((n,o)=>n&&n[o],i);return s===void 0?t:s}var Xc=f(()=>{});var U,Zc,Ke=f(()=>{U=(i,e=window)=>{var r,s;return(s=new URLSearchParams((r=e.location)==null?void 0:r.search).get(i))!=null?s:""},Zc=(i,e=window)=>{let t=new URLSearchParams(e.location.search);t.has(i)&&t.delete(i),e.location.search=t.toString()}});function Is({value:i}){return i&&Array.isArray(i)&&i.length>0}function tf(i){return i===!!i}function Ss(i){return typeof i=="number"}function rf(i,e,t){return i.split(e).join(t)}function bs(i){return typeof i=="string"}function As(i,e){let t=typeof e=="function"?e:r=>r[e];return[...i.reduce((r,s)=>{let n=s==null?s:t(s);return r.has(n)||r.set(n,s),r},new Map).values()]}function Rr(i,e){let t=Math.max(...i.map(e));return i.find(r=>e(r)===t)}function pa(i,e){let t=[],r=i.filter((s,n)=>e(s)&&t.push(n));return t.reverse().forEach(s=>i.splice(s,1)),r}function nf(i){return[...new Set(i)]}function ef(i){return Object.prototype.toString.call(i).slice(8,-1).toLowerCase()}function PE(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!ws(i[t],e[t]))return!1;return!0}function NE(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&!ws(i[t],e[t]))return!1;return!0}function DE(i,e){return i.toString()===e.toString()}function LE(i,e){return i===e}function ws(i,e){let t=ef(i);return t!==ef(e)?!1:t==="array"?PE(i,e):t==="object"?NE(i,e):t==="function"?DE(i,e):LE(i,e)}function ys(i){return i instanceof Object}function kE(i){return typeof i=="symbol"}function Ut(i){let e=/^\s+|\s+$/g,t=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,s=/^0o[0-7]+$/i;if(typeof i=="number")return i;if(kE(i))return NaN;if(ys(i)){let o=typeof i.valueOf=="function"?i.valueOf():i;i=ys(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=i.replace(e,"");let n=r.test(i);return n||s.test(i)?parseInt(i.slice(2),n?2:8):t.test(i)?NaN:+i}function ma(i){return[...new Set(i.map(e=>JSON.stringify(e)))].map(e=>JSON.parse(e))}function Gt(i=window.freestar.locData){return i?i.iso==="US"&&hs.includes(i.state):!1}function ha(i,e){let t=e&&e[i]||"";try{return JSON.parse(t)}catch(r){return t||""}}function ga(i){return i==null}function ki(i,e){let t=null;return function(...r){let s=this;clearTimeout(t),t=setTimeout(()=>i.apply(s,r),e)}}function Cr(){let i={},e=!1,t=0,r=arguments.length;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(e=arguments[0],t++);let s=function(n){for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e&&Object.prototype.toString.call(n[o])==="[object Object]"?i[o]=Cr(!0,i[o],n[o]):i[o]=n[o])};for(;t<r;t++)s(arguments[t]);return i}var sf,_a,of,af,re=f(()=>{J();Xc();Ke();sf=Jc;_a=({placement:i,sizesAllowed:e=!1})=>{let{sizes:t}=i;return t=t.filter(r=>Array.isArray(r)),Array.isArray(e)&&(t=t.filter(r=>e.indexOf(r.join("x"))!==-1)),_a(t)},of=()=>{let i=U("quartile");return i?Number(i):null},af=()=>U("disableFC")==="true"});function UE(){return new FE}function GE(){return new WeakMap}function Ia(i){if(!i)return Ea(null);var e=i.constructor;if(e===Object)return i===Object.prototype?{}:Ea(i);if(e&&~ME.call(e).indexOf("[native code]"))try{return new e}catch(t){}return Ea(i)}function qE(i){var e="";return i.global&&(e+="g"),i.ignoreCase&&(e+="i"),i.multiline&&(e+="m"),i.unicode&&(e+="u"),i.sticky&&(e+="y"),e}function zE(i){return i.flags}function df(i){var e=BE.call(i);return e.substring(8,e.length-1)}function $E(i){return i[Symbol.toStringTag]||df(i)}function QE(i){return lf(i).concat(Sa(i))}function Ts(i,e,t){for(var r=JE(i),s=0,n=r.length,o=void 0,a=void 0;s<n;++s)if(o=r[s],!(o==="callee"||o==="caller")){if(a=KE(i,o),!a){e[o]=t.copier(i[o],t);continue}!a.get&&!a.set&&(a.value=t.copier(a.value,t));try{jE(e,o,a)}catch(d){e[o]=a.value}}return e}function XE(i,e){var t=new e.Constructor;e.cache.set(i,t);for(var r=0,s=i.length;r<s;++r)t[r]=e.copier(i[r],e);return t}function ZE(i,e){var t=new e.Constructor;return e.cache.set(i,t),Ts(i,t,e)}function pf(i,e){return i.slice(0)}function ey(i,e){return i.slice(0,i.size,i.type)}function ty(i,e){return new e.Constructor(pf(i.buffer))}function iy(i,e){return new e.Constructor(i.getTime())}function mf(i,e){var t=new e.Constructor;return e.cache.set(i,t),i.forEach(function(r,s){t.set(s,e.copier(r,e))}),t}function ry(i,e){return Ts(i,mf(i,e),e)}function sy(i,e){var t=Ia(e.prototype);e.cache.set(i,t);for(var r in i)ff.call(i,r)&&(t[r]=e.copier(i[r],e));return t}function ny(i,e){var t=Ia(e.prototype);e.cache.set(i,t);for(var r in i)ff.call(i,r)&&(t[r]=e.copier(i[r],e));for(var s=Sa(i),n=0,o=s.length,a=void 0;n<o;++n)a=s[n],WE.call(i,a)&&(t[a]=e.copier(i[a],e));return t}function ay(i,e){var t=Ia(e.prototype);return e.cache.set(i,t),Ts(i,t,e)}function ya(i,e){return new e.Constructor(i.valueOf())}function dy(i,e){var t=new e.Constructor(i.source,HE(i));return t.lastIndex=i.lastIndex,t}function vs(i,e){return i}function hf(i,e){var t=new e.Constructor;return e.cache.set(i,t),i.forEach(function(r){t.add(e.copier(r,e))}),t}function ly(i,e){return Ts(i,hf(i,e),e)}function py(i){return{Arguments:i.object,Array:i.array,ArrayBuffer:i.arrayBuffer,Blob:i.blob,Boolean:ya,DataView:i.dataView,Date:i.date,Error:i.error,Float32Array:i.arrayBuffer,Float64Array:i.arrayBuffer,Int8Array:i.arrayBuffer,Int16Array:i.arrayBuffer,Int32Array:i.arrayBuffer,Map:i.map,Number:ya,Object:i.object,Promise:vs,RegExp:i.regExp,Set:i.set,String:ya,WeakMap:vs,WeakSet:vs,Uint8Array:i.arrayBuffer,Uint8ClampedArray:i.arrayBuffer,Uint16Array:i.arrayBuffer,Uint32Array:i.arrayBuffer,Uint64Array:i.arrayBuffer}}function _f(i){var e=ba({},gf,i),t=py(e),r=t.Array,s=t.Object;function n(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=fy(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return s(o,a);if(cy(o))return r(o,a);var d=t[YE(o)];return d?d(o,a):typeof o.then=="function"?o:s(o,a)}return function(a){return n(a,{Constructor:void 0,cache:VE(),copier:n,prototype:void 0})}}function my(i){return _f(ba({},uy,i))}var ME,Ea,BE,FE,VE,HE,YE,jE,KE,lf,Sa,cf,ff,WE,uf,JE,oy,cy,ba,fy,gf,uy,zS,st,Mi=f(()=>{ME=Function.prototype.toString,Ea=Object.create,BE=Object.prototype.toString,FE=function(){function i(){this._keys=[],this._values=[]}return i.prototype.has=function(e){return!!~this._keys.indexOf(e)},i.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},i.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},i}();VE=typeof WeakMap!="undefined"?GE:UE;HE=/test/g.flags==="g"?zE:qE;YE=typeof Symbol!="undefined"?$E:df,jE=Object.defineProperty,KE=Object.getOwnPropertyDescriptor,lf=Object.getOwnPropertyNames,Sa=Object.getOwnPropertySymbols,cf=Object.prototype,ff=cf.hasOwnProperty,WE=cf.propertyIsEnumerable,uf=typeof Sa=="function";JE=uf?QE:lf;oy=uf?ny:sy;cy=Array.isArray,ba=Object.assign,fy=Object.getPrototypeOf||function(i){return i.__proto__},gf={array:XE,arrayBuffer:pf,blob:ey,dataView:ty,date:iy,error:vs,map:mf,object:oy,regExp:dy,set:hf},uy=ba({},gf,{array:ZE,map:ry,object:ay,set:ly});zS=my({}),st=_f({})});var pe,hi=f(()=>{pe={DYNAMIC_AD_OPTIONS:"dynamicAdOptions",DYNAMIC_AD_OPTIONS_V2:"dynamicAdOptionsV2",PUSHDOWN_OPTIONS:"pushdownOptions",SIDE_WALL_OPTIONS:"sideWallOptions",SLIDING_UNIT_OPTIONS:"slidingUnitOptions",STICKY_AD_OPTIONS:"stickyAdOptions",STICKY_FOOTER_OPTIONS:"stickyFooterOptions"}});function yf(i,e){let t=new Set,r=hy();return i.forEach(s=>{(s.superflex||s.superflexV2)&&t.add("Superflex"),s.lazyAd&&t.add("LazyAd"),s.fluidAd&&t.add("FluidAd"),s.stickyFooterOptions&&s.stickyFooterOptions.active&&t.add("StickyFooter"),s.sideWallOptions&&s.sideWallOptions.type!==0&&t.add("SideWall"),s.pushdownOptions&&s.pushdownOptions.isPushdownUnit&&t.add("Pushdown"),s.revolvingRailOptions&&s.revolvingRailOptions.active&&t.add("RevolvingRail"),s.stickyRailOptions&&s.stickyRailOptions.active&&t.add("StickyRail"),s.interstitialOptions&&s.interstitialOptions.active&&t.add("Interstitial");let n=s.sizeMappings.some(o=>{var a;return(a=o==null?void 0:o.elementTargetedConfig)==null?void 0:a.active});(s.dynamicAdOptions&&s.dynamicAdOptions.active||n)&&t.add("DynamicAds"),s.dynamicAdOptionsV2&&s.dynamicAdOptionsV2.dynamicAd2&&t.add("DynamicAds"),s.slidingUnitOptions&&s.slidingUnitOptions.active&&t.add("SlidingUnit"),s.stickyAdOptions&&s.stickyAdOptions.stickyAdEnabled&&t.add("StickyAd"),s.sizeMappings&&s.sizeMappings.forEach(o=>{o.videoEnabled&&t.add("Video"),o.superflex&&t.add("Superflex")})}),e.forEach(s=>{s.active&&t.add("Video")}),Array.from(t).filter(s=>r.includes(s))}var Ef,hy,We,mt,nt=f(()=>{hi();Ef="StickyFooter,SideWall,Video,SlidingUnit,StickyAd,Pushdown,StickyRail,DynamicAds,Interstitial,Superflex,Carousel,InImage",hy=()=>Ef.includes("ALL_POSSIBLE_MODULES")?[]:Ef.split(",").map(i=>i.trim()),We=({placement:i,type:e})=>{let t=i&&i[e]&&i[e].active!=null&&i[e].active!==!1;return!t&&(e===pe.DYNAMIC_AD_OPTIONS_V2&&i[e].dynamicAd2||e===pe.PUSHDOWN_OPTIONS&&i[e].isPushdownUnit||e===pe.SIDE_WALL_OPTIONS&&i[e].type!==0||e===pe.STICKY_AD_OPTIONS&&i[e].stickyAdEnabled||e===pe.STICKY_FOOTER_OPTIONS&&Object.keys(i[e]).length>0&&i[e].active!==!1)?!0:t},mt=({placement:i,type:e})=>We({placement:i,type:e})?i[e]:{}});var If,Or,Me,Sf,gy,Bi,xr=f(()=>{If=["click","scroll"],Or={},Me=()=>typeof window.freestar.config.pageSpeedOptimized!="undefined"?window.freestar.config.pageSpeedOptimized:window.freestar.fsdata.pageSpeedOptimized,Sf=()=>{If.forEach(i=>document.removeEventListener(i,Sf))},gy=({name:i,callback:e})=>{Or[i].waiting&&!Or[i].called&&(Or[i].called=!0,Sf(),e())},Bi=({name:i,callback:e})=>{Object.prototype.hasOwnProperty.call(Or,i)||(Or[i]={waiting:!0},If.forEach(t=>document.addEventListener(t,gy.bind(null,{name:i,callback:e}),{once:!0})))}});function V({key:i,type:e=G.string.type}){let t=sessionStorage.getItem(i);if(e===G.object.type){if(t){let r=JSON.parse(t);if(ys(r))return r}return G.object.default}if(e===G.array.type){if(t){let r=JSON.parse(t);if(Array.isArray(r))return r}return G.array.default}if(e===G.number.type){let r=Number(t);return Number.isInteger(r)?r:G.number.default}return t}function ge({key:i,type:e=G.string,value:t}){t&&((e===G.object||e===G.array)&&(t=JSON.stringify(t)),sessionStorage.setItem(i,t))}function Fi({key:i}){sessionStorage.removeItem(i)}var G,me=f(()=>{re();G={string:{type:"string",default:""},array:{type:"array",default:[]},object:{type:"object",default:{}},number:{type:"number",default:void 0}}});var Ee,ee,Vt,Pe=f(()=>{Ee="desktop",ee="mobile",Vt="tablet"});var Aa,Rs,Cs=f(()=>{me();Aa="fs.exclude.bidders",Rs={key:Aa,type:G.array.type}});function Os(){if(freestar.fsdata.adQualityOptions.vendor)return freestar.deviceInfo.device.type===Ee&&freestar.fsdata.adQualityOptions.desktopEnabled||freestar.fsdata.adQualityOptions.mobileEnabled?freestar.fsdata.adQualityOptions.vendor:null;switch(freestar.deviceInfo.device.type){case Ee:return freestar.fsdata.adQualityDesktopVendor;case ee:return freestar.fsdata.adQualityMobileVendor;default:return null}}function xs(){return V(Rs)}function Ps({network:i,adQualityBlockList:e}){return Is({value:e})?!e.includes(i.slug):!0}var Pr=f(()=>{me();re();Pe();Cs()});function yy(i){return{gvlid:Ey[i],useBaseGvlid:!0}}function Ns(i){let e=W(i);if(!wa[e]){let t=`${e}${_y}`;wa[e]=t,bf[t]=e,fsprebid.que.push(()=>void fsprebid.aliasBidder(e,t,yy(e)))}return wa[e]}function W(i){return bf[i]||i}var _y,wa,bf,Ey,Be=f(()=>{_y="FsClientAux",wa={},bf={},Ey={appnexus:32,openx:69,pulsepoint:81,sonobi:104,gumgum:61,rubicon:52,pubmatic:76,sharethrough:80,criteo:91,justpremium:62,smaato:82,telaria:202,adtelligent:410,ix:10,triplelift:28,quantcast:11,medianet:142,unruly:36,undertone:677,nativo:263,teads:132,kargo:972,connectad:138,oftmedia:32,blockthrough:815,yieldmo:173,connatix:143,smartadserver:45,yahoossp:25,grid:686,tappx:628,spotx:165,dianomi:885,onetag:241,amx:737,liveintent:148,ttd:21,vidazoo:744,ogury:31,rise:1043,adform:50,aniview:780,insticator:910,seedtag:157,OperaAds:1135,minutemedia:918,cadent:183,yahooAds:25}});function Ds(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)i[r]=t[r]}return i}function va(i,e){function t(s,n,o){if(typeof document!="undefined"){o=Ds({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var d in o)o[d]&&(a+="; "+d,o[d]!==!0&&(a+="="+o[d].split(";")[0]));return document.cookie=s+"="+i.write(n,s)+a}}function r(s){if(!(typeof document=="undefined"||arguments.length&&!s)){for(var n=document.cookie?document.cookie.split("; "):[],o={},a=0;a<n.length;a++){var d=n[a].split("="),c=d.slice(1).join("=");try{var u=decodeURIComponent(d[0]);if(o[u]=i.read(c,u),s===u)break}catch(p){}}return s?o[s]:o}}return Object.create({set:t,get:r,remove:function(s,n){t(s,"",Ds({},n,{expires:-1}))},withAttributes:function(s){return va(this.converter,Ds({},this.attributes,s))},withConverter:function(s){return va(Ds({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(i)}})}var Iy,Ta,Af=f(()=>{Iy={read:function(i){return i[0]==='"'&&(i=i.slice(1,-1)),i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(i){return encodeURIComponent(i).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};Ta=va(Iy,{path:"/"})});function ot({name:i,value:e,expires:t=void 0,path:r=void 0,domain:s=void 0}){if(!i||!e)return!1;let n={secure:!0};return t&&(n.expires=t),r&&(n.path=r),s&&(n.domain=s),Ta.set(i,e,n),ht({name:i})}function ht({name:i}){return Ta.get(i)}function wf(){let i=ht({name:"_fs-test"});return i&&(i=JSON.parse(i),i.items.some((e,t)=>{e==i.selection&&(i.selected=t,i.testGroup=e.indexOf("ab_test")>-1?1:0)})),i}var Fe=f(()=>{Af();Ke()});var qt,Nr=f(()=>{qt={fsLoadPubfigVersion:"fsLoadPubfigVersion",fsaltconfig:"fsaltconfig",fsdebug:"fsdebug"}});var Ls,Sy,vf,by,ks,Ra=f(()=>{Fe();Nr();Ls=U(qt.fsdebug),Sy=[];Ls&&Ls!=="true"&&!Number.isInteger(+Ls)&&(Sy=Ls.split(",").map(i=>i.toUpperCase()));vf=()=>{let i=fsprebid.getBidResponses(),e=fsprebid.getAllWinningBids(),t=[];if(Object.keys(i).forEach(function(r){i[r].bids.forEach(function(n){t.push({bid:n,adunit:r,adId:n.adId,bidder:n.bidder,time:n.timeToRespond,dims:`${n.width}x${n.height}`,cpm:n.cpm,msg:n.status,rendered:!!e.find(function(o){return o.adId==n.adId})})})}),t.length&&!console.table)for(let r=0;r<t.length;r++);},by={title:"Pubfig"},ks=class{constructor(){this.logs=[]}add(e){this.logs.push(e)}show(e=by){if(!freestar.log||this.logs.length===0)return;let t=this.logs;this.logs=[],freestar.log(e,` ${t.join(` `)}`)}}});function Ms({key:i}){let e=V({key:i,type:G.object.type});if(e){let{value:t,expiry:r}=e;if(!r||r<Date.now())Fi({key:i});else return t}return null}function Ca({key:i,value:e,expiry:t}){ge({key:i,type:G.object,value:{value:e,expiry:t}})}function Tf({key:i,value:e}){Ca({key:i,value:e,expiry:Date.now()+1e3*60*60})}function Rf({key:i,value:e}){Ca({key:i,value:e,expiry:Date.now()+1e3*60*15})}function Cf({key:i,value:e}){Ca({key:i,value:e,expiry:Date.now()+1e3*60*5})}var Oa=f(()=>{me()});var xa,Pa,zt,Bs=f(()=>{me();xa="fs.session",Pa=class{constructor(){var t;this.cdep=!!freestar.cdep;let e=JSON.parse(V({key:xa}));this.known=Number((t=e==null?void 0:e.known)!=null?t:0)}_update(e){this.known=e;let t=JSON.parse(V({key:xa}));if((t==null?void 0:t.known)!==this.known){let r=Object.assign({},t,{known:this.known});ge({key:xa,type:G.object,value:r})}}get isKnownByPrebidUser(){var e;return!!((e=window.fsprebid)!=null&&e.getUserIds&&Object.keys(window.fsprebid.getUserIds()).length)}get isCDEPUser(){return this.cdep}get _isKnown(){return Number(!this.isCDEPUser&&this.isKnownByPrebidUser)}get isKnown(){return this._update(this._isKnown),this.known}},zt=new Pa});var gt,Dr=f(()=>{gt=class{constructor(){this.slug="fsxs2s"}addToPlacementAsBidder(){return{bidder:this.slug,params:{}}}getSlug(){return this.slug}hasTopLevelStoredRequest(){let{topLevelStoredRequestId:e}=window.freestar.fsdata;return e&&e.length}hasImpLevelStoredRequests(){let{placements:e}=window.freestar.fsdata;return e.filter(t=>t.storedRequestId&&t.storedRequestId.length).length}hasValidStoredRequests(){return this.hasImpLevelStoredRequests()||this.hasTopLevelStoredRequest()}}});var Na,_t,Ui=f(()=>{Na=class{static createInstance({ClassConstructor:e,instanceName:t,params:r=[]}){if(window.freestar=window.freestar||{},window.freestar.instances=window.freestar.instances||{},window.freestar.instances[t])return window.freestar.instances[t];let s=new e(...r);return window.freestar.instances[t]=s,s}static getInstanceFn({ClassConstructor:e,instanceName:t,params:r=[]}){return()=>this.createInstance({ClassConstructor:e,instanceName:t,params:r})}},_t=Na});var Da,Ue,Fs=f(()=>{Ui();Da=class{constructor(){this.results={},this.ongoingRequests=new Map}clearClassCachedData({requestId:e}){Object.prototype.hasOwnProperty.call(this.results,e)&&delete this.results[e]}fetch(n){return O(this,arguments,function*({fetchFn:e,requestId:t,onError:r,onSuccess:s}){if(this.results[t])return this.results[t];if(!this.ongoingRequests.has(t)){let o=e().then(a=>{let d={data:a,error:null};return this.results[t]=d,s&&s(a),d},a=>{let d={data:null,error:a};return this.results[t]=d,r&&r(a),d});this.ongoingRequests.set(t,o)}return this.ongoingRequests.get(t).finally(()=>{this.ongoingRequests.delete(t)})})}get({requestId:e}){return this.results[e]}},Ue=_t.getInstanceFn({ClassConstructor:Da,instanceName:"requestHandler"})});var Us,Of,La=f(()=>{Us="4e799501-b8b6-4ef1-bad5-225b3dd1aa8d",Of="https://api.floors.dev/sgw/v1/floors"});var xf,gi,Gs,_i,Ht,ka=f(()=>{xf="https://optimise.net/",gi="fs.idealadstack.config",Gs="session storage",_i="network request",Ht=Object.freeze({CLIENT:"client",SERVER:"server",BOTH:"both"})});function Gi(){return window.freestar.fsdata.domain||location.host}var Vs=f(()=>{});function qs(i){return i.interstitialOptions&&i.interstitialOptions.active&&i.interstitialOptions.type==="GOOGLE_INTERSTITIAL"}function Ma({event:i}){return window.freestar.googleInterstitialPlacement&&i.slot.getSlotElementId().includes(window.freestar.googleInterstitialPlacement.placement.dfpId)}var zs=f(()=>{});function Ei({siteId:i,placement:e}){return Et({siteId:i})||wy.has(i)&&qs(e)}function Et({siteId:i}){return Ay.has(i)}var Ay,wy,yi=f(()=>{zs();Ay=new Set([1542,6010,5958,5891]),wy=new Set([533])});var Pf,Nf=f(()=>{Pf=()=>{if(window.freestar)return window.freestar.deviceInfo.device.vendor==="Apple"?"smartphone-ios":window.freestar.deviceInfo.device.type}});var Vi,Df,Lf,Ba=f(()=>{Vi="fs.altConfig",Df="fs-test-mode",Lf="fs-test-mode-label"});function vy(){let i=new URLSearchParams;return i.set("k",zt.isKnown),i.set("d",Gi()),i.set("t",Pf()),freestar.locData&&i.set("c",freestar.locData.iso),U("fsiasdebug")&&i.set("g","experiment"),i.set("r",19),i.toString()}var Fa,qi,Ua=f(()=>{Oa();Bs();Fe();La();ka();Vs();yi();Nf();me();J();Ba();Fa=()=>O(void 0,null,function*(){var A,S,_,y,N;let e=((S=(A=window.freestar)==null?void 0:A.fsdata)==null?void 0:S.isTriple13Enabled)?"0":"1",{testGroup:t,testId:r,testType:s}=((y=(_=V({key:Tr,type:G.object.type}))==null?void 0:_.pubfigSettings)==null?void 0:y.abtest)||{},n=V({key:Vi}),o=n!==null&&!Number.isNaN(Number(n)),a=((N=V({key:Tr,type:G.object.type}))==null?void 0:N.altconfig)||!1,d={};Et({siteId:freestar.fsdata.siteId})||(d["x-api-key"]=Us,d["x-lm"]=e),t===1&&s==="PUBFIG_SETTINGS"?d["x-ab-test-id"]=r:o&&a&&(d["x-test-config-id"]=n);let c=yield fetch(`${xf}?${vy()}`,{method:"GET",credentials:"include",headers:d}),u=c.headers;c=yield c.text(),c=JSON.parse(c);let{testGroup:p,knownUser:m}=c;return{data:w({testGroup:p,knownUser:m,roundTripTime:u.get("fs-client-rtt")},c.config),source:_i}}),qi=()=>O(void 0,null,function*(){let i,e=Ms({key:gi});return e?i={data:e,source:Gs}:i=yield Fa(),i})});var kf,Hs,Lr,Mf,Bf,Ii=f(()=>{kf="https://c.pub.network",Hs="fs.abtest.group",Lr="fs.abtest.id",Mf="fs.abtest.type",Bf="fs.abtest.variant_type"});var we,Rt,$s,yt,Si,Ff,zi,Uf,Gf,xe=f(()=>{we="slotRenderEnded",Rt="slotRequested",$s="auctionInit",yt="auctionEnd",Si="bidResponse",Ff="bidRequested",zi="bidWon",Uf="bidTimeout",Gf="bidRejected"});var Ys,Hi,te,js=f(()=>{Ys=i=>{let{dependencies:e,name:t}=i||{};if(e){if(!Array.isArray(e))throw new Error(`Module Definition Error: ${t}. Dependencies must be an array.`);e.forEach(r=>{let{token:s}=typeof r=="string"?{token:r}:r;if(!s)throw new Error(`Module Definition Error: ${t}. Dependency must contain a token.`);if(typeof s!="string")throw new Error(`Module Definition Error: ${t}. Token must be a string.`)})}},Hi=i=>i.charAt(0).toLowerCase()+i.slice(1),te=(i,{name:e,returnValue:t,warn:r=!1}={})=>i||function(){return r&&console.warn(`${e||"module"} is disabled`),t}});var $t,Ks=f(()=>{$t={SINGLETON:"singleton",FOR_FEATURE:"forFeature"}});var I,Ws=f(()=>{Ks();js();I=class i{constructor(){this._modules=new Map}static get instance(){return this._instance||(this._instance=new i),this._instance}set(e,t){if(!e)throw new Error("Token must be provided");if(this._modules.has(e))throw new Error(`Module with token ${e} already exists`);this._modules.set(e,t)}get(e){return this._modules.get(e)}has(e){return this._modules.has(e)}delete(e){this._modules.delete(e)}getAlias(e){let t=this.get(e);return t==null?void 0:t.defaultAlias}clear(){this._modules.clear()}static class(e,{token:t,factory:r,dependencies:s=[],injectionMode:n=$t.SINGLETON,defaultAlias:o}={}){if(!e)throw new Error("Class must be provided");if(!t)throw new Error("Token must be provided");Ys({dependencies:s,name:e.name}),i.instance.set(t,{factory:r||(({dependencies:a})=>new e(a)),dependencies:s,injectionMode:n,defaultAlias:o||Hi(t),type:"classModule"})}static object({token:e,value:t,factory:r,dependencies:s,injectionMode:n=$t.SINGLETON,defaultAlias:o}={}){if(!e)throw new Error("Token must be provided");if(!t&&!r)throw new Error("Value or factory must be provided");Ys({dependencies:s,name:e}),i.instance.set(e,{value:t,factory:r,dependencies:s,injectionMode:n,defaultAlias:o||Hi(e),type:"object"})}static function(e,{token:t,dependencies:r,defaultAlias:s}={}){if(!e)throw new Error("Function must be provided");if(!t)throw new Error("Token must be provided");Ys({dependencies:r,name:t}),i.instance.set(t,{dependencies:r,defaultAlias:s||Hi(t),func:e,type:"function"})}}});var D,Vf=f(()=>{Ws();Ks();js();D=class i{constructor(e){this._moduleRegistry=e,this._moduleInstances=new Map}static get instance(){return this._instance||(this._instance=new i(I.instance)),this._instance}set(e,t){this._moduleInstances.set(e,t)}clear(){this._moduleInstances.clear()}get(e){return this._moduleInstances.get(e)}delete(e){this._moduleInstances.delete(e)}call(e,...t){return O(this,null,function*(){let r=this._moduleRegistry.get(e);if(!r)throw new Error(`Module with token "${e}" does not exist`);let{dependencies:s,type:n,func:o}=r;if(n!=="function")throw new Error(`Module with token "${e}" is not a function type`);let a=yield this._resolveDependencies({token:e,dependencies:s});return o(a,...t)})}create(r){return O(this,arguments,function*(e,{provide:t={}}={}){let s=this._moduleRegistry.get(e);if(!s)throw new Error(`Module with token "${e}" does not exist`);let{dependencies:n=[],factory:o,value:a,func:d}=s,c=n.filter(p=>{let m=this._getDependencyObject(p),h=m.alias||this._moduleRegistry.getAlias(m.token)||Hi(m.token);return!t[h]});return this._resolveDependencies({token:e,dependencies:c}).then(p=>this._createInstance({token:e,dependencies:w(w({},p),t),container:this,factory:o,value:a,func:d}))})}resolve(e,t){return O(this,null,function*(){return this._resolve({token:e,optional:t})})}resolveAll(e){return O(this,null,function*(){if(!Array.isArray(e))throw new Error("Tokens must be an array");return this._resolveDependencies({dependencies:e})})}has(e){return this._moduleInstances.has(e)}_resolve(n){return O(this,arguments,function*({token:e,resolvedDeps:t=new Set,parentToken:r,optional:s}){if(!this._moduleRegistry.has(e)){if(s)return null;throw new Error(`${[...t,e].join(" -> ")}. Module with token "${e}" does not exist`)}let o=this._moduleRegistry.get(e),{dependencies:a=[],factory:d,value:c,func:u,injectionMode:p=$t.SINGLETON}=o;if(r&&p===$t.FOR_FEATURE&&(e=`${r}:${e}`),this.has(e))return this.get(e);if(t.has(e))throw new Error(`Circular dependency detected: ${Array.from(t).join(" -> ")} ->${e}`);t.add(e);let m=this._resolveDependencies({token:e,dependencies:a,resolvedDeps:t}).then(g=>this._createInstance({token:e,dependencies:g,container:this,factory:d,value:c,func:u}));return this.set(e,m),m.then&&m.then(g=>{this.set(e,g)}),m})}_resolveDependencies(s){return O(this,arguments,function*({token:e,dependencies:t,resolvedDeps:r}){let n=[];return t.length&&(n=yield Promise.all(t.map(o=>O(this,null,function*(){let{token:a,alias:d,optional:c}=this._getDependencyObject(o),u=yield this._resolve({token:a,resolvedDeps:new Set(r),parentToken:e,optional:c}),p=this._moduleRegistry.getAlias(a);return[d||p||a,u]})))),Object.fromEntries(n)})}_getDependencyObject(e){return typeof e=="string"?{token:e}:e}_createInstance({dependencies:e,container:t,factory:r,value:s,token:n,func:o}){if(s!==void 0)return s;if(o!==void 0)return o.bind(null,e);if(!(r instanceof Function))throw new Error(`Container Error: ${n}. Factory must be a function`);let a=r({dependencies:e,container:t});if(!(a instanceof Object))throw new Error(`Container Error: ${n}. Factory must return an object`);return a}}});var qf=f(()=>{js();Ws();Vf();Ks()});function ve(i,e){return e.reduce((t,r)=>(i[r]!==void 0&&(t[r]=i[r]),t),{})}var zf=f(()=>{});var Qs,Js,kr=f(()=>{Qs="_fs-ad-iframe-container",Js="data-fs-ancillary"});var Ga,$i,Va=f(()=>{kr();Ga=i=>i==null,$i=i=>{let e=document.getElementById(i);if(!e)return;let t=e.querySelector(`#${Qs}`);t&&t.remove(),e.querySelectorAll('div[id*="google_ads_iframe"]').forEach(s=>s.remove())}});var Yt=f(()=>{zf();Va()});var L=f(()=>{qf();Yt()});var Hf=pi(()=>{});var Zs=pi((Xs,$f)=>{(function(i,e){typeof Xs=="object"?$f.exports=Xs=e():typeof define=="function"&&define.amd?define([],e):i.CryptoJS=e()})(Xs,function(){var i=i||function(e,t){var r;if(typeof window!="undefined"&&window.crypto&&(r=window.crypto),typeof self!="undefined"&&self.crypto&&(r=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window!="undefined"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global!="undefined"&&global.crypto&&(r=global.crypto),!r&&typeof Bc=="function")try{r=Hf()}catch(_){}var s=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch(_){}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch(_){}}throw new Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function _(){}return function(y){var N;return _.prototype=y,N=new _,_.prototype=null,N}}(),o={},a=o.lib={},d=a.Base=function(){return{extend:function(_){var y=n(this);return _&&y.mixIn(_),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var _=this.extend();return _.init.apply(_,arguments),_},init:function(){},mixIn:function(_){for(var y in _)_.hasOwnProperty(y)&&(this[y]=_[y]);_.hasOwnProperty("toString")&&(this.toString=_.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=a.WordArray=d.extend({init:function(_,y){_=this.words=_||[],y!=t?this.sigBytes=y:this.sigBytes=_.length*4},toString:function(_){return(_||p).stringify(this)},concat:function(_){var y=this.words,N=_.words,x=this.sigBytes,q=_.sigBytes;if(this.clamp(),x%4)for(var M=0;M<q;M++){var Ae=N[M>>>2]>>>24-M%4*8&255;y[x+M>>>2]|=Ae<<24-(x+M)%4*8}else for(var le=0;le<q;le+=4)y[x+le>>>2]=N[le>>>2];return this.sigBytes+=q,this},clamp:function(){var _=this.words,y=this.sigBytes;_[y>>>2]&=4294967295<<32-y%4*8,_.length=e.ceil(y/4)},clone:function(){var _=d.clone.call(this);return _.words=this.words.slice(0),_},random:function(_){for(var y=[],N=0;N<_;N+=4)y.push(s());return new c.init(y,_)}}),u=o.enc={},p=u.Hex={stringify:function(_){for(var y=_.words,N=_.sigBytes,x=[],q=0;q<N;q++){var M=y[q>>>2]>>>24-q%4*8&255;x.push((M>>>4).toString(16)),x.push((M&15).toString(16))}return x.join("")},parse:function(_){for(var y=_.length,N=[],x=0;x<y;x+=2)N[x>>>3]|=parseInt(_.substr(x,2),16)<<24-x%8*4;return new c.init(N,y/2)}},m=u.Latin1={stringify:function(_){for(var y=_.words,N=_.sigBytes,x=[],q=0;q<N;q++){var M=y[q>>>2]>>>24-q%4*8&255;x.push(String.fromCharCode(M))}return x.join("")},parse:function(_){for(var y=_.length,N=[],x=0;x<y;x++)N[x>>>2]|=(_.charCodeAt(x)&255)<<24-x%4*8;return new c.init(N,y)}},g=u.Utf8={stringify:function(_){try{return decodeURIComponent(escape(m.stringify(_)))}catch(y){throw new Error("Malformed UTF-8 data")}},parse:function(_){return m.parse(unescape(encodeURIComponent(_)))}},h=a.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(_){typeof _=="string"&&(_=g.parse(_)),this._data.concat(_),this._nDataBytes+=_.sigBytes},_process:function(_){var y,N=this._data,x=N.words,q=N.sigBytes,M=this.blockSize,Ae=M*4,le=q/Ae;_?le=e.ceil(le):le=e.max((le|0)-this._minBufferSize,0);var Ce=le*M,Ye=e.min(Ce*4,q);if(Ce){for(var je=0;je<Ce;je+=M)this._doProcessBlock(x,je);y=x.splice(0,Ce),N.sigBytes-=Ye}return new c.init(y,Ye)},clone:function(){var _=d.clone.call(this);return _._data=this._data.clone(),_},_minBufferSize:0}),A=a.Hasher=h.extend({cfg:d.extend(),init:function(_){this.cfg=this.cfg.extend(_),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(_){return this._append(_),this._process(),this},finalize:function(_){_&&this._append(_);var y=this._doFinalize();return y},blockSize:512/32,_createHelper:function(_){return function(y,N){return new _.init(N).finalize(y)}},_createHmacHelper:function(_){return function(y,N){return new S.HMAC.init(_,N).finalize(y)}}}),S=o.algo={};return o}(Math);return i})});var qa=pi((en,Yf)=>{(function(i,e){typeof en=="object"?Yf.exports=en=e(Zs()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(en,function(i){return function(e){var t=i,r=t.lib,s=r.WordArray,n=r.Hasher,o=t.algo,a=[];(function(){for(var g=0;g<64;g++)a[g]=e.abs(e.sin(g+1))*4294967296|0})();var d=o.MD5=n.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,h){for(var A=0;A<16;A++){var S=h+A,_=g[S];g[S]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var y=this._hash.words,N=g[h+0],x=g[h+1],q=g[h+2],M=g[h+3],Ae=g[h+4],le=g[h+5],Ce=g[h+6],Ye=g[h+7],je=g[h+8],Mt=g[h+9],Bt=g[h+10],pt=g[h+11],wt=g[h+12],vt=g[h+13],Pi=g[h+14],Ni=g[h+15],R=y[0],T=y[1],v=y[2],C=y[3];R=c(R,T,v,C,N,7,a[0]),C=c(C,R,T,v,x,12,a[1]),v=c(v,C,R,T,q,17,a[2]),T=c(T,v,C,R,M,22,a[3]),R=c(R,T,v,C,Ae,7,a[4]),C=c(C,R,T,v,le,12,a[5]),v=c(v,C,R,T,Ce,17,a[6]),T=c(T,v,C,R,Ye,22,a[7]),R=c(R,T,v,C,je,7,a[8]),C=c(C,R,T,v,Mt,12,a[9]),v=c(v,C,R,T,Bt,17,a[10]),T=c(T,v,C,R,pt,22,a[11]),R=c(R,T,v,C,wt,7,a[12]),C=c(C,R,T,v,vt,12,a[13]),v=c(v,C,R,T,Pi,17,a[14]),T=c(T,v,C,R,Ni,22,a[15]),R=u(R,T,v,C,x,5,a[16]),C=u(C,R,T,v,Ce,9,a[17]),v=u(v,C,R,T,pt,14,a[18]),T=u(T,v,C,R,N,20,a[19]),R=u(R,T,v,C,le,5,a[20]),C=u(C,R,T,v,Bt,9,a[21]),v=u(v,C,R,T,Ni,14,a[22]),T=u(T,v,C,R,Ae,20,a[23]),R=u(R,T,v,C,Mt,5,a[24]),C=u(C,R,T,v,Pi,9,a[25]),v=u(v,C,R,T,M,14,a[26]),T=u(T,v,C,R,je,20,a[27]),R=u(R,T,v,C,vt,5,a[28]),C=u(C,R,T,v,q,9,a[29]),v=u(v,C,R,T,Ye,14,a[30]),T=u(T,v,C,R,wt,20,a[31]),R=p(R,T,v,C,le,4,a[32]),C=p(C,R,T,v,je,11,a[33]),v=p(v,C,R,T,pt,16,a[34]),T=p(T,v,C,R,Pi,23,a[35]),R=p(R,T,v,C,x,4,a[36]),C=p(C,R,T,v,Ae,11,a[37]),v=p(v,C,R,T,Ye,16,a[38]),T=p(T,v,C,R,Bt,23,a[39]),R=p(R,T,v,C,vt,4,a[40]),C=p(C,R,T,v,N,11,a[41]),v=p(v,C,R,T,M,16,a[42]),T=p(T,v,C,R,Ce,23,a[43]),R=p(R,T,v,C,Mt,4,a[44]),C=p(C,R,T,v,wt,11,a[45]),v=p(v,C,R,T,Ni,16,a[46]),T=p(T,v,C,R,q,23,a[47]),R=m(R,T,v,C,N,6,a[48]),C=m(C,R,T,v,Ye,10,a[49]),v=m(v,C,R,T,Pi,15,a[50]),T=m(T,v,C,R,le,21,a[51]),R=m(R,T,v,C,wt,6,a[52]),C=m(C,R,T,v,M,10,a[53]),v=m(v,C,R,T,Bt,15,a[54]),T=m(T,v,C,R,x,21,a[55]),R=m(R,T,v,C,je,6,a[56]),C=m(C,R,T,v,Ni,10,a[57]),v=m(v,C,R,T,Ce,15,a[58]),T=m(T,v,C,R,vt,21,a[59]),R=m(R,T,v,C,Ae,6,a[60]),C=m(C,R,T,v,pt,10,a[61]),v=m(v,C,R,T,q,15,a[62]),T=m(T,v,C,R,Mt,21,a[63]),y[0]=y[0]+R|0,y[1]=y[1]+T|0,y[2]=y[2]+v|0,y[3]=y[3]+C|0},_doFinalize:function(){var g=this._data,h=g.words,A=this._nDataBytes*8,S=g.sigBytes*8;h[S>>>5]|=128<<24-S%32;var _=e.floor(A/4294967296),y=A;h[(S+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,h[(S+64>>>9<<4)+14]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,g.sigBytes=(h.length+1)*4,this._process();for(var N=this._hash,x=N.words,q=0;q<4;q++){var M=x[q];x[q]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return N},clone:function(){var g=n.clone.call(this);return g._hash=this._hash.clone(),g}});function c(g,h,A,S,_,y,N){var x=g+(h&A|~h&S)+_+N;return(x<<y|x>>>32-y)+h}function u(g,h,A,S,_,y,N){var x=g+(h&S|A&~S)+_+N;return(x<<y|x>>>32-y)+h}function p(g,h,A,S,_,y,N){var x=g+(h^A^S)+_+N;return(x<<y|x>>>32-y)+h}function m(g,h,A,S,_,y,N){var x=g+(A^(h|~S))+_+N;return(x<<y|x>>>32-y)+h}t.MD5=n._createHelper(d),t.HmacMD5=n._createHmacHelper(d)}(Math),i.MD5})});var l,k=f(()=>{l={ANALYTICS:"Analytics",PERFORMANCE_LOGGER:"PerformanceLogger",DISPENSARY_DATA:"DispensaryData",LOGGER:"Logger",EVENT_BUS:"EventBus",CONFIG_MANAGER:"ConfigManager",FREESTAR:"freestar",WINDOW:"window",PAGE:"Page",SESSION_STORAGE_MANAGER:"SessionStorageManager",PREBID_MANAGER:"PrebidManager",AMAZON_MANAGER:"AmazonManager",GAM_MANAGER:"GamManager",DEVICE_INFO:"deviceInfo",GEO_INFO:"geoInfo",FS_DATA:"fsdata",BID_RESPONSE_ANALYTICS_EVENT_FACTORY:"BidResponseAnalyticsEventFactory",BID_WON_ANALYTICS_EVENT_FACTORY:"BidWonAnalyticsEventFactory",BID_REQUESTED_ANALYTICS_EVENT_FACTORY:"BidRequestedAnalyticsEventFactory",ANALYTICS_EVENT_FACTORY:"AnalyticsEventFactory",MAIN_QUEUE:"MainQueue",ERROR_QUEUE:"ErrorQueue",IMMEDIATE_QUEUE:"ImmediateQueue",BEACON_QUEUE:"BeaconQueue",ANALYTICS_MESSAGE_FACTORY:"AnalyticsMessageFactory",DATA_COLLECTOR_API:"DataCollectorAPI",IDENTITY_CONFIG:"IdentityConfig",HASHED_EMAIL_PROVIDERS:"HashedEmailProviderManager",REALTIME_PROVIDERS:"RealtimeProvidersManager",IDENTITY_MANAGER:"IdentityManager",ATS_MANAGER:"atsManager",VIDEO:"Video",FOP_VIDEO_SCRIPTS:"FopVideoScripts",AUCTION_MANAGER:"AuctionManager",NATIVE_RENDER_MANAGER:"nativeRenderManager",CONFIANT:"Confiant",IN_BANNER_VIDEO_PLAYER:"InBannerVideoPlayer",OUTSTREAM_VIDEO_PLAYER:"OutstreamVideoPlayer",INCONTENT_VIDEO_AD:"InContentVideoAd",FLOATING_VIDEO_AD:"FloatingVideoAd",INCONTENT_TO_FLOATING_VIDEO_AD:"InContentToFloatingVideoAd",AD_REFRESHER:"AdRefresher",REFRESH_LIBRARY:"RefreshLibrary",STICKY_FOOTER_REFRESHER:"StickyFooterRefresher",DEFAULT_REFRESHER:"DefaultRefresher",SUPERFLEX_REFRESHER:"SuperflexRefresher",DEVICE_ORIENTATION_TRACKER:"DeviceOrientationTracker",VIRTUAL_KEYBOARD_REFRESH_CONTROL:"VirtualKeyboardRefreshControl",RENDER_BID_MIDWAY:"RenderBidMidwayManager",GLOBAL_REFRESH_USER_IDS_STATE:"GlobalRefreshUserIDsState",REBID_MANAGER:"RebidManager",MEMORY_MONITOR:"MemoryMonitor",BIDS_MANAGER:"BidsManager",OPTABLE_MANAGER:"OptableManager",ANCILLARY:"Ancillary",BRANDING:"Branding",REPORT_AD:"ReportAd",IDEAL_AD_STACK_MANAGER:"IdealAdStackManager",IIQ_MANAGER:"IntentIqManager",CONNECTID_MANAGER:"ConnectIdManager"}});function jf({placementName:i,slotId:e}){!i||!e||(freestar.dynamicSlotLibrary||(freestar.dynamicSlotLibrary={}),freestar.dynamicSlotLibrary[e]=i)}function tn({slotId:i}){function e(){let t=Q({name:i});return t&&t.name?t.name:"unknown"}return i?freestar.dynamicSlotLibrary&&freestar.dynamicSlotLibrary[i]?freestar.dynamicSlotLibrary[i]:(freestar.dynamicSlotLibrary&&!freestar.dynamicSlotLibrary[i],e()):"unknown"}var za=f(()=>{z()});function Kf({placementName:i,path:e}){!i||!e||(window.freestar.dynamicPathLibrary||(freestar.dynamicPathLibrary=[]),window.freestar.dynamicPathLibrary.push({placementName:i,path:e}))}function rn({path:i}){return i?window.freestar.dynamicPathLibrary.find(e=>e.path===i):"unknown"}var Ha=f(()=>{});function jt({placementName:i,slotId:e,path:t}){e&&jf({placementName:i,slotId:e}),t&&Kf({placementName:i,path:t})}function ne({slotId:i=null,path:e=null}){return i?tn({slotId:i}):e?rn({path:e}):!1}var Wf=f(()=>{za();Ha()});var Te=f(()=>{Wf();za();Ha()});var Ct,Qf,sn,Ty,$a,nn=f(()=>{re();z();Te();L();k();Ct=[],Qf=function(i){let{lineItemId:e}=i,t=Ct.findIndex(r=>r.lineItemId===e);e&&t&&t<0?Ct.push({lineItemId:e,demandSourceType:null,slots:[i.slot.getSlotElementId()]}):t!="undefined"&&typeof Ct[t]!="undefined"&&(Ct[t].slots.find(s=>s===i.slot.getSlotElementId())||Ct[t].slots.push(i.slot.getSlotElementId()))},sn=function(){return O(this,null,function*(){let i=Ct.filter(t=>t.demandSourceType===null),e=t=>{for(let r in t.demandSources){let s=Ct.findIndex(n=>n.lineItemId===Number(r));Ct[s].demandSourceType=t.demandSources[r]}};if(i.length>0){let r=yield(yield fetch(`${freestar.msg.dispensaryURL}/demand-source`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lineItems:i.map(s=>s.lineItemId)}),credentials:"include"})).json();r.demandSources&&e(r),Ty(),freestar.superflex&&freestar.superflex.checkLineItems&&freestar.superflex.checkLineItems({needed:i})}})},Ty=function(){D.instance.resolve(l.AD_REFRESHER).then(i=>{Ct.forEach(e=>{(e.demandSourceType==="DIRECT"||e.demandSourceType==="TRAFFICKED")&&e.slots.forEach(t=>{i.setDirectAdRefresh(t)})})})},$a=({bidder:i,adUnitCode:e,testData:t},r)=>{t&&(freestar=t.freestar);let s=a(e),n=Ss(s)?s:void 0;function o(){let d=Q({name:ne({slotId:e})});return!d&&freestar.dynamicSlotLibrary[e]&&fsdata.placements[freestar.dynamicSlotLibrary[e]]&&(d=freestar.fsdata.placements[freestar.dynamicSlotLibrary[e]]),d}function a(){let d=o(e);return d&&d.outOfPage==!0?-1:d&&d.adRefreshRate&&d.adRefreshRate>0?d.adRefreshRate:freestar.fsdata.adRefreshRate&&freestar.fsdata.adRefreshRate>0?freestar.fsdata.adRefreshRate:0}return s&&n&&r&&n>0&&r.time>n&&(freestar.refreshLibrary[e]||(freestar.refreshLibrary[e]={}),freestar.refreshLibrary[e].refreshTime=r.time,n=r.time,freestar.log(10,`Set Refresh Rate: ${i} won. Changing refresh rate to ${r.time} due to ${r.rule}`)),n}});function Ne(i){let{name:e,detail:t}=i,r=new CustomEvent(e,{detail:t});window.dispatchEvent(r)}var bi=f(()=>{});function Jf({id:i,placement:e}){freestar.gamMap[i]||(freestar.gamMap[i]=e.dfpId.indexOf("/15184186/")>-1)}function Xf({cpm:i}){let e=i<=10?20:2;return(Math.round(i*e)/e).toFixed(2)}function Yi({freestar:i}){if(i!=null&&i.prebidAdserverTargetingKeys)return i.prebidAdserverTargetingKeys;let e={},t=["bidder","adid","pb","size","format","auction_id","source"],r=i.fsdata.useFsAdserverTargetingKeys||U("use-fs-adserver-targeting-keys")?"fs_":"hb_";return t.forEach(s=>{e[s]=`${r}${s}`}),i.prebidAdserverTargetingKeys=e,e}var Mr=f(()=>{Ke()});var Zf,Qe,eu,tu,iu,It=f(()=>{Zf="customEvent",Qe={IMMEDIATE:"immediate",MAIN:"main",BEACON:"beacon",ERROR:"error"},eu=["fsrefresh","fsrebid","fs_uuid","floors_id","floors_hour","fs_placementName","fs_ad_product","fs_clientservermask","amznbid","amznp","fs-auuid","fsbid","fsitf","fs_session_id","fs_pageview_id","fs_version","user-agent","floors_user","floors_rtt","fs_testgroup","fs_carousel"],tu=["fsrefresh","fsitf"],iu=["fs_clientservermask","fs_testgroup","floors_rtt","fsrefresh","floors_hour","floors_id","fsrebid"]});var $,ye=f(()=>{It();$=class{constructor(e,t){E(this,"type","default");this._payload=this._buildPayload(e),this._topic=t}get payload(){return this._payload}get topic(){return this._topic||Qe.MAIN}setTopic(e){this._topic=e}setType(e){this.type=e}_buildPayload(e){return e||{}}}});var Y,on,Br=f(()=>{It();ye();Y=class extends ${constructor(){super(...arguments);E(this,"type",Zf)}_buildPayload(t){let{eventType:r,data:s,eventName:n}=t;return{eventType:r,eventName:n,jsonValue:JSON.stringify(s)}}},on=class extends ${constructor(){super(...arguments);E(this,"type","contentRecommendationPartnerImpression")}get payload(){let{partnerName:t,placementName:r,contextId:s}=this._payload;return{eventType:"contentRecommendationPartnerImpression",partnerName:t,placementName:r,contextId:s}}}});function ru(){if(typeof window.freestar.fsdata!="object")throw new Error("The fsdata object is not properly defined, exiting...");if(window.freestar.fsdata.onlyAllowedDomains&&window.freestar.fsdata.allowedDomains&&window.freestar.fsdata.allowedDomains.length&&!Ry({domains:window.freestar.fsdata.allowedDomains}))throw new Error("The current domain is not in the allowed domains list, exiting...");if(window.freestar.fsdata.urlBlocklist&&window.freestar.fsdata.urlBlocklist.length&&Cy(window.freestar.fsdata.urlBlocklist))throw new Error("The current domain is in the blocked url list, exiting...")}function Ry({domains:i}){let e=i.length===0;return i.forEach(t=>{t.indexOf("*.")===0&&(t=t.slice(2)),e||(e=top.location.host.indexOf(t)!==-1)}),!(!e&&fsdata.onlyAllowedDomains)}function Cy(i){let e=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/,t=u=>{try{return new URL(u),!0}catch(p){return!1}},r=u=>{let p=u.split("/");return e.test(p[0])},{href:s,pathname:n,host:o,search:a}=top.location,d=(u,p)=>u.includes("/*")?s.includes(u.replace("/*","")):p,c=u=>u[u.length-1]==="/"?u.substring(0,u.length-1):u;return i.find(u=>t(u)?d(u,c(s)===c(u)):r(u)?d(u,c(o+n+a)===c(u)):n.includes(u))}function b({type:i="div",classList:e=[],id:t=!1,src:r=!1,name:s=!1,attributes:n=[],children:o=[],style:a={},innerHTML:d,textContent:c},u=document){let p=u.createElement(i);return e.length&&(p.className=e.join(" ")),r&&(p.src=r),t&&(p.id=t),s&&p.setAttribute("name",s),Array.isArray(n)?n.forEach(m=>{Object.entries(m).forEach(([g,h])=>{p.setAttribute(g,h)})}):Object.entries(n).forEach(([m,g])=>{p.setAttribute(m,g)}),Object.keys(a).length&&Ya(p,a),d&&(p.innerHTML=d),c&&(p.textContent=c),o.length&&o.forEach(m=>{m&&p.appendChild(m)}),p}function se(i,e,t=null,r,s=!0,n=!0,o){try{let a=b({type:"script"});i&&(a.src=i),n&&a.setAttribute("data-owner","freestar"),r&&(a.textContent=r),t&&(a.id=t),s&&(a.async=s),a.type="text/javascript",e&&a.addEventListener("load",e,{once:!0}),o&&a.addEventListener("error",o),document.getElementsByTagName("head")[0].appendChild(a)}catch(a){}}function su(){if(window.freestar.config.disabledProducts)for(let i in window.freestar.config.disabledProducts)Object.prototype.hasOwnProperty.call(window.freestar.config.disabledProducts,i)&&(window.freestar.config.products[i]===void 0?console.error(`Freestar product name: ${i} does not exist.`):window.freestar.config.products[i].disabled=window.freestar.config.disabledProducts[i])}var Ya,Ai,ie=f(()=>{Br();Ya=(i,e)=>(i&&Object.entries(e).forEach(([t,r])=>{i.style[t]=r}),i);Ai=(i,e=null,t)=>new Promise((r,s)=>{se(i,r,e,t,!0,!0,s)})});function nu({slotArray:i}){window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.queue.push({adSlots:i,dataHandler:function(){window.__iasPET.setTargetingForGPT()}})}function Oy(){let i=[];at().forEach(e=>i.push(new an(e))),i.length&&nu({slotArray:i})}function ou({slot:i=null}){typeof window.__iasPET!="undefined"&&(freestar.log(1,"Publisher SlotOperations IAS: iasPETTargeting found"),i?nu({slotArray:[new an(i)]}):Oy())}function au(){freestar.log(1,"Publisher SlotOperations Testing IAS: loading script"),se("//cdn.adsafeprotected.com/iasPET.1.js"),window.__iasPET=window.__iasPET||{};let i=window.__iasPET;i.queue=i.queue||[],i.pubId="10249"}var an,du=f(()=>{ie();Ge();an=class{constructor(e){this.adSlotId=e.getSlotElementId(),this.size=e.getSizes().map(t=>t==="fluid"?[1,1]:[t.getWidth(),t.getHeight()]),this.adUnitPath=e.getAdUnitPath()}}});function lu({slot:i=null}){window.moatPrebidApi&&(typeof window.moatPrebidApi.slotDataAvailable=="function"&&window.moatPrebidApi.slotDataAvailable()||typeof window.moatPrebidApi.pageDataAvailable=="function"&&window.moatPrebidApi.pageDataAvailable())&&(freestar.log(1,"Publisher SlotOperations Moat: moatSlotTargetingReady"),i?window.top.moatPrebidApi.setMoatTargetingForSlot(i):window.moatPrebidApi.setMoatTargetingForAllSlots())}function ja(i){i=i||0,i++,window.moatPrebidApi&&typeof window.moatPrebidApi.enableLogging=="function"?(freestar.log(1,"Publisher SlotOperations Testing Moat: Logging Enabled"),window.moatPrebidApi.enableLogging()):i<10&&(freestar.log(1,"Publisher SlotOperations Testing Moat: Not set in global try again."),setTimeout(function(){ja(i)},200))}var cu=f(()=>{});function fu({slot:i=null}){ou({slot:i}),lu({slot:i})}function uu(){switch(U("publisher-slot-op")){case"ias":freestar.log(1,"Publisher SlotOperations Testing IAS"),au();break;case"moat":freestar.log(1,"Publisher SlotOperations Testing MOAT"),ja();break;default:freestar.log(1,"No Publisher SlotOperations Testing Params");break}}var Ka=f(()=>{du();cu();Fe()});var Wa,Qa,ce,dt=f(()=>{Te();z();nt();Ge();Wa=class{constructor({placement:e=null,prebid:t=null,slot:r=null}){this.placement=e,this.prebid=t,this.slot=r,this.trackedAdIds=new Set,this.states=[],this.renderMap=new Map}update({prebid:e=null,slot:t=null}){e&&(this.prebid=e),t&&(this.slot=t)}getKVPs(){if(!this.slot)return null;let e=this.slot.getTargetingMap(),t=Object.entries(e).flatMap(([s,n])=>n.map(o=>[s,o])),r=googletag.pubads().getTargetingKeys().flatMap(s=>googletag.pubads().getTargeting(s).map(o=>[s,o]));return[...t,...r]}getWinningBid(){return null}setAUUID({fsAuctionId:e}){var t,r;(r=(t=this.slot)==null?void 0:t.setTargeting)==null||r.call(t,"fs-auuid",e)}getStateByFsAuctionId({fsAuctionId:e}){return this.states.find(t=>t.fsAuctionId===e)||!1}saveState({fsAuctionId:e,auctionType:t,prebidAuctionId:r=null,rebid:s}){this.setAUUID({fsAuctionId:e}),this.states.push({fsAuctionId:e,prebidAuctionId:r,auctionType:t,rebid:s})}isDisplayAd(){return!["stickyFooter","sideWall","pushdown","revolvingRail","stickyRail"].some(t=>We({placement:this.placement,type:`${t}Options`}))}getSlotId(){var e,t,r;return((e=this.prebid)==null?void 0:e.code)||((t=this.slot)==null?void 0:t.getSlotElementId())||((r=this.placement)==null?void 0:r.name)}},Qa=class{constructor(){this.adUnits=new Map}add({placement:e=null,prebid:t=null,slot:r=null}){let s=(r==null?void 0:r.getSlotElementId())||(t==null?void 0:t.code);if(s){if(this.adUnits.has(s))this.adUnits.get(s).update({prebid:t,slot:r});else if(e||(e=t?Q({name:tn({slotId:t.code})}):r?Q({name:rn({path:r.getAdUnitPath()}).placementName}):null),e){r=r!=null?r:De({elementId:s});let n=new Wa({placement:e,prebid:t,slot:r});this.adUnits.set(s,n)}}}getAdUnitByPlacementName(e){return[...this.adUnits.values()].find(t=>{var r;return((r=t.placement)==null?void 0:r.name)===e})||!1}getAdUnitByPrebidCode(e){return this.adUnits.get(e)||!1}getAdUnitBySlotElementId(e){return Array.from(this.adUnits.values()).find(t=>t.slot&&t.slot.getSlotElementId()===e)||!1}getAdUnitBySlotAdUnitPath(e){return[...this.adUnits.values()].find(t=>{var r;return((r=t.slot)==null?void 0:r.getAdUnitPath())===e})||!1}},ce=new Qa;window.freestar&&window.freestar.queue&&window.freestar.queue.push(()=>{window.freestar.adUnitManager=ce})});var Le=f(()=>{wi()});var xy,dn,Ja=f(()=>{Te();z();L();k();Le();xy={},dn=({element:i,placement:e})=>{jt({placementName:e.name,slotId:i.id});let{lazyLoadViewportHeight:t}=e.selectedSize,r=xy[t];r||(r=new IntersectionObserver((s,n)=>{s.forEach(o=>{if(pu(o)){let a=ne({slotId:o.target.id});a&&(freestar.newAdSlots([{placementName:a,slotId:o.target.id,source:"lazyAd"}]),D.instance.resolve(l.EVENT_BUS).then(d=>{d.emit(ln,{elementId:o.target.id})}),n.unobserve(o.target))}})},{root:null,rootMargin:`${t}% 0px ${t}% 0px`})),r.observe(i)}});var Fr,Xa=f(()=>{Fr={videoAdhesion:{prettyName:"Sticky Footer Video Adhesion",disabled:!1},stickyFooter:{prettyName:"Sticky Footer",disabled:!1,refreshDisabled:!1,refreshInterval:0},video:{prettyName:"Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},standAloneVideo:{prettyName:"Stand Alone Video",disabled:!1,refreshDisabled:!1,refreshInterval:0},revolvingRail:{prettyName:"Revolving Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0},pushdown:{prettyName:"Pushdown",disabled:!1,refreshDisabled:!1,refreshInterval:0},dynamicAds:{prettyName:"Dynamic Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptions"},dynamicAdsV2:{prettyName:"Dynamic Ads V2",disabled:!1,refreshDisabled:!1,refreshInterval:0,optionsPath:"dynamicAdOptionsV2"},footerBidding:{prettyName:"Footer Bidding",disabled:!1,refreshDisabled:!1,refreshInterval:0},superflex:{prettyName:"Superflex",disabled:!1,refreshDisabled:!1,refreshInterval:0},slidingUnit:{prettyName:"Sliding Unit",disabled:!1,refreshDisabled:!1,refreshInterval:0},sideWall:{prettyName:"Sidewall",disabled:!1,refreshDisabled:!1,refreshInterval:0},pageGrabber:{prettyName:"Page Grabber",disabled:!1,refreshDisabled:!1,refreshInterval:0},interstitial:{prettyName:"Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},googleInterstitial:{prettyName:"Google Interstitial",disabled:!1,refreshDisabled:!1,refreshInterval:0},dianomiContentRec:{prettyName:"Dianomi Content Recommendation",disabled:!1,refreshDisabled:!1,refreshInterval:0},lazyLoad:{prettyName:"Lazy Loaded Ads",disabled:!1,refreshDisabled:!1,refreshInterval:0},iai:{prettyName:"Intelligent Ad Insert",disabled:!1,refreshDisabled:!1,refreshInterval:0},stickyRail:{prettyName:"Sticky Rail",disabled:!1,refreshDisabled:!1,refreshInterval:0}}});var Py,he,lt=f(()=>{Xa();Py=function({name:i}){return window.freestar.config.products[i]&&window.freestar.config.products[i].disabled?(window.freestar.log(1,`${Fr[i].prettyName} Disabled via freestar.config.products.${i}.disabled`),!0):!1},he=Py});function cn(i){var t;let e=(t=i.selectedSize)==null?void 0:t.elementTargetedConfig;return e&&e.active?B(w({},e),{source:"viewport"}):{active:!1}}var Za=f(()=>{});var ed,Aw,mu=f(()=>{ed="carousel",Aw=`fs.${ed}`});var hu,gu=f(()=>{mu();me();Fe();hu=()=>{let i=JSON.parse(V({key:`fs.${ed}`}))||{};return(i==null?void 0:i.inTest)&&(i==null?void 0:i.control)}});var oe,vi=f(()=>{oe={pubfigEngineLoadInit:"pubfig-engine-load-init",pubfigEngineSetupStart:"pubfig-engine-setup-start",pubfigEngineLoad:"pubfig-engine-load",pubfigSlotRequested:"pubfig-slotRequested",pubfigStickyFooterSlotRequested:"pubfig-sticky-footer-slotRequested",pubfigSlotRenderEnded:"pubfig-slotRenderEnded",pubfigEngineSetupEnd:"pubfig-engine-setup-end",pubfigStickyFooterSlotRenderEnded:"pubfig-sticky-footer-slotRenderEnded",pubfigPrebidFsRequestBids:"pubfig-prebid-fsRequestBids",pubfigPrebidAuctionInit:"pubfig-prebid-auctionInit",pubfigPrebidAuctionEnd:"pubfig-prebid-auctionEnd",pubfigLoaded:"pubfig-loaded",pubfigInitRequestStart:"pubfig-init-request-start",pubfigInitRequestEnd:"pubfig-init-request-end"}});function Kt({adUnits:i}){Array.isArray(i)||(i=[i]);let e=i.filter(r=>r&&r.bids!=null&&r.bids.length>0),t=i.filter(r=>!r||r.bids==null||r.bids.length===0);if(t.length>0){let r=t.map(s=>s&&s.code).join(", ");freestar.log(20,`Not adding adUnits ${r} which have no bidders configured.`)}freestar.log(20,`Adding ${e.length} adUnits to fsprebid.`),fsprebid.que.push(function(){fsprebid.addAdUnits(e)}),e.forEach(r=>{ce.add({prebid:r})})}function _u(){fsprebid.que.push(function(){fsprebid.onEvent(yt,function(i){freestar.performanceLogger.logMark({markerName:oe.pubfigPrebidAuctionEnd,compareTo:[oe.pubfigPrebidAuctionInit]}),D.instance.resolve(l.BIDS_MANAGER).then(e=>{e.handleNoBids({auctionData:i})})})})}function Eu(i=new gt){var m,g;let{placements:e,networks:t}=window.freestar.fsdata,{bidderOverrides:r=[],type:s=rt}=((g=(m=window.freestar)==null?void 0:m.fsdata)==null?void 0:g.schain)||{},n=h=>h.slug,o=(h,A,S)=>S.indexOf(h)===A&&!Hc.includes(h),a=()=>e.filter(h=>h.networks.length).map(({networks:h})=>h.map(n)),d=t.map(n).concat(a()).flat();i.hasValidStoredRequests()&&d.push(i.getSlug());let c=r&&r.length;c&&s===mi?d=d.filter(h=>!r.includes(h)):c&&s===rt&&(d=d.filter(h=>r.includes(h)));let u=d.filter(o),p=[];return Object.entries(j().getConfig().clientServer).forEach(([h,A])=>{u.includes(h)&&A==="both"&&p.push(Ns(h))}),u.concat(p)}function td(i){return i.sizes.forEach(e=>{Object.keys(e.params).forEach(t=>!e.params[t]&&delete e.params[t])})}var ji=f(()=>{J();vi();Dr();Ve();dt();Be();xe();L();k()});var _e,yu,Iu,Su,fn=f(()=>{J();_e={NO_BRANDING:"NO_BRANDING",GREEN:"GREEN",GRAYSCALE:"GRAYSCALE",GREEN_FOOTER_ONLY:"GREEN_FOOTER_ONLY",GRAYSCALE_FOOTER_ONLY:"GRAYSCALE_FOOTER_ONLY"},yu=`${Tt}/imgs/fslogo-green.svg`,Iu=`${Tt}/imgs/fslogo-grayscale.svg`,Su={[_e.GREEN]:yu,[_e.GRAYSCALE]:Iu,[_e.GREEN_FOOTER_ONLY]:yu,[_e.GRAYSCALE_FOOTER_ONLY]:Iu}});var Ur,id=f(()=>{fn();Ur=i=>!i||i===_e.NO_BRANDING?null:Su[i]});var Ny,Dy,Ly,ky,un,bu=f(()=>{L();k();xe();Le();fn();id();ie();Ny=700,Dy=60,Ly=`Invalid branding value. Expected one of: ${Object.values(_e).join(", ")}`,ky="Missing mandatory parameter: slotId",un=class{constructor({background:e="linear-gradient(to bottom, #00c389 10%, black 100%)",height:t="175vh",branding:r="GREEN",showPoweredBy:s=!0,slotId:n,styleVersion:o="parallax"}){E(this,"_elementToggle",(e=!0)=>{if(this.flyingCarpetElement)if(e){let t=this.styleVersion==="new"?"flex":"block";this.flyingCarpetElement.style.setProperty("display",t),this.flyingCarpetElement.style.setProperty("visibility","visible")}else this.flyingCarpetElement.style.setProperty("visibility","hidden")});if(!n)throw new Error(ky);this.background=e,this.height=t,this.branding=r,this.showPoweredBy=s,this.slotId=n,this.styleVersion=o,this.flyingCarpetElement=null,this._bindEvents()}_bindEvents(){D.instance.resolve(l.GAM_MANAGER).then(e=>O(this,null,function*(){yield e.ready,e.instance.pubads().addEventListener(we,({isEmpty:t,slot:r})=>{r.getSlotElementId()===this.slotId&&this.flyingCarpetElement&&(t?this._elementToggle(!1):this._elementToggle(!0))})})),D.instance.resolve(l.EVENT_BUS).then(e=>{e.subscribe(Ki,({payload:{elementId:t}})=>{t===this.slotId&&this.flyingCarpetElement&&this._elementToggle(!0)})})}_createLogo(){let e=Ur(this.branding);return b({type:"img",attributes:{src:e,alt:"fs-logo",width:30}})}generateHTML(){let e={original:this._generateOriginalStyleHTML.bind(this),new:this._generateStyleV2HTML.bind(this),parallax:this._generateParallaxStyle.bind(this)};if(!e[this.styleVersion])throw new Error(`Unsupported fc style version: ${this.styleVersion}`);return e[this.styleVersion]()}_generateOriginalStyleHTML(){if(![_e.GREEN,_e.GRAYSCALE,_e.NO_BRANDING].includes(this.branding))throw new Error(Ly);let e=b({classList:["fs-flying-carpet"],style:{background:this.background,height:this.height}}),t=b({classList:["fs-flying-carpet-ad-container"]});if(e.appendChild(t),this.showPoweredBy&&this.branding!==_e.NO_BRANDING){let n=b({classList:["fs-powered-by"]});n.appendChild(this._createLogo()),e.appendChild(n)}let r=b({classList:["fs-flying-carpet-header"]});r.textContent="Advertisement",e.appendChild(r);let s=b({id:this.slotId});return t.appendChild(s),e}_generateStyleV2HTML(){let e=b({classList:["fs-flying-carpet-v2"]}),t=b({classList:["fs-flying-carpet-v2-text-border"]});t.textContent="ADVERTISEMENT",e.appendChild(t);let r=b({classList:["fs-flying-carpet-v2-ad-container"]});e.appendChild(r);let s=b({id:this.slotId});r.appendChild(s);let n=b({classList:["fs-flying-carpet-v2-text-border"]});return n.textContent="SCROLL TO CONTINUE READING",e.appendChild(n),e}_generateParallaxStyle(){let e=b({classList:["fs-flying-carpet-v3"]}),t=b({classList:["fs-flying-carpet-v3-text-border"]});t.textContent="ADVERTISEMENT",e.appendChild(t);let r=b({classList:["fs-flying-carpet-v3-container"]}),s=b({classList:["fs-flying-carpet-v3-content"]}),n=b({classList:["fs-flying-carpet-v3-slot-wrapper"]}),o=b({id:this.slotId,classList:["fs-flying-carpet-v3-slot"]});n.appendChild(o),s.appendChild(n),r.appendChild(s),e.appendChild(r);let a=b({classList:["fs-flying-carpet-v3-text-border"]});return a.textContent="SCROLL TO CONTINUE READING",e.appendChild(a),this._setupFlyingCarpetEffect(r,o),e}_setupFlyingCarpetEffect(e,t){let r=window.innerHeight<=Ny,s=()=>{let n=e.getBoundingClientRect(),o=window.innerHeight,a=o/2;if(n.top<o&&n.bottom>0){let d=Math.min(Math.max((o-n.top)/o,0),1),c=r?o*.4:o*.1,u=n.top>a?c*(.5-d):c*(d-.5);r&&(u-=Dy);let p=`translate(-50%, calc(-50% + ${u}px))`;t.style.transform=p,t.style.webkitTransform=p}};window.addEventListener("scroll",()=>{requestAnimationFrame(s)})}}});var pn,Wi,rd=f(()=>{Yt();ye();pn=class pn extends ${constructor(){super(...arguments);E(this,"type","auctionStart")}_buildPayload(t){return ve(t,pn.payloadProperties)}};E(pn,"payloadProperties",["placementId","DfpId","fsAuctionId","auctionId","auctionType","location","userIds","kvps"]);Wi=pn});var hn,mn,Au=f(()=>{Yt();ye();rd();hn=class hn extends ${constructor(){super(...arguments);E(this,"type","auctionEnd")}_buildPayload(t){return ve(t,hn.payloadProperties)}};E(hn,"payloadProperties",[...Wi.payloadProperties,"fsAuctionId","winningBid","advertiserId","campaignId","isEmpty","lineItemId","serviceName","size","sourceAgnosticCreativeId","sourceAgnosticLineItemId","isNativeRender","isGamBypass","isS2SDisabled","unfilled"]);mn=hn});var _n,gn,wu=f(()=>{L();ye();_n=class _n extends ${constructor(){super(...arguments);E(this,"type","browserInformation")}_buildPayload(t){return ve(t,_n.payloadProperties)}};E(_n,"payloadProperties",["canonical","fpc","hitTime","loadTime","winHeight","winWidth","maxHeight","isServerToServer","googleVersion"]);gn=_n});var Qi,sd=f(()=>{ye();Qi=class{create(){return new $}}});var Wt,En=f(()=>{sd();Wt=class extends Qi{constructor({win:e,freestar:t,dispensaryData:r,rebidManager:s}){super(),this._win=e,this._freestar=t,this._dispensaryData=r,this._rebidManager=s,this._googletag=this._win.googletag}_getCpm(e){let{cpm:t=0}=e;return{cpm:Math.trunc(t*1e4),bidCpm:t,originalCpm:t}}_getAuctionTimeout(){let{fsdata:e}=this._dispensaryData;return this._freestar.deviceInfo.device.type=="desktop"?e.timeout:e.mobileTimeout}}});function vu({prebid:i,placementId:e}){var n,o;if(!e)return 0;let t=(n=i==null?void 0:i.getBidResponsesForAdUnitCode)==null?void 0:n.call(i,e);if(!((o=t==null?void 0:t.bids)!=null&&o.length))return 0;let r=t.bids.sort((a,d)=>d.cpm-a.cpm),[s]=r;return Number(s.cpm)}function Ji({bid:i,placementId:e,rebidManager:t,fsAuctionId:r,auctionManager:s}){let n={isRebid:!1,rebidType:"NONE",rebidAttempt:0};try{let{adUnitCode:o,slotId:a}=i||{},d=e||o||a;if(t){let c=t.getStatus({adUnitCode:d});if(c)return n.isRebid=c.count>0,n.rebidType=c.type||"NONE",n.rebidAttempt=c.count,n}if(r){let c=s.getAuctionByFsAuctionId(r);if(c){let u=Array.from(c.adUnits).find(p=>{var m,g;return p.placement.name===d||((m=p.prebid)==null?void 0:m.code)===d||((g=p.slot)==null?void 0:g.getSlotElementId())===d});if(u){let p=u.getStateByFsAuctionId({fsAuctionId:r});p&&p.rebid&&(n.isRebid=p.rebid.count>0,n.rebidType=p.rebid.type||"NONE",n.rebidAttempt=p.rebid.count)}}}}catch(o){console.error("Error in getRebid function:",o),console.error("Context:",{bid:i,placementId:e,fsAuctionId:r})}return n}function yn({adUnitCode:i,dynamicSlotLibrary:e}){return(e==null?void 0:e[i])||i}function Xi({slotId:i,slot:e,googletag:t}){if(!i&&!e)return;let r=t.pubads().getSlots().find(n=>[i,e].includes(n.getSlotElementId()));return r?r.getTargeting("fs_uuid").toString():void 0}var In=f(()=>{});var Sn,nd,od,Tu=f(()=>{Yt();L();k();ye();En();In();It();dt();Sn=class Sn extends ${constructor(){super(...arguments);E(this,"type","bidResponse")}_buildPayload(t){return ve(t,Sn.payloadProperties)}};E(Sn,"payloadProperties",["bidderCode","width","height","statusMessage","adId","cpm","bidCpm","creativeId","pubapiId","currencyCode","requestId","responseTimestamp","requestTimestamp","bidder","adUnitCode","timeToRespond","adjustment","ttl","format","placementId","source","auctionTimeout","fsRebidCount","auctionId","fsuuid","bidderResponseCode","fsAuctionId","bidCpm","kvps"]);nd=Sn,od=class extends Wt{constructor({win:e,freestar:t,dispensaryData:r,auctionManager:s,rebidManager:n}){super({win:e,freestar:t,dispensaryData:r}),this._auctionManager=s,this._dispensaryData=r,this._rebidManager=n,this._adUnitManager=ce}create(e){var u;let{mediaType:t,currency:r,auctionId:s}=e,n=this._auctionManager.getAuctionByPrebidAuctionId(s),o=n?n.fsAuctionId:null,a=yn({adUnitCode:e.adUnitCode,dynamicSlotLibrary:this._freestar.dynamicSlotLibrary}),{rebidAttempt:d}=Ji({bid:e,placementId:a,rebidManager:this._rebidManager,auctionManager:this._auctionManager}),c=this._adUnitManager.getAdUnitByPrebidCode(e.adUnitCode)||this._adUnitManager.getAdUnitBySlotElementId(a);return new nd(B(w(w({},e),this._getCpm(e)),{fsRebidCount:d,currencyCode:r,fsuuid:Xi({slotId:e.slotId,slot:e.slot,googletag:this._win.googletag}),placementId:a,fsAuctionId:o,auctionTimeout:this._getAuctionTimeout(),format:t.length?t:"unknown",kvps:(u=c==null?void 0:c.getKVPs())==null?void 0:u.filter(([p])=>iu.includes(p))}))}};I.class(od,{token:"BidResponseAnalyticsEventFactory",defaultAlias:"bidResponseAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.DISPENSARY_DATA,l.AUCTION_MANAGER,l.REBID_MANAGER]})});var bn,ad,dd,Ru=f(()=>{L();k();St();Ve();Te();z();It();ye();En();In();J();Be();dt();bn=class bn extends ${constructor(){super(...arguments);E(this,"type","bidWon")}_buildPayload(t){return ve(t,bn.payloadProperties)}};E(bn,"payloadProperties",["bidderCode","width","height","statusMessage","adId","creativeId","cpm","rawCpm","bidCpm","adUrl","requestId","responseTimestamp","requestTimestamp","bidder","adUnitCode","timeToRespond","pbLg","pbMg","pbHg","pbAg","pbDg","pbCg","size","alwaysUseBid","bidderRefresh","isRebid","format","placementId","source","rebidType","prebidAuctionStrategy","dropped","fsRebidCount","dealId","adomain","networkCode","impressionId","countryCode","fsAdProduct","auctionId","originalCpm","fsuuid","cdep","isGamBypass","isS2SDisabled","isNativeRender","fsAuctionId","auctionTimeout","paymentRelationship","kvps"]);ad=bn,dd=class extends Wt{constructor({win:e,freestar:t,dispensaryData:r,auctionManager:s,rebidManager:n}){super({win:e,freestar:t,dispensaryData:r}),this._auctionManager=s,this._dispensaryData=r,this._rebidManager=n,this._adUnitManager=ce}create(e){var A;let{mediaType:t,currency:r,adUnitCode:s,auctionId:n}=e,o=this._auctionManager.getAuctionByPrebidAuctionId(n),a=o?o.fsAuctionId:null,d=e.creative_id||e.creativeId,c=yn({adUnitCode:e.adUnitCode,dynamicSlotLibrary:this._freestar.dynamicSlotLibrary}),u=this._adUnitManager.getAdUnitByPrebidCode(s)||this._adUnitManager.getAdUnitBySlotElementId(c),{isRebid:p,rebidType:m,rebidAttempt:g}=Ji({bid:e,placementId:c,rebidManager:this._rebidManager,fsAuctionId:a,auctionManager:this._auctionManager}),h=Q({name:ne({slotId:s})});return new ad(B(w(w(w({},e),this._getMeta(e)),this._getCpm(e)),{isRebid:p,rebidType:m,fsRebidCount:g,isGamBypass:this._getIsGamBypass(),currencyCode:r,fsuuid:Xi({slotId:e.slotId,slot:e.slot,googletag:this._win.googletag}),placementId:c,auctionTimeout:this._getAuctionTimeout(),format:t.length?t:"unknown",fsAdProduct:qe(h),networkCode:Number(h.dfpId.split("/")[1]),impressionId:ue(),isS2SDisabled:j().isS2SDisabled(),adomain:this._getAdomain(e),creativeId:d&&String(d),cdep:this._dispensaryData.cdep||"",fsAuctionId:a,auctionId:n,paymentRelationship:this._getPaymentRelationship(e),kvps:(A=u==null?void 0:u.getKVPs())==null?void 0:A.filter(([S])=>tu.includes(S))}),Qe.IMMEDIATE)}_getIsGamBypass(){return!j().isGAMEnabled()}_getMeta(e){let{meta:t={}}=e;return Object.entries(t).reduce((r,[s,n])=>(r[s]=Array.isArray(n)?n.join(","):n,r),{})}_getAdomain(e){let{meta:t={},advertiserDomains:r}=e,s=r||(t==null?void 0:t.advertiserDomains)||[];return Array.isArray(s)?s.join(","):s}_getPaymentRelationship(e){var s,n,o,a,d,c;let t=(o=(n=(s=window.freestar)==null?void 0:s.fsdata)==null?void 0:n.schain)==null?void 0:o.type,r=(c=(d=(a=window.freestar)==null?void 0:a.fsdata)==null?void 0:d.schain)==null?void 0:c.bidderOverrides;if(r&&r.length){if(t===mi&&r.includes(W(e.bidder)))return _s[rt];if(t===rt&&r.includes(W(e.bidder)))return _s[mi]}return _s[t]}};I.class(dd,{token:"BidWonAnalyticsEventFactory",defaultAlias:"bidWonAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.DISPENSARY_DATA,l.AUCTION_MANAGER,l.REBID_MANAGER]})});var An,ld,cd,Cu=f(()=>{Yt();L();k();ye();En();An=class An extends ${constructor(){super(...arguments);E(this,"type","bidRequested")}_buildPayload(t){return ve(t,An.payloadProperties)}};E(An,"payloadProperties",["bidderCode","auctionId","bidderRequestId","start","timeout","bids","auctionStart","src"]);ld=An,cd=class extends Wt{constructor({win:e,freestar:t,dispensaryData:r,auctionManager:s}){super({win:e,freestar:t,dispensaryData:r}),this._auctionManager=s,this._dispensaryData=r}create(e){let t=e.bids.map(s=>({bidder:s.bidder,placementCode:s.adUnitCode,bidId:s.bidId,params:JSON.stringify(s.params)}));return new ld(B(w({},e),{bids:t}))}};I.class(cd,{token:"BidRequestedAnalyticsEventFactory",defaultAlias:"bidRequestedAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.DISPENSARY_DATA,l.AUCTION_MANAGER]})});var vn,wn,Ou=f(()=>{Yt();ye();vn=class vn extends ${constructor(){super(...arguments);E(this,"type","bidTimeout")}_buildPayload(t){return ve(t,vn.payloadProperties)}};E(vn,"payloadProperties",["auctionId","bidderRequestId","bidId","bidder","adUnitCode","src","timeout"]);wn=vn});var Rn,fd,Tn,xu=f(()=>{Yt();L();k();ye();sd();In();Rn=class Rn extends ${constructor(){super(...arguments);E(this,"type","dfpResponse")}_buildPayload(t){return ve(t,Rn.payloadProperties)}};E(Rn,"payloadProperties",["placementId","DfpId","advertiserId","campaignId","isEmpty","lineItemId","serviceName","size","sourceAgnosticCreativeId","sourceAgnosticLineItemId","complete","auctionId","dfpRefresh","maxBid","fsRebidCount","fstrU","networkCode","impressionId","countryCode","fsAdProduct","fsuuid","itfTargetingValue","fsAuctionId"]);fd=Rn,Tn=class extends Qi{constructor({win:e,freestar:t,prebidManager:r,auctionManager:s,rebidManager:n,refreshLibrary:o}){super(),this._window=e,this._freestar=t,this._prebidManager=r,this._auctionManager=s,this._rebidManager=n,this._refreshLibrary=o}create(e){var S,_;let{parentDiv:t,advertiserId:r=0,campaignId:s=0,lineItemId:n=0,sourceAgnosticCreativeId:o=0,sourceAgnosticLineItemId:a=0,placementId:d,fsAuctionId:c,slotId:u}=e,p=this._window.document.getElementById(t),m=(S=this._refreshLibrary.getRefreshLibraryItem({slotId:t}))==null?void 0:S.dataRefreshId,g=!1;if(p&&m){let y,N=RegExp(m,"g");(_=this._freestar.refreshSlots)==null||_.forEach((x,q)=>{N.test(x.refreshId)&&(y=q,g=!0)}),this._freestar.refreshSlots.splice(y,1)}let{rebidAttempt:h}=Ji({bid:{fsAuctionId:c,slotId:u},placementId:d,rebidManager:this._rebidManager,fsAuctionId:c,auctionManager:this._auctionManager}),A=vu({placementId:d,prebid:this._prebidManager.instance});return new fd(B(w({},e),{maxBid:Math.trunc(A*1e4),advertiserId:r,campaignId:s,lineItemId:n,dfpRefresh:g,fsRebidCount:h,sourceAgnosticCreativeId:o,sourceAgnosticLineItemId:a,itfTargetingValue:this._freestar.identity.targeting,fsuuid:Xi({slotId:u,googletag:this._window.googletag})}))}};I.class(Tn,{token:"DfpResponseAnalyticsEventFactory",dependencies:[l.FREESTAR,{token:l.WINDOW,alias:"win"},l.AUCTION_MANAGER,l.REBID_MANAGER,l.REFRESH_LIBRARY],factory:({dependencies:i})=>new Tn(B(w({},i),{prebidManager:{get instance(){return i.win.fsprebid}}}))})});var Cn,On,Pu=f(()=>{ye();Cn=class extends ${constructor(){super(...arguments);E(this,"type","outstreamBidWon")}},On=class extends ${constructor(){super(...arguments);E(this,"type","outstreamTagLoad")}}});var xn,Nu=f(()=>{ye();xn=class extends ${constructor(){super(...arguments);E(this,"type","sniffer")}}});var Pn,Du=f(()=>{ye();Pn=class extends ${constructor(){super(...arguments);E(this,"type","iaiHighImpactTrackings")}}});var Nn,Lu=f(()=>{ye();Nn=class extends ${constructor(){super(...arguments);E(this,"type","iaiHighImpactAdRequests")}}});var Dn,ku=f(()=>{ye();Dn=class extends ${constructor(){super(...arguments);E(this,"type","iaiHighImpactInteractions")}}});var Ln,Mu=f(()=>{ye();Ln=class extends ${constructor(){super(...arguments);E(this,"type","adBlocked")}}});var Ot=f(()=>{ye();Br();rd();Au();wu();Tu();Ru();Cu();Ou();xu();Pu();Nu();Du();Lu();ku();Mu()});var Bu,kn,Fu=f(()=>{re();Bu={level:20,title:"UserScrollTracker"},kn=class i{constructor(){E(this,"_handleScrollData",ki(()=>{this.scrollHeight=this._getScrollHeight();let e=window.scrollY,t=this.scrollHeight-window.innerHeight,r=e/t*100;this.interactionsLastPercentile=r,this.interactionsMaxPercentile=Math.max(this.interactionsMaxPercentile,r),this.interactionsMsgCount+=1,freestar.log(Bu,`Updated - Last: ${this.interactionsLastPercentile.toFixed(2)}%, Max: ${this.interactionsMaxPercentile.toFixed(2)}%, Height: ${this.scrollHeight}px, MsgCount: ${this.interactionsMsgCount}`)},250));if(i.instance)return i.instance;this.interactionsMsgCount=0,this.interactionsLastPercentile=0,this.interactionsMaxPercentile=0,this.scrollHeight=this._getScrollHeight(),this._initScrollListener(),this._initMutationObserver(),i.instance=this,freestar.log(Bu,"initialized")}_initScrollListener(){window.addEventListener("scroll",this._handleScrollData)}_getScrollHeight(){return document.documentElement.scrollHeight}_initMutationObserver(){new MutationObserver(()=>{this.scrollHeight=this._getScrollHeight()}).observe(document.body,{childList:!0,subtree:!0})}getLastPercentile(){return this.interactionsLastPercentile}getMaxPercentile(){return this.interactionsMaxPercentile}getScrollHeight(){return this.scrollHeight}getMsgCount(){return this.interactionsMsgCount}}});var Mn,Uu=f(()=>{Mn=class i{constructor(e){E(this,"_handleTermination",()=>{this._handleTerminationCalled||(this._handleTerminationCalled=!0,this._onTerminateCallback&&this._onTerminateCallback(),setTimeout(()=>{this._handleTerminationCalled=!1},this._throttlePeriod))});if(i.instance)return i.instance;this._onTerminateCallback=e,this._handleTerminationCalled=!1,this._throttlePeriod=2e3,this._initTerminationListeners(),i.instance=this}_initTerminationListeners(){window.addEventListener("beforeunload",this._handleTermination),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this._handleTermination()})}}});function My(i){return Gu[i]||Object.values(Gu).find(e=>e===i)||"UNKNOWN"}var Gu,ud,Bn,Vu=f(()=>{L();k();Ot();z();Fu();Uu();It();Gu={flyingCarpet:"FLYING_CARPET"},ud=[l.ANALYTICS,l.PAGE];Bn=class{constructor({percentilePlacement:e,highImpactType:t,slotId:r}){this.percentilePlacement=e,this.highImpactType=t,this.slotId=r,this.id=ue(),this.sendInit(),this.scrollTracker=new kn,this.highImpactType==="flyingCarpet"&&this.initializePageviewTerminationService()}sendInit(){D.instance.resolveAll(ud).then(({analytics:e,page:t})=>{e.track(new Pn({sessionId:freestar.msg.sessionId,pageviewId:t.pageId,highImpactUnitSessionId:this.id,percentilePlacement:this.percentilePlacement,sessionDepth:t.pageviewCount,highImpactType:My(this.highImpactType)}))})}sendRequest({auctionId:e,refreshCount:t}){D.instance.resolveAll(ud).then(({analytics:r,page:s})=>{r.track(new Nn({sessionId:freestar.msg.sessionId,pageviewId:s.pageId,auctionId:e,highImpactUnitSessionId:this.id,refreshCount:t}))})}createInteractionsMessage(){D.instance.resolveAll(ud).then(({analytics:e,page:t})=>{let r=new Dn({sessionId:freestar.msg.sessionId,pageviewId:t.pageId,highImpactUnitSessionId:this.id,interactionsMsgCount:this.scrollTracker.getMsgCount(),interactionsLastPercentile:this.scrollTracker.getLastPercentile(),interactionsMaxPercentile:this.scrollTracker.getMaxPercentile(),scrollHeight:this.scrollTracker.getScrollHeight()});r.setTopic(Qe.BEACON),e.track(r)})}initializePageviewTerminationService(){this.pageviewTerminationService=new Mn(this.createInteractionsMessage.bind(this))}}});var pd,qu,zu=f(()=>{Ui();Vu();L();k();pd=class{constructor(){E(this,"sendRequestMessageAuction",e=>{e.getAdUnits().forEach(t=>{this.sendRequestMessage({slotId:t.getSlotId(),auctionId:e.fsAuctionId})})});this.instances={},this.setupRequestMessageListener()}setupRequestMessageListener(){D.instance.resolve(l.AUCTION_MANAGER).then(e=>{e.addEventListener("auctionInit",this.sendRequestMessageAuction)})}newHighImpactTracking({percentilePlacement:e,highImpactType:t,slotId:r}){if(this.instances[r])freestar.log({level:1,title:"HighImpactTrackingManager"},`Already tracking a high impact ad in slot "${r}"!`);else return this.instances[r]=new Bn({percentilePlacement:e,highImpactType:t,slotId:r})}sendRequestMessage({slotId:e,auctionId:t}){let r=this.instances[e];r&&D.instance.resolve(l.REFRESH_LIBRARY).then(s=>{var o;let n=((o=s.getRefreshLibraryItem({slotId:e}))==null?void 0:o.timesRefreshed)||0;r.sendRequest({auctionId:t,refreshCount:n})})}},qu=_t.getInstanceFn({ClassConstructor:pd,instanceName:"HighImpactTrackingManager"})});var By,Qt,Fn,Hu=f(()=>{z();re();bu();re();zu();ke();Pe();By={level:20,title:"IAI"},Qt=class Qt{constructor({name:e,placement:t,intelligentAdInsertConfig:r,parentElement:s,debugIndex:n,lazy:o=!1}){this.name=e,this.placement=t,this.config=r,this.parentElement=s,this.debugIndex=n!=null?n:0,this.lazy=o,this.childElements=[],this.resizeObserver=null,this.parentSize=null,this.mutationObserver=null,this.nextChildIndex=0,this.ads=[],this.adsInsertedCount=0,this.blocklistSelector=(this.config.blocklist||[]).join(", "),this.debugTimeout=null,this.insertTimeout=null,this.intersectionObserver=null,this.slotsAwaitingIntersection={},this.addedFlyingCarpet=!1,this.highImpactTracking=null,this.highImpactPlacementConfig=null,o||this.init()}info(...e){freestar.log(By,this.debugIndex,...e)}init(){this.childElements=this.getValidChildElements(),this.monitorParentElement(),this.checkForInsertOpportunities(),this.debug()}isValidChildElement(e){return e instanceof Element&&!e.matches(".iai-label")&&!e.matches(".fs-iai")&&(!this.config.childElement||e.matches(this.config.childElement))}getValidChildElements(){let e=[];for(let t of this.parentElement.children)this.isValidChildElement(t)&&e.push(t);return e}monitorParentElement(){this.monitorParentMutation()}monitorParentResize(){if(!this.resizeObserver){let e=ki(t=>this.onResize(t),1e3);this.resizeObserver=new ResizeObserver(t=>{for(let r of t)e(r)}),this.resizeObserver.observe(this.parentElement,{box:"border-box"})}}biToHw(e,t){var s;let r=(s=e.style.writingMode)!=null?s:getComputedStyle(e).writingMode;return!r||r.toLowerCase().startsWith("horizontal")?{height:t.blockSize,width:t.inlineSize}:{height:t.inlineSize,width:t.blockSize}}onResize(e){let{target:t,borderBoxSize:r,contentBoxSize:s,devicePixelContentBoxSize:n}=e,o={borderBoxSize:this.biToHw(t,r[0]),contentBoxSize:this.biToHw(t,s[0]),devicePixelContentBoxSize:this.biToHw(t,n[0])};this.parentSize=o}onMutation(e){e.addedNodes.length&&e.addedNodes.forEach(t=>{this.isValidChildElement(t)&&this.childElements.push(t)})}monitorParentMutation(){this.mutationObserver||(this.mutationObserver=new MutationObserver(e=>{for(let t of e)this.onMutation(t);this.insertAds(),this.debug()}),this.mutationObserver.observe(this.parentElement,{childList:!0}))}getNumberOfAdsWithinViewport(e){let r=e.getBoundingClientRect().bottom,{maxHeight:s}=this.getSizeMaxes(),n=r+s,o=(window.innerHeight||document.documentElement.clientHeight)*.95,a=0;for(let d=this.ads.length-1;d>=0;d--){let p=this.ads[d].getBoundingClientRect().bottom;if(n-p<o)a+=1;else break}return a}isBlocked(e){var t;return this.blocklistSelector?e.matches(this.blocklistSelector)||((t=e.nextElementSibling)==null?void 0:t.matches(this.blocklistSelector)):!1}canInsertEveryNElements(e,t,r){let s=e+1,n=Math.floor(s/t);return r<n}canInsert(e){var d;let t=this.childElements[e],r=!1,s=null,{maxAdsInView:n,everyNElements:o,maxInserts:a}=this.config;return a&&this.adsInsertedCount>=a?s="maxInserts":this.canInsertEveryNElements(e,o,this.adsInsertedCount)?(d=t.nextElementSibling)!=null&&d.matches(".fs-iai")?s="adAlreadyInserted":this.isBlocked(t)?s="blocklist":n&&this.getNumberOfAdsWithinViewport(t)>n-1?s="maxAdsInView":r=!0:s="everyNElements",{result:r,reason:s}}insertAds(){clearTimeout(this.insertTimeout),this.insertTimeout=setTimeout(()=>this.checkForInsertOpportunities(),1e3)}checkForInsertOpportunities(){for(;this.nextChildIndex<this.childElements.length;){let{reason:e,result:t}=this.canInsert(this.nextChildIndex);if(t)this.info("INSERTING AD @",this.nextChildIndex),this.addSlot(this.nextChildIndex);else if(this.info("NO INSERT @",this.nextChildIndex,"due to",e),e==="maxInserts"){this.info("maxInserts reached, disconnecting MutationObserver..."),this.mutationObserver.disconnect();return}this.nextChildIndex+=1}}getPercentageHeight(e,t){let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=(r.top-s.top+r.height)/s.height;return a<0?0:Math.min(a,.99)}createFlyingCarpetSlot(e,t){let r=this.childElements[e],s=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}_fc`;t.branding="NONE";let n=new un({background:t.background,height:t.height,branding:t.branding,showPoweredBy:t.showPoweredBy,slotId:s}),o=n.generateHTML();this.ads.push(o),this.parentElement.insertBefore(o,r.nextSibling);let a={placementName:this.getFlyingCarpetPlacementName(),slotId:n.slotId,skipSAU:!0};return this.makeFlyingCarpetPlacement(t),this.registerSlot({element:o,newAdSlotConfig:a}),this.adsInsertedCount+=1,{slotId:s}}static containsSize(e,t){return e.some(r=>r[0]===t[0]&&r[1]===t[1])}makeFlyingCarpetPlacement(e){let t=this.getFlyingCarpetPlacementName();if(freestar.fsdata.placements.some(n=>n.name===t))return;let s=JSON.parse(JSON.stringify(this.placement));s.name=t,s.dfpId=this.getFlyingCarpetDfpId(),s.freestarBrandingDisabled=e.branding!=="NONE";for(let n of s.sizeMappings)for(let o of Qt.flyingCarpetAdditionalSizes)Qt.containsSize(n.size,o)||n.size.push(o);this.addTripleliftTargeting(s),freestar.fsdata.placements.push(s),Zi()}addTripleliftTargeting(e){var n;let t="triplelift",r=o=>o.slug===t,s=(n=e.networks)==null?void 0:n.find(r);if(!s){let o=freestar.fsdata.networks.find(r);o&&(s=JSON.parse(JSON.stringify(o)),e.networks.push(s))}s&&s.sizes.forEach(o=>{o.params||(o.params={}),o.params.inventoryCode="Freestar_RON_Mobile_InContent",o.serverParams&&(o.serverParams.inventoryCode="Freestar_RON_Mobile_InContent")})}getFlyingCarpetPlacementName(){return`${this.name}${Qt.flyingCarpetPlacementSuffix}`}getFlyingCarpetDfpId(){return`${this.placement.dfpId}${Qt.flyingCarpetPlacementSuffix}`}buildAndInsertStandardSlot(e){let t=this.childElements[e],{element:r,newAdSlotConfig:s}=this.buildSlot();this.ads.push(r),this.parentElement.insertBefore(r,t.nextSibling),this.registerSlot({element:r,newAdSlotConfig:s})}getHighImpactPlacementConfig(){if(this.highImpactPlacementConfig==null){this.highImpactPlacementConfig={targetQuartile:[.25,.5][Math.floor(Math.random()*2)],type:"flyingCarpet"};let e=of();e!=null&&!Number.isNaN(e)?(this.highImpactPlacementConfig.targetQuartile=e,this.info(`Targeting quartile ${e} from query parameter`)):this.info(`Randomly generated target quartile ${this.highImpactPlacementConfig.targetQuartile}`)}return this.highImpactPlacementConfig}getChildPercentageHeight(e){let t=this.childElements[e];return this.getPercentageHeight(t,this.parentElement)}handleHighImpactUnit(e,t){var n;let{flyingCarpet:r}=this.config.highImpact,{slotId:s}=this.createFlyingCarpetSlot(e,r);Math.random()*100<((n=freestar.fsdata.prebidLogPercentage)!=null?n:1)&&(this.highImpactTracking=qu().newHighImpactTracking(B(w({},t),{slotId:s}))),this.addedFlyingCarpet=!0}shouldServeHighImpact(e){var s,n,o,a;if(af())return{shouldServe:!1};let r=this.getHighImpactPlacementConfig();if(r.type==="flyingCarpet"&&((n=(s=freestar==null?void 0:freestar.deviceInfo)==null?void 0:s.device)==null?void 0:n.type)===ee&&!this.addedFlyingCarpet){let d=(a=(o=this.config)==null?void 0:o.highImpact)==null?void 0:a.flyingCarpet;if(!d||d.active){let c=this.getChildPercentageHeight(e),u=r.targetQuartile-.25,p=Math.round(r.targetQuartile*4)+c;return{shouldServe:c>=u,tracking:{percentilePlacement:p,highImpactType:"flyingCarpet"}}}}return{shouldServe:!1}}addSlot(e){let{shouldServe:t,tracking:r}=this.shouldServeHighImpact(e);t?this.handleHighImpactUnit(e,r):this.buildAndInsertStandardSlot(e)}getSizeMaxes(){let e=this.placement.sizes.filter(s=>Array.isArray(s)),t=0,r=0;return e.forEach(s=>{t=Math.max(t,s[0]),r=Math.max(r,s[1])}),{maxWidth:t,maxHeight:r}}getStickySettings(){var e,t;if((t=(e=this.placement)==null?void 0:e.selectedSize)!=null&&t.stickyAdEnabled){let{headerHeight:r,stickyAdBackgroundRgba:s}=this.placement.selectedSize;return{headerHeight:r,stickyAdBackgroundRgba:s}}return null}getStickyStyleContent({headerHeight:e,stickyAdBackgroundRgba:t}){let r=[];return t&&r.push(`.fs-iai-sticky { background-color: ${t} }`),(!e||e<0)&&(e=0),r.push(`.fs-iai-sticky > div { top: ${e}px }`),r.join(` `)}makeStickyStyle({headerHeight:e,stickyAdBackgroundRgba:t}){let r=`iai-sticky-style-${this.name}`;if(!document.getElementById(r)){let n=document.createElement("style");n.id=r,n.textContent=this.getStickyStyleContent({headerHeight:e,stickyAdBackgroundRgba:t}),document.head.appendChild(n)}}buildSlot(){let e=`${this.name}_${this.debugIndex}_${this.adsInsertedCount}`,{maxWidth:t,maxHeight:r}=this.getSizeMaxes(),s=this.getStickySettings();s&&this.makeStickyStyle(s);let o=b({type:"div",id:e,classList:s?["fs-iai","fs-iai-sticky"]:["fs-iai"],attributes:[{style:`min-height:${r}px; min-width:${t}px;`},{"data-freestar-ad":$u({placement:this.placement})},{name:this.name}]}),a=e+"_slot",d=b({type:"div",id:a});return o.appendChild(d),this.adsInsertedCount+=1,{element:o,newAdSlotConfig:{placementName:this.name,slotId:a,skipSAU:!0}}}intersectionObserverCallback(e,t){e.forEach(r=>{if(r.isIntersecting){let{target:s}=r;t.unobserve(s);let n=this.slotsAwaitingIntersection[s.id];n&&(this.info("Registering new ad slot for",s.id),delete this.slotsAwaitingIntersection[s.id],freestar.newAdSlots([n]))}})}registerSlot({element:e,newAdSlotConfig:t}){this.intersectionObserver||(this.intersectionObserver=new IntersectionObserver((r,s)=>this.intersectionObserverCallback(r,s),{rootMargin:"100%"})),this.slotsAwaitingIntersection[e.id]=t,this.intersectionObserver.observe(e),this.info("Waiting for intersection for",e.id)}debug(){freestar.debug&&(clearTimeout(this.debugTimeout),this.debugTimeout=setTimeout(()=>this._debug(),1e3))}_debug(){this.debugAddStyleNode(),this.debugNames()}getDebugStyleContent(){let e="";return this.blocklistSelector&&(e=` ${this.config.blocklist.map(r=>`${this.config.parentElement} >${r}`).join(", ")} { outline: dashed red; } `),` ${this.config.parentElement} { outline: solid blue; } ${this.config.parentElement} >${this.config.childElement||"*"} { outline: solid fuchsia; } .parent-label { color: blue; } .child-label { color: fuchsia; } .ad-label { color: #00c389; } .iai-label { position: absolute; font: large; background: silver; padding: 3px; } .fs-iai { outline: solid #00c389; /* freestar green */ } ${e} `}debugAddStyleNode(){let e=`iai-style-${this.name}`;if(!document.getElementById(e)){let r=document.createElement("style");r.id=e,r.textContent=this.getDebugStyleContent(),document.head.appendChild(r)}}debugNames(){this.debugAddLabel(this.parentElement,"parent-label",`${this.name} parent ${this.debugIndex}`),this.childElements.forEach((e,t)=>this.debugAddLabel(e,"child-label",`child ${t}`)),this.ads.forEach((e,t)=>this.debugAddLabel(e,"ad-label",`ad ${t}`))}debugAddLabel(e,t,r){let s=e.querySelector(".iai-label");s||(s=document.createElement("label"),s.classList.add("iai-label"),e.insertBefore(s,e.firstChild)),s.classList.add(t),s.textContent=r}};E(Qt,"flyingCarpetAdditionalSizes",[[300,250],[300,600]]),E(Qt,"flyingCarpetPlacementSuffix","_flying_carpet_sizes_placement");Fn=Qt});var Un,Yu=f(()=>{Hu();lt();Un=class{constructor(){this.configs={},this.instances=[]}registerConfig({placement:e,intelligentAdInsertConfig:t}){let r=e.name;if(!this.configs[r]){let s={name:r,placement:e,intelligentAdInsertConfig:t};this.configs[r]=s}}initConfig({name:e}){if(he({name:"iai"}))return;if(!this.configs[e]){freestar.log(50,`Cannot init unregistered IAI ${e}!`);return}let{placement:t,intelligentAdInsertConfig:r}=this.configs[e],s=r.parentElement;Array.from(document.querySelectorAll(s)).filter(a=>!this.instances.some(d=>d.parentElement===a)).forEach(a=>{let d=new Fn({name:e,placement:t,intelligentAdInsertConfig:r,parentElement:a,debugIndex:this.instances.length});this.instances.push(d)})}initDocumentWatcher(){}}});function Gn({placement:i}){var e;return(e=i==null?void 0:i.selectedSize)==null?void 0:e.intelligentAdInsertConfig}var md,hd=f(()=>{Ui();Yu();md=_t.getInstanceFn({ClassConstructor:Un,instanceName:"intelligentAdInsertManager"})});function Fy(i,e){let t={};return window.freestar.config.targeting&&Array.isArray(window.freestar.config.targeting)&&(t=window.freestar.config.targeting.find(function(r){return Object.keys(r).includes(e)})),t&&(i=w(w({},i),t[e])),i}function Ti(i,e,t=null,r=null){try{let s=Fy(r,e);if(s)for(let n in s)i.setTargeting(n,s[n])}catch(s){freestar.log(49,"ERROR:","slotTargeting",...arguments),freestar.log(49,"ERROR:","slotTargeting",s)}}function Vr(i){if(freestar.googletagCorrelatorUpdate=!0,freestar.log(25,"deleteAdSlots invoked and the following ID(s) will be destroyed",i),!fsprebid.libLoaded||!googletag&&!googletag.destroySlots){freestar.log(10,"destroyAdSlots","Objects not ready, returning..."),freestar.queue.timers=freestar.queue.timers||{},clearTimeout(freestar.queue.timers[i]),freestar.queue.timers[i]=setTimeout(Vr,100,...arguments);return}if(i===void 0){googletag.cmd.push(function(){googletag.destroySlots()}),D.instance.resolve(l.EVENT_BUS).then(e=>{e.emit(Vn)});return}Array.isArray(i)||(i=[i]),Uy({list:i})}function Gy(i,e){let t=document.getElementById(i);t?e(null,t):setTimeout(function(){t=document.getElementById(i),t?e(null,t):e(!0)},500)}function Vy(i){var r;if(!((r=i==null?void 0:i.sizes)!=null&&r.length))return null;let e=De({elementId:i.code});if(!e)return null;let t=!fsprebid.adUnits.find(s=>s.code===i.code);return t&&Kt({adUnits:[i]}),{elementId:i.code,slot:e,needsAdUnit:t}}function qy({placement:i,element:e,newElement:t,sendAdserverSignal:r}){let s=ze(i);if(s)if(s.code=e.id,r){let n=Vy(s);n&&D.instance.resolve(l.BIDS_MANAGER).then(o=>{o.requestBids({elementIds:[n.elementId],slots:[n.slot],sendAdserverSignal:r})})}else t.source==="lazyAd"?D.instance.resolve(l.BIDS_MANAGER).then(n=>{n.enqueueBids({bidObjects:[s]})}):i.selectedSize&&i.selectedSize.lazyLoadViewportHeight>0?dn({element:e,placement:i}):D.instance.resolve(l.BIDS_MANAGER).then(n=>{n.enqueueBids({bidObjects:[s]})})}function gd({placement:i,slotId:e,targeting:t={},placementName:r=null,newElement:s,element:n=null}){r=r&&r.length?r:i.name;function o(a,d){if(d&&r&&(d.setAttribute("name",r),window.freestar.newAdSlotIds.push(e),i=Q({name:r}),i)){window.freestar.dynamicSlots.push(e);let c=(p,m)=>p[0]+p[1]<m[0]+m[1]?1:m[0]+m[1]<p[0]+p[1]?-1:0,u=[];if(i.selectedSize&&i.selectedSize.mediaTypes.includes("video")===!0?u=i.selectedSize.size.sort(c).filter(p=>p[0]!==35843)[0]:i.sizeMappings.some(p=>{if(p.mediaTypes.includes("video")===!0&&Je()>=p.viewport.size[0])return u=p.size.sort(c).filter(m=>m[0]!==35843),!0}),u.length>0){let p=u[0]>=500?[[640,360],[552,334]]:[[400,225],[300,169]];d.setAttribute("data-freestar-ad",d.getAttribute("data-freestar-ad")+` __${p[0][0]}x${p[0][1]}`)}window.googletag.cmd.push(function(){var p,m;if(i.sizes&&i.sizes.length||i.fluidAd){let g=De({elementId:e}),h=freestar.config.channel,A=freestar.config.channel,S=i.dfpId;i.dfpId.indexOf("{{channel}}")>-1?h="{{channel}}":i.dfpId.indexOf(freestar.config.channel)>-1?h=freestar.config.channel:i.dfpId.indexOf(freestar.config.orignalChannel)>-1&&(h=freestar.config.orignalChannel),A&&(s.path||h)&&(S=i.dfpId.replace(A,s.path||h),g&&window.googletag.destroySlots&&(g=void 0)),g||(g=Xt({placement:i,slotConfig:{targeting:t},sizes:i.sizes,id:d.id,specialDfpId:S})),g&&(t=B(w({},t),{fs_ad_product:qe(i),fsrefresh:(p=t==null?void 0:t.fsrefresh)!=null?p:"0",fsrebid:(m=t==null?void 0:t.fsrebid)!=null?m:"0"}),Ti(g,e,r,typeof t!="undefined"&&Object.keys(t).length?t:void 0))}})}}n?o(null,n):Gy(e,o)}function qe(i){var r,s,n,o,a,d;if(!i)return"";let e=["revolvingRail","slidingUnit","topAdhesion","standAloneVideo","stickyRail"].filter(c=>{let u=i[c+"Options"];return u==null?void 0:u.active}),t=cn(i);if(t&&t.active&&e.push("dynamicAd"),(r=i.stickyFooterOptions)!=null&&r.active&&e.push(i.stickyFooterOptions.video===!0?"stickyFooterVideo":"stickyFooter"),(s=i.interstitialOptions)!=null&&s.active&&e.push("interstitial"),i.lazyAd===!0&&e.push("lazyLoad"),[1,2].includes((n=i.sideWallOptions)==null?void 0:n.type)&&e.push("sideWall"),(o=i.pushdownOptions)!=null&&o.isPushdownUnit&&e.push("pushdown"),i!=null&&i.carouselOptions&&!hu()){let c=(a=i.name)==null?void 0:a.match(/slot_([a-z])/i),u=c?`_${c[1].toLowerCase()}`:"";e.push(`carousel${u}`)}return(d=Gn({placement:i}))!=null&&d.active&&e.push("iai"),e.length<=0&&e.push("banner"),e.filter(c=>!he({name:c})).join(",")}function zy({elements:i=[],channel:e=null}){class t{constructor(s=[],n=null){this.elements=s,this.channel=n,this.used=!1}process(){this.used||(freestar.log(1,"Invoking process for queued new ad slot for the following elements ",this.elements),freestar.log(1,"Invoking process for queued new ad slot using the following channel ",this.channel),this.used=!0,freestar.newAdSlots(this.elements,this.channel))}}freestar.newAdSlotsQueue=freestar.newAdSlotsQueue||[],freestar.newAdSlotsQueue.push(new t(i,e))}function Jt(i,e=null,t){let r="newAdSlots";if(!freestar.newAdSlotsAllowed){zy({elements:i,channel:e}),freestar.log(1,"The method newAdSlots not allowed while page grabber is active. Placement the following elements / channel in the newAdSlotsQueue : ",arguments);return}if(freestar.log(10,`${r} invoked`,...arguments),tr())throw new Error("Ad serving is blocked in "+freestar.locData.iso);if(i===void 0)return;Array.isArray(i)||(i=[i]),i=i.filter(n=>{let{placementName:o}=n,a=Q({name:o})!=null;return a||freestar.log(30,r,`cannot find placement for ${o}, ignoring`),a});let s=As(i,"slotId");if(!window.freestar.loaded||!window.fsprebid.libLoaded||!window.googletag){freestar.log(10,r,"Objects not ready, returning..."),freestar.queue.timers=freestar.queue.timers||{},freestar.queue.timers&&s[0]&&s[0].slotId&&(freestar.queue.timers[s[0].slotId]&&clearTimeout(freestar.queue.timers[s[0].slotId]),freestar.queue.timers[s[0].slotId]=setTimeout(Jt,100,...arguments));return}!e&&freestar.config.channel&&(e=freestar.config.channel),freestar.config.orignalChannel||(freestar.config.orignalChannel="{{channel}}"),e&&freestar.config.orignalChannel!=e&&(freestar.log(99,r,"Channel is different than originally set, modifying dfpIds"),freestar.fsdata.placements=freestar.fsdata.placements.map(n=>(n.dfpId=n.dfpId.replace(freestar.config.orignalChannel,e),n)),freestar.config.orignalChannel=e,freestar.log(99,r,"New dfpIDs",freestar.fsdata.placements.map(n=>n.dfpId))),D.instance.resolve(l.EVENT_BUS).then(n=>{n.emit(er,{elementIds:s.map(({slotId:o})=>o)})});for(let n=0;n<s.length;n++)if(freestar.enabledSlotsCalled.indexOf(s[n].slotId)===-1){let{placementName:o,slotId:a,targeting:d}=s[n],c=document.getElementById(a),u=Q({name:o});u&&(gd({placement:u,slotId:a,targeting:d,newElement:s[n],element:c}),c&&(qy({placement:u,element:c,newElement:s[n],sendAdserverSignal:t}),freestar.newAdSlotsCalled.push(c.id),typeof s[n].skipSAU=="undefined"&&D.instance.resolve("StickyAd",!0).then(p=>{p!=null&&p.isSlidingUnit({placement:u})&&(p==null||p.attachSlidingUnit({adUnit:u,slotId:a}))})))}}var Uy,St=f(()=>{re();Ri();ke();Ge();Ja();z();lt();Za();L();dt();gu();Le();k();ji();hd();Uy=({list:i})=>{let e=i.map(r=>ce.getAdUnitBySlotElementId(r)),t=[];for(let r of e){let{placement:s}=r;if(s&&s.sizeMappings&&s.sizeMappings.some(n=>n.superflex)){let n=[...document.querySelectorAll(`[name="${s.name}"]`)];t=t.concat(n.flatMap(o=>o.id.includes("fs-sf")?ce.getAdUnitBySlotElementId(o.id)||[]:[]))}}i.forEach(r=>{Gr({elementId:r})}),t.forEach(r=>{Gr({elementId:r.slot.getSlotElementId()})})}});function Xe({key:i,value:e}){window.googletag.pubads&&window.googletag.pubads().setTargeting(i,e)}function qn({slot:i,key:e,value:t}){i&&i.setTargeting&&e&&t&&i.setTargeting(e,t)}function at(){return window.googletag.pubads&&window.googletag.pubads().getSlots()}function De({elementId:i}){if(i)return at().filter(e=>e.getSlotElementId()===i)[0]}function Gr({elementId:i}){let e=De({elementId:i});e&&(window.googletag.destroySlots([e]),D.instance.resolve(l.EVENT_BUS).then(t=>{t.emit(Hn,{elementId:i})}))}function ju({specialDfpId:i,dfpId:e}){return i||!e.includes("{{channel}}")}function Hy({dfpId:i,elementId:e}){return window.googletag.defineOutOfPageSlot(i,e).addService(googletag.pubads())}function Xt({placement:i,sizes:e,id:t=null,specialDfpId:r=null,slotConfig:s}){if(!i){freestar.log("No placement provided, exiting...");return}if(!e&&(e=zn(i),!e)){freestar.log("No sizes found at this resolution, exiting...");return}t||(t=i.name);let{outOfPage:n,dfpId:o,fluidAd:a}=i,d=De({elementId:t});if(d||(n?ju({specialDfpId:r,dfpId:o})&&(d=Hy({dfpId:r||o,elementId:t})):(a&&!e.includes("fluid")&&e.push("fluid"),ju({specialDfpId:r,dfpId:o})&&(d=googletag.defineSlot(r||o,e,t).addService(googletag.pubads())))),d){if(freestar.fsdata.disableSingleRequest||googletag.pubads().enableSingleRequest(),googletag.enableServices(),Jf({id:t,placement:i}),d.setTargeting){let p={fsrefresh:"0",fsrebid:"0",fs_uuid:ue()};!Ei({siteId:freestar.fsdata.siteId,placement:i})&&!Ci(i)&&(p=bt().getInitialFloorKVP({placement:i,keyMap:p})),Object.keys(p).forEach(m=>{d.setTargeting(m,p[m])})}let c=Zt()?i==null?void 0:i.customTargetingPlacementName:i==null?void 0:i.name;if(c&&(qn({slot:d,key:"fs_placementName",value:c}),qn({slot:d,key:"fs_ad_product",value:qe(i)})),s&&s.targeting)for(let p in s.targeting)Object.prototype.hasOwnProperty.call(s.targeting,p)&&qn({slot:d,key:p,value:s.targeting[p]});let u=localStorage.getItem("brw.prf");return u&&qn({slot:d,key:"browsiPP",value:u}),fu({slot:d}),jt({placementName:i.name,slotId:t,path:r||o}),ce.add({placement:i,slot:d}),D.instance.resolve(l.EVENT_BUS).then(p=>{p.emit(er,{elementId:t})}),d}}function Ku(){return U("fs-dev-gam")?($y(ca),!1):freestar.fsdata.placements.filter(e=>e.dfpId.indexOf(Li)>-1).length>0}function Wu(){return freestar.fsdata.placements.filter(i=>i.dfpId.indexOf(ca)>-1).length>0}function $y(i){if(!freestar||!freestar.fsdata||!Array.isArray(freestar.fsdata.placements)){console.error("Invalid freestar.fsdata.placements structure.");return}freestar.fsdata.placements=freestar.fsdata.placements.map(e=>{var t;return(t=e.dfpId)!=null&&t.includes(Li)&&(e.dfpId=e.dfpId.replace(Li,i)),e})}function Qu({slotIds:i}){return at().map(function(e){if(!i||i.indexOf(e.getSlotElementId())>-1)return e}).filter(e=>e!==void 0)}var Ge=f(()=>{z();Mr();J();Ka();Te();ir();dt();St();Ke();yi();L();k();Le();ke()});function Ju(i,e=0){return(be[i[e+0]]+be[i[e+1]]+be[i[e+2]]+be[i[e+3]]+"-"+be[i[e+4]]+be[i[e+5]]+"-"+be[i[e+6]]+be[i[e+7]]+"-"+be[i[e+8]]+be[i[e+9]]+"-"+be[i[e+10]]+be[i[e+11]]+be[i[e+12]]+be[i[e+13]]+be[i[e+14]]+be[i[e+15]]).toLowerCase()}var be,Xu=f(()=>{be=[];for(let i=0;i<256;++i)be.push((i+256).toString(16).slice(1))});function Ed(){if(!_d){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_d=crypto.getRandomValues.bind(crypto)}return _d(Yy)}var _d,Yy,Zu=f(()=>{Yy=new Uint8Array(16)});var jy,yd,ep=f(()=>{jy=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yd={randomUUID:jy}});function Ky(i,e,t){var s,n,o;if(yd.randomUUID&&!e&&!i)return yd.randomUUID();i=i||{};let r=(o=(n=i.random)!=null?n:(s=i.rng)==null?void 0:s.call(i))!=null?o:Ed();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let a=0;a<16;++a)e[t+a]=r[a];return e}return Ju(r)}var Id,tp=f(()=>{ep();Zu();Xu();Id=Ky});var ip=f(()=>{tp()});function rp({event:i}){if(i.isEmpty)return;let e=i.slot.getSlotElementId();if(!e)return;let t=freestar.bidsWon[e];t&&t.time&&Date.now()-t.time>1e3*29&&delete freestar.bidsWon[e]}var sp=f(()=>{});function ap(i){if(i){let e=document.getElementsByTagName("head")[0],t=b({type:"style",attributes:[{type:"text/css"},{"data-owner":"freestar"}]});t.appendChild(document.createTextNode(i.replace(/(\r\n|\n|\r)/gm,""))),e.appendChild(t)}}function cp({scriptSrc:i,target:e=null,callback:t,id:r}){if(e)try{let s=b({type:"script",src:i});s.async=!0,s.type="text/javascript",t&&(s.onload=t),r&&(s.id=r),e.appendChild(s)}catch(s){}}function Sd(i){if(!i.state||Object.keys(i.state).length===0)return;let e=window.location.origin,t=i.state.current?e+i.state.current:window.location.href;freestar.trackPageview({path:t})}function $n(){let i=window.innerWidth,e=window.innerHeight,t=document.body,r=document.documentElement,s=Math.max(t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight),n=document.querySelector("link[rel='canonical']"),o="";n&&(o=n.getAttribute("href")),freestar.msg.loadTime===0&&(freestar.msg.loadTime=Date.now()-freestar.hitTime),window.freestar.lastHrefPushed=window.freestar.lastHrefPushed||"",window.googletag.cmd.push(function(){window.freestar.lastHrefPushed!==freestar.url&&(window.freestar.lastHrefPushed=freestar.url,D.instance.resolve(l.ANALYTICS).then(a=>{a.track(new gn({canonical:o,fpc:freestar.msg.fpc,hitTime:freestar.hitTime,loadTime:freestar.msg.loadTime,winHeight:e,winWidth:i,maxHeight:s,isServerToServer:freestar.server.diceRoll,googleVersion:window.googletag.getVersion()||""}))}))})}function fp(i){bd(i,!0)}function Wy({eventObject:i,event:e,complete:t}){if(t?e=freestar.dfpSlotInfo[i.elementId]:freestar.dfpSlotInfo[i.elementId]=e,e&&i&&!Ma({event:e})){let{slot:r}=e,s=r.getTargeting("fs-auuid")[0]||null;Promise.all([D.instance.resolve(l.ANALYTICS),D.instance.resolve("DfpResponseAnalyticsEventFactory")]).then(([n,o])=>{n.track(o.create({slotId:i.elementId,placementId:i.placementId,DfpId:i.adUnitPath,advertiserId:e.advertiserId,campaignId:e.campaignId,isEmpty:e.isEmpty,lineItemId:e.lineItemId,serviceName:e.serviceName,size:JSON.stringify(e.size),sourceAgnosticCreativeId:e.sourceAgnosticCreativeId,sourceAgnosticLineItemId:e.sourceAgnosticLineItemId,parentDiv:i.elementId,complete:t||!1,auctionId:i.auctionId?i.auctionId:null,fsAuctionId:s}))})}e&&Ma({event:e})&&(window.freestar.googleInterstitialPlacement||(window.freestar.googleInterstitialPlacement={}),window.freestar.googleInterstitialPlacement.event=e)}function bd(i,e){if(!i)return;let t=i.slot.getSlotElementId(),r=i.slot.getAdUnitPath(),s=ne({slotId:t,path:r}),n={elementId:t,creativeId:i.creativeId,adUnitPath:r,placementId:s,displayed:!i.isEmpty},o=Yi({freestar}),a=i.slot.getTargeting(o.auction_id);a.length!==0&&(n.auctionId=a[0]),s&&s!=="unknown"&&(Ne({name:"adServerResponse",detail:n}),freestar.pushdownControl&&freestar.pushdownControl.postGamResponse&&freestar.pushdownControl.postGamResponse({event:i}),Wy({event:i,eventObject:n,complete:e}),rp({event:i}),freestar.fsdata.customDirectAdRefresh&&sn(),Qf(i))}function up(i){if(freestar.debug<50)return;freestar.log(25,"GPT Targeting - START ************************");let e=googletag.pubads().getTargetingKeys();for(let t=0;t<e.length;t++){let r=googletag.pubads().getTargeting(e[t]);freestar.log(25,"GPT Targeting - "+e[t]+" = "+r)}i?Array.isArray(i)||(i=[i]):i=at();for(let t=0;t<i.length;t++){let r=i[t],s=r.getSlotElementId();e=r.getTargetingKeys();for(let n=0;n<e.length;n++){let o=r.getTargeting(e[n]);freestar.log(25," GPT Targeting - Slot ("+s+")- "+e[n]+" = "+o)}}freestar.log(25," GPT Targeting - END **************************")}function Yn(i,{id:e=null}={}){let t=b({type:"style",attributes:[{"data-owner":"freestar"}],id:e});t.textContent=i,document.head.append(t)}function pp(){let i={video:[],script:[],iframe:[]};function e(t){let r=t.src;return r!==""&&r!==void 0&&r!==null&&r!=="about:blank"}Object.keys(i).forEach(t=>{let r=document.querySelectorAll(t);i[t]=Array.from(r).filter(e).map(({src:s})=>s)}),D.instance.resolve(l.ANALYTICS).then(t=>{t.track(new xn({scripts:i.script,videos:i.video,iframes:i.iframe}))})}function mp(i){return i.sizeMappings.reduce((t,r)=>(Je()>=r.viewport.size[0]&&(t=r),t),{})}function zn(i){let e=!1;return i.sizeMappings.some(t=>{if(Je()>=t.viewport.size[0])return e=t.size.sort((r,s)=>r[0]+r[1]<s[0]+s[1]?1:s[0]+s[1]<r[0]+r[1]?-1:0).filter(r=>r[0]!==35843),!0}),e}function hp({placement:i,slotId:e,slotConfig:t,targeting:r={}}){if(!i)return;jt({placementName:i.name,slotId:e||i.name});let s=Qu({slotIds:[e||i.name]})[0];s||(s=Xt({placement:i,id:e,slotConfig:t})),s&&Ti(s,i.name,null,Object.assign(r,{fs_ad_product:qe(i)}));let n=ze(i);return e&&(n.code=e),{slot:s,bidObject:n,placement:i}}var np,$u,op,dp,ue,lp,qr,Q,pu,gp,z=f(()=>{re();nn();bi();ke();Ge();Ri();St();zs();Te();ip();ie();Mr();sp();L();wi();k();np=i=>i.length===1&&i[0][0]===1&&i[0][1]===1,$u=({placement:i})=>{let e="";if(!i)return e;let t=i.sizes.filter(s=>Array.isArray(s)),r={w:Rr(t,s=>s[0]),h:Rr(t,s=>s[1])};return r.w&&r.w.length&&(e+=`__${r.w.join("x")}`),r.h&&r.h.length&&(e+=` __${r.h.join("x")}`),e},op=i=>{let e=document.getElementsByTagName("body")[0];e.className.indexOf(`${i}`)==-1&&(e.className+=e.className.length?` ${i}`:i)};dp=()=>["v2ContentCategory","v2ContentSource","v2ContentMediaFormat","v2ContentChannel","v2ContentType","v2ContentLanguage","v2ContentSourceGeo"].reduce((e,t)=>window.freestar.fsdata[t]?[...e,...window.freestar.fsdata[t]]:e,[]),ue=()=>Id(),lp=({id:i})=>document.querySelector(`#${i}`)!==null;qr=i=>i.indexOf("#")>-1?document.querySelector(i):document.querySelectorAll(i)[0],Q=({name:i})=>window.freestar.fsdata.placements.filter(e=>e.name===i)[0];pu=i=>i.intersectionRatio>0&&i.isIntersecting&&sf(i,"target.id.length",0)>1,gp=({email:i})=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)});function jn(i,e,t){let r=t&&t.length;if(!(e===rt&&!r))return{ver:"1.0",complete:1,nodes:[{asi:Ft,sid:`${i}`,hp:1}]}}var Ad=f(()=>{J()});function _p(i={},e={}){return!!(i.isCoppaInventory||e.isCOPPA)}var Kn,wd=f(()=>{Kn=class{constructor(e,t,r){this.isCoppaInventory=!1,this.global=e,this.prebid=r,this.googletag=t}init(){var e;(e=this.global.config)!=null&&e.isCOPPA&&this.global.config.isCOPPA===!0&&this.set()}set(){this.isCoppaInventory=!0,this.logMethodCall("set"),this.updatePrebidJs(),this.updateGAM()}unset(){this.isCoppaInventory=!1,this.logMethodCall("unset"),this.updatePrebidJs(),this.updateGAM()}info(){return this.global.log("COPPA status is set to "+this.isCoppaInventory),this.isCoppaInventory}logMethodCall(e){this.global.log(`COPPA method ${e} called at ${new Date().toISOString()}`)}updatePrebidJs(){this.prebid&&this.prebid.setConfig({coppa:this.isCoppaInventory})}updateGAM(){this.googletag&&this.googletag.cmd.push(()=>{this.googletag.pubads().setPrivacySettings({childDirectedTreatment:this.isCoppaInventory})})}}});function Qy(){var i,e;(function(t,r,s,n,o,a,d){if(r[t])return;function c(u,p){r[t]._Q.push([u,p])}r[t]={init:function(){c("i",arguments)},fetchBids:function(){c("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},a=s.createElement(n),a.async=!0,a.src=o,d=s.getElementsByTagName(n)[0],d.parentNode.insertBefore(a,d)})("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js"),window.apstag.init({pubID:freestar.amazonPublisherId,adServer:"googletag",schain:Jy(window.freestar.fsdata.companyId,(i=window.freestar.fsdata.schain)==null?void 0:i.type,(e=window.freestar.fsdata.schain)==null?void 0:e.bidderOverrides)},()=>{zr()})}function Jy(i,e=rt,t=[]){let r=t&&t.length&&t.includes(Wc);if(!(e===rt&&!r)&&!(e===mi&&r))return jn(i,e,t)}function Ip(){if(j().getBypassFirstAuction())zr();else{let i=freestar.fsdata.networks.filter(e=>e.slug==="amazon")[0];if(i&&!_p(window.freestar.coppa,window.freestar.config)){let{clientServer:e}=j().getConfig();if(e.amazon!=="off"){freestar.amazonNetwork=i;let t=freestar.amazonNetwork.sizes.filter(r=>r.params.publisherId)[0];freestar.amazonPublisherId=t&&t.params&&t.params.publisherId&&bs(t.params.publisherId)?t.params.publisherId:"0ab198dd-b265-462a-ae36-74e163ad6159",Qy()}else zr()}else zr()}}function Ep(i){return i.bidders&&i.bidders.some(({bidder:e})=>e==="amazon")}function Xy(i){let e=i.sizeMappings.find(r=>Je()>=r.viewport.size[0]),t=e?e.size:[];return t=t.filter(r=>r[0]!==35843),st({slotID:i.name,slotName:i.dfpId,sizes:t})}function Zy(i){let e=Hr();for(let t=0;t<e.length;t++)if(e[t].dfpId===i)return e[t];return null}function Sp(i){let e=[];if(!i)e=Hr().filter(t=>Ep(t)&&Qn(t)).map(t=>Xy(t));else for(let t=0;t<i.length;t++){let r=null;try{r=freestar.dynamicSlotLibrary[i[t].getSlotElementId()],r&&(r=Q({name:r})),r||(r=freestar.fsdata.placements.filter(s=>{if(i[t].getSlotElementId()===s.slotId)return s}),r.length===0&&(r=null)),r||(r=Zy(i[t].getAdUnitPath()))}catch(s){freestar.log(1,`Error: ${s}`)}if(r&&Ep(r)){let s=i[t],n=s.getSizes().filter(a=>typeof a!="string").map(a=>[a.width,a.height]);if(!n.length)continue;let o={slotID:s.getSlotElementId(),slotName:s.getAdUnitPath(),sizes:n};e.push(st(o))}}return e}var zr,yp,Wn=f(()=>{re();Ve();ke();z();Mi();Ad();wd();J();yp=new Promise(i=>{zr=i})});var bp,Ap=f(()=>{bp=Di(qa());L();k();Wn();Ve();I.object({token:l.WINDOW,value:window});I.object({token:l.FREESTAR,dependencies:[l.WINDOW],factory:({dependencies:{window:i}})=>{var e;return(e=i.freestar)!=null?e:{}}});I.object({token:l.FS_DATA,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{var e,t;return(t=(e=i.freestar)==null?void 0:e.fsdata)!=null?t:{}}});I.object({token:l.DEVICE_INFO,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{var e,t;return(t=(e=i.freestar)==null?void 0:e.deviceInfo)!=null?t:{}}});I.object({token:l.GEO_INFO,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{var e,t;return(t=(e=i.freestar)==null?void 0:e.locData)!=null?t:{}}});I.object({token:l.PAGE,defaultAlias:"page",dependencies:[l.FREESTAR,l.DISPENSARY_DATA],factory:({dependencies:i})=>{let{freestar:e,dispensaryData:t}=i;return{_pageId:null,get pageId(){return this._pageId||this.refreshId(),this._pageId},refreshId(){this._pageId=(0,bp.default)(window.location.href+e.hitTime+(t.fpc||"")).toString()},get url(){if(!e.url)return"";let r=new URL(e.url);return`${r.origin}${r.pathname}`},get pageViewCount(){return Number(sessionStorage.getItem("pageviews")||0)},set pageViewCount(r){sessionStorage.setItem("pageviews",r)}}}});I.object({token:l.PERFORMANCE_LOGGER,dependencies:[l.FREESTAR],factory:({dependencies:i})=>{let{freestar:e}=i;return e.performanceLogger}});I.object({token:l.PREBID_MANAGER,dependencies:[{token:l.WINDOW,alias:"win"}],factory:({dependencies:i})=>{var r,s;let e,t=new Promise(n=>{e=n});return i.win.fsprebid=(r=i.win.fsprebid)!=null?r:{},i.win.fsprebid.que=(s=i.win.fsprebid.que)!=null?s:[],i.win.fsprebid.que.push(()=>{e()}),{get instance(){return i.win.fsprebid},get ready(){return t}}}});I.object({token:l.GAM_MANAGER,dependencies:[{token:l.WINDOW,alias:"win"}],factory:({dependencies:i})=>{let e,t=new Promise(r=>{e=r});return i.win.googletag.cmd.push(()=>{e()}),{get instance(){return i.win.googletag},get ready(){return t}}}});I.object({token:l.AMAZON_MANAGER,dependencies:[{token:l.WINDOW,alias:"win"}],factory:({dependencies:i})=>({get instance(){return i.win.apstag},get ready(){return yp}})});I.object({token:l.IDEAL_AD_STACK_MANAGER,defaultAlias:"idealAdStackManager",factory:()=>j()})});var Jn,vd=f(()=>{Jn=class{constructor({context:e,events:t=[]}){E(this,"_events",[]);this._context=e,t.forEach(r=>this.addEvent(r))}addEvent(e){this._events.push(e)}getJSON(){let e=this._events.reduce((t,r)=>{var s;return t[r.type]=(s=t[r.type])!=null?s:[],t[r.type].push(r.payload),t},{});return w(w({},this._context),e)}get size(){return this._events.length}}});var Td,Rd,Cd,Xn,Od=f(()=>{Td="fs.session",Rd="fs.itf.group",Cd="fs.itf.targeting",Xn="fs.ident"});var xd,wp=f(()=>{me();L();z();Ke();k();Od();xd=class{constructor(){this.session=null,this._init()}_init(){this.session=V({key:Td,type:G.object.type}),(!this.session||!Object.keys(this.session).length)&&(this.session={id:ue()});let t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].flatMap(r=>{let s=U(r);return s?{key:r,value:s}:[]}).reduce((r,{key:s,value:n})=>(r[s]=n,r),{});this.session.utm=t,ge({key:Td,type:G.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){var t;return(t=this.session.utm)==null?void 0:t[e]}};I.class(xd,{token:l.SESSION_STORAGE_MANAGER,defaultAlias:"sessionStorageManager"})});var Pd,vp=f(()=>{L();z();k();me();Ii();vd();Pd=class{constructor({page:e,sessionStorageManager:t,dispensaryData:r}){this._page=e,this._sessionStorageManager=t,this._dispensaryData=r}create({events:e=[]}){let t=this._collectContextInfo();return new Jn({context:t,events:e})}_collectContextInfo(){let{pageId:e,pageViewCount:t,url:r}=this._page||{};return w(w(w({messageId:ue(),referalURL:document.referrer||void 0,pageId:e,url:r,userAgent:navigator.userAgent,pageviewCount:t},this._getDispensaryData()),this._getTestData()),this._getSessionData())}_getSessionData(){let t=Object.fromEntries([["utmSource","utm_source"],["utmMedium","utm_medium"],["utmCampaign","utm_campaign"],["utmTerm","utm_term"],["utmContent","utm_content"]].map(([r,s])=>[r,this._sessionStorageManager.getUTMValue(s)]));return B(w({},t),{sessionId:this._sessionStorageManager.getSessionId()})}_getTestData(){let e=V({key:Hs,type:G.number.type})||0,t=V({key:Lr})||null,r=V({key:Bf})||null;return{testName:t,testGroup:e,testVariantId:r}}_getDispensaryData(){let t=Object.fromEntries(["accountId","siteId","deploymentId","templateVersionId"].map(s=>[s,this._dispensaryData.getValue(s)])),r=this._dispensaryData.getValue("gitHash");return t.templateVersionId==null&&r&&(t.templateVersionId=r),t}};I.class(Pd,{token:l.ANALYTICS_MESSAGE_FACTORY,defaultAlias:"analyticsMessageFactory",dependencies:[l.PAGE,l.SESSION_STORAGE_MANAGER,l.DISPENSARY_DATA]})});var Tp=f(()=>{vd();wp();vp()});var $r,Nd=f(()=>{$r=class extends Error{constructor({message:e,details:t,context:r}){super(e),this.details=t,this.context=r}}});var Dd,Rp=f(()=>{L();k();Ii();Nd();Dd=class{constructor({logger:e,apiHost:t=kf,version:r="v2"}={}){this.apiHost=t,this.version=r,this.url=`${this.apiHost}/${this.version}/c`,this._logger=e,this._logger.setContext(l.DATA_COLLECTOR_API),this._logger.setLevel(80)}send(e){return O(this,null,function*(){var t;if(e){this._logger.log(["Sending data to collector",e]);try{let r=yield fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(r!=null&&r.ok)return;throw r}catch(r){let s={status:(t=r==null?void 0:r.status)==null?void 0:t.toString(),statusText:r==null?void 0:r.statusText},n="Data Collector API Error: ";throw r!=null&&r.status?n+=`Status: ${r==null?void 0:r.status} ${r==null?void 0:r.statusText}`:n+=`Status: ${r.message}`,new $r({message:n,details:s,context:e})}}})}sendBeacon(e){let t=new Blob([JSON.stringify(e)],{type:"application/json"});if(!navigator.sendBeacon(this.url,t)){let s={status:"0",statusText:"Failed to send via sendBeacon"},n="Data Collector API Error: sendBeacon failed to send the data.";throw this._logger.warning([n,s]),new $r({message:n,details:s,context:e})}}};I.class(Dd,{token:l.DATA_COLLECTOR_API,dependencies:[l.LOGGER],defaultAlias:"dataCollectorAPI"})});var Cp=f(()=>{Nd();Rp()});var rr,Op=f(()=>{rr={SILENT:0,CORE:5,MODULE:50,VERBOSE:99}});var ei,Zn,xp=f(()=>{Va();L();Op();k();ei=class ei{constructor(e){var s,n;let t=Ga(e==null?void 0:e.level)?rr.VERBOSE:e.level,r=Ga(e==null?void 0:e.defaultLevel)?rr.VERBOSE:e.defaultLevel;this._level=Math.max(t,rr.SILENT),this._defaultLevel=Math.max(r,rr.SILENT),this._context=(s=e==null?void 0:e.context)!=null?s:"Pubfig",this.id=(n=e==null?void 0:e.id)!=null?n:ei._instancesCount,ei._instancesCount+=1}log(e,t){if(this.level===rr.SILENT)return;let{level:r=this._defaultLevel}=t!=null?t:{};this.level>=r&&console.info(...this._getLogArguments(e,t))}error(e,t){console.error(...this._getArguments(e,t==null?void 0:t.context))}warning(e,t){console.warn(...this._getArguments(e,t==null?void 0:t.context))}info(e,t){console.info(...this._getArguments(e,t==null?void 0:t.context))}setLevel(e){this._defaultLevel=e}get level(){return this._level}setContext(e){this._context=e}createLogger(e,t=this._defaultLevel){return ei._instancesCount+=1,new ei({level:this.level,defaultLevel:t,context:e,id:ei._instancesCount})}_getLogArguments(e,{context:t,styles:r}={}){return[`%c${t!=null?t:this._context}:`,this._getStyles(r),...this._getMessages(e)]}_getStyles(e){return e||`background: hsl(${(150+this.id*30)%360}, 40%, 50%); color: #fff; border-radius: 3px; padding: 3px`}_getMessages(e){return Array.isArray(e)?e:[e]}_getArguments(e,t){let r=Array.isArray(e)?e:[e];return[`${t!=null?t:this._context}: `,...r]}};E(ei,"_instancesCount",0);Zn=ei;I.class(Zn,{token:l.LOGGER,defaultAlias:"logger",injectionMode:$t.FOR_FEATURE,dependencies:[l.CONFIG_MANAGER],factory:({dependencies:{config:i}={}})=>new Zn({level:i.logLevel})})});var Ld,Pp=f(()=>{Ld={INIT:"Init",INIT_COMPLETE:"Init complete",INIT_FAILED:"Init failed"}});var kd=f(()=>{xp();Pp()});var sr,eo=f(()=>{sr={ERROR:"analyticsError"}});var ti,to=f(()=>{ti=class{beforeMessageSend(e,t){t(e)}}});var ro,io,Np=f(()=>{Be();to();ro=class ro extends ti{beforeMessageSend(e,t){let{payload:r}=e;ro.propertiesToUnalias.forEach(s=>{r[s]&&(r[s]=W(r[s]))}),t()}};E(ro,"propertiesToUnalias",["bidder","bidderCode","adapterCode"]);io=ro});var Dp=f(()=>{to();Np()});var so,Lp=f(()=>{to();so=class extends ti{beforeMessageSend({payload:e},t){var r;(r=e.kvps)!=null&&r.length&&(e.kvps=e.kvps.map(([s,n])=>`[${s}=${n}]`)),t()}}});var no,kp=f(()=>{kd();L();eo();Br();k();Dp();It();Lp();no=class{constructor({logger:e,mainQueue:t,errorQueue:r,immediateQueue:s,beaconQueue:n,eventBus:o}){E(this,"_reportError",({payload:e})=>{var t;this._errorQueue.enqueue(new Y({eventName:"MESSAGE_ERROR",eventType:(t=e.details)==null?void 0:t.status,data:{error:e.details,message:e.message,timestamp:new Date().toISOString()}}))});this._logger=e,this._logger.setContext(l.ANALYTICS),this._logger.setLevel(2),this._errorReportingEnabled=Math.random()<=.01,this._mainQueue=t,this._errorQueue=r,this._immediateQueue=s,this._beaconQueue=n,this._middlewares=[],this._eventBus=o,this._topicMap={[Qe.ERROR]:this._errorQueue,[Qe.BEACON]:this._beaconQueue,[Qe.IMMEDIATE]:this._immediateQueue,[Qe.MAIN]:this._mainQueue},this._errorReportingEnabled&&this._eventBus.subscribe(sr.ERROR,this._reportError),this._init()}_init(){this._logger.log(Ld.INIT),this._mainQueue.start(),this._logger.log([Ld.INIT_COMPLETE,"Queue processing started."])}addMiddleware(e){if(!(e instanceof ti))throw new Error("Middleware must be an instance of AnalyticsMiddleware");this._middlewares.includes(e)||this._middlewares.push(e)}removeMiddleware(e){this._middlewares=this._middlewares.filter(t=>t!==e)}track(e){if(!e.type||!e.payload){this._logger.error("Invalid event type. event must be an instance of AnalyticsEvent.");return}let t=this._applyBeforeSendMiddleware(e);if(!t)return;(this._topicMap[t.topic]||this._topicMap[Qe.MAIN]).enqueue(t)}_applyBeforeSendMiddleware(e){let t=this._middlewares.filter(r=>r.beforeMessageSend);if(!t.length)return e;try{let r=()=>{if(!t.length)return;t.shift().beforeMessageSend(e,r)};return r(),e}catch(r){return null}}};I.class(no,{token:l.ANALYTICS,defaultAlias:"analytics",dependencies:[l.LOGGER,l.MAIN_QUEUE,l.ERROR_QUEUE,l.IMMEDIATE_QUEUE,l.BEACON_QUEUE,l.EVENT_BUS],factory:({dependencies:i})=>{let e=new no(i);return e.addMiddleware(new io),e.addMiddleware(new so),e}})});var ii,oo=f(()=>{ii=class{enqueue(){throw new Error("Method not implemented")}}});var ao,Mp=f(()=>{It();oo();eo();ao=class extends ii{constructor({analyticsMessageFactory:t,eventBus:r,logger:s,api:n,batchLimit:o=30,intervalMs:a=500}){super();E(this,"_name","DelayedQueue");this._eventBus=r,this._logger=s,this._messageFactory=t,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[],this._api=n,this._intervalMs=a,this._batchLimit=o,this._isProcessing=!1,this._intervalId=null}enqueue(t){let r=this._queue[this._queue.length-1];if(r&&r.size<this._batchLimit){r.addEvent(t);return}this._queue.push(this._messageFactory.create({events:[t]}))}start(){this._processQueue(),this._intervalId=setInterval(()=>{this._processQueue()},this._intervalMs)}stop(){clearInterval(this._intervalId)}_processQueue(){return O(this,null,function*(){if(this._isProcessing)return;let t=this._queue.shift();if(t!=null&&t.size)try{this._isProcessing=!0,yield this._api.send(t.getJSON())}catch(r){this._logger.warning(["Failed to process queue",r]),this._eventBus.emit(sr.ERROR,r)}finally{this._isProcessing=!1}})}}});var Yr,Bp=f(()=>{eo();oo();Yr=class extends ii{constructor({analyticsMessageFactory:t,eventBus:r,logger:s,api:n,reportErrors:o=!0}){super();E(this,"_name","ImmediateQueue");this._eventBus=r,this._logger=s,this._messageFactory=t,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[],this._api=n,this._reportErrors=o,this._isProcessing=!1}enqueue(t){this._queue.push(this._messageFactory.create({events:[t]})),this._processQueue()}_processQueue(){return O(this,null,function*(){for(;this._queue.length;)try{let t=this._queue.shift();if(!(t!=null&&t.size))continue;yield this._api.send(t.getJSON())}catch(t){this._logger.warning(["Failed to process queue",t]),this._reportErrors&&this._eventBus.emit(sr.ERROR,t)}})}}});var jr,Fp=f(()=>{oo();jr=class extends ii{constructor({analyticsMessageFactory:t,logger:r,api:s}){super();E(this,"_name","BeaconQueue");this._messageFactory=t,this._api=s,this._logger=r,this._logger.setContext(`Analytics Queue: ${this._name}`),this._logger.setLevel(2),this._queue=[]}enqueue(t){let r=this._messageFactory.create({events:[t]});this._sendBeacon(r)}_sendBeacon(t){try{this._api.sendBeacon(t.getJSON())}catch(r){this._logger.warning(["Failed to send beacon",r])}}}});var Up=f(()=>{Mp();Bp();Fp()});var Fd,lo,co,Gp=f(()=>{L();Up();It();k();Fd=[l.EVENT_BUS,l.LOGGER,{token:l.DATA_COLLECTOR_API,alias:"api"},l.ANALYTICS_MESSAGE_FACTORY],lo=class extends ao{constructor(){super(...arguments);E(this,"_name",l.MAIN_QUEUE)}},co=class extends Yr{constructor(){super(...arguments);E(this,"_name",l.IMMEDIATE_QUEUE)}};I.class(lo,{token:l.MAIN_QUEUE,defaultAlias:"mainQueue",dependencies:Fd,factory:({dependencies:i})=>new lo(B(w({},i),{batchLimit:30,intervalMs:500}))});I.class(co,{token:l.ERROR_QUEUE,defaultAlias:"errorQueue",dependencies:Fd,factory:({dependencies:i})=>new co(B(w({},i),{reportErrors:!1}))});I.class(Yr,{token:l.IMMEDIATE_QUEUE,defaultAlias:"immediateQueue",dependencies:Fd});I.class(jr,{token:l.BEACON_QUEUE,defaultAlias:"beaconQueue",dependencies:[l.ANALYTICS_MESSAGE_FACTORY,l.LOGGER,l.EVENT_BUS,{token:l.DATA_COLLECTOR_API,alias:"api"}],factory:({dependencies:i})=>new jr({analyticsMessageFactory:i.analyticsMessageFactory,api:i.api,eventBus:i.eventBus,logger:i.logger})})});var nr=f(()=>{Tp();It();Cp();Ot();kp();Gp()});var qp=pi((fo,Vp)=>{(function(i,e){typeof fo=="object"?Vp.exports=fo=e(Zs()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(fo,function(i){return function(e){var t=i,r=t.lib,s=r.WordArray,n=r.Hasher,o=t.algo,a=[],d=[];(function(){function p(A){for(var S=e.sqrt(A),_=2;_<=S;_++)if(!(A%_))return!1;return!0}function m(A){return(A-(A|0))*4294967296|0}for(var g=2,h=0;h<64;)p(g)&&(h<8&&(a[h]=m(e.pow(g,1/2))),d[h]=m(e.pow(g,1/3)),h++),g++})();var c=[],u=o.SHA256=n.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(p,m){for(var g=this._hash.words,h=g[0],A=g[1],S=g[2],_=g[3],y=g[4],N=g[5],x=g[6],q=g[7],M=0;M<64;M++){if(M<16)c[M]=p[m+M]|0;else{var Ae=c[M-15],le=(Ae<<25|Ae>>>7)^(Ae<<14|Ae>>>18)^Ae>>>3,Ce=c[M-2],Ye=(Ce<<15|Ce>>>17)^(Ce<<13|Ce>>>19)^Ce>>>10;c[M]=le+c[M-7]+Ye+c[M-16]}var je=y&N^~y&x,Mt=h&A^h&S^A&S,Bt=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),pt=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),wt=q+pt+je+d[M]+c[M],vt=Bt+Mt;q=x,x=N,N=y,y=_+wt|0,_=S,S=A,A=h,h=wt+vt|0}g[0]=g[0]+h|0,g[1]=g[1]+A|0,g[2]=g[2]+S|0,g[3]=g[3]+_|0,g[4]=g[4]+y|0,g[5]=g[5]+N|0,g[6]=g[6]+x|0,g[7]=g[7]+q|0},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,h=p.sigBytes*8;return m[h>>>5]|=128<<24-h%32,m[(h+64>>>9<<4)+14]=e.floor(g/4294967296),m[(h+64>>>9<<4)+15]=g,p.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var p=n.clone.call(this);return p._hash=this._hash.clone(),p}});t.SHA256=n._createHelper(u),t.HmacSHA256=n._createHmacHelper(u)}(Math),i.SHA256})});var Hp=pi((uo,zp)=>{(function(i,e){typeof uo=="object"?zp.exports=uo=e(Zs()):typeof define=="function"&&define.amd?define(["./core"],e):e(i.CryptoJS)})(uo,function(i){return function(){var e=i,t=e.lib,r=t.WordArray,s=t.Hasher,n=e.algo,o=[],a=n.SHA1=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,c){for(var u=this._hash.words,p=u[0],m=u[1],g=u[2],h=u[3],A=u[4],S=0;S<80;S++){if(S<16)o[S]=d[c+S]|0;else{var _=o[S-3]^o[S-8]^o[S-14]^o[S-16];o[S]=_<<1|_>>>31}var y=(p<<5|p>>>27)+A+o[S];S<20?y+=(m&g|~m&h)+1518500249:S<40?y+=(m^g^h)+1859775393:S<60?y+=(m&g|m&h|g&h)-1894007588:y+=(m^g^h)-899497514,A=h,h=g,g=m<<30|m>>>2,m=p,p=y}u[0]=u[0]+p|0,u[1]=u[1]+m|0,u[2]=u[2]+g|0,u[3]=u[3]+h|0,u[4]=u[4]+A|0},_doFinalize:function(){var d=this._data,c=d.words,u=this._nDataBytes*8,p=d.sigBytes*8;return c[p>>>5]|=128<<24-p%32,c[(p+64>>>9<<4)+14]=Math.floor(u/4294967296),c[(p+64>>>9<<4)+15]=u,d.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});e.SHA1=s._createHelper(a),e.HmacSHA1=s._createHmacHelper(a)}(),i.SHA1})});var He,po,$p,Yp,jp,Kp,eI,tI,Wp,Qp,Jp,Xp,Ud,or,Zp,Kr,em,tm,im,rm,Gd,Wr,Vd,xt,sm,nm,om,am,dm,lm,Pt,cm,H,fm,um,pm,mm,hm,Qr,gm,Jr,_m,x0,Nt=f(()=>{He={ALL_DISABLED:"disabled",ALL_ENABLED:"enabled",PARTNER_ONLY:"partner-only",TEST_PARTNERS:"test"},po={criteo:{itfPosition:0,itfTestPercent:.95,enabled:void 0},uid2:{itfPosition:1,itfTestPercent:.95,enabled:void 0},fabrickId:{itfPosition:2,itfTestPercent:.95,enabled:void 0},hadronId:{itfPosition:3,itfTestPercent:.95,enabled:void 0},id5Id:{itfPosition:4,itfTestPercent:.95,enabled:void 0},pairId:{itfPosition:5,itfTestPercent:.95,enabled:void 0},"33acrossId":{itfPosition:6,itfTestPercent:.95,enabled:void 0},sharedId:{itfPosition:7,itfTestPercent:.95,enabled:void 0},connectid:{itfPosition:8,itfTestPercent:.95,enabled:void 0},identityLink:{itfPosition:9,itfTestPercent:.95,enabled:void 0},liveIntentId:{itfPosition:11,itfTestPercent:.95,enabled:void 0},unifiedId:{itfPosition:12,itfTestPercent:.95,enabled:void 0},intentIqId:{itfPosition:13,itfTestPercent:.95,enabled:!0},carbon:{itfPosition:14,itfTestPercent:.95,enabled:void 0},airgrid:{itfPosition:15,itfTestPercent:.95,enabled:void 0},linkedInAdsId:{itfPosition:16,itfTestPercent:.95,enabled:void 0},symitri:{itfPosition:17,itfTestPercent:.95,enabled:void 0},gamera:{itfPosition:18,itfTestPercent:.95,enabled:void 0},optable:{itfPosition:19,itfTestPercent:.95,enabled:void 0}},$p=.01,Yp=.01,jp=` @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap'); .__fs-modal__overlay { position: absolute; z-index: 10000; top: 0; right: 0; bottom: 0; left: 0; background-color: rgba(255,255,255,0.75); display: flex; align-items: center; justify-content: center; } .__fs-modal { font-family: 'Varela Round', sans-serif !important; font-size: 16px; width: 45vw; border-radius: 5px; background-color: white; box-shadow: 0 10px 25px 0 rgb(0 195 137 / 50%); border: 1px solid rgb(0 195 137); } .__fs-modal__content { margin: 1rem; padding: 1rem; height: calc(100% - 2rem); } .__fs-modal__header { width: 100%; text-align: left; font-size: 2rem; } h2.__fs-modal__header { border-bottom: 3px solid rgb(0 195 137); margin-bottom: 1rem; } h3.__fs-modal__header { font-size: 1.5rem; } .__fs-modal__description { width: 100%; font-size: 1rem; margin-bottom: .75rem; } .__fs-modal__content span { width: 100%; font-size: 1.25rem; display: flex; align-items: center; justify-content: space-between; } .__fs-modal__content span input, .__fs-modal__content span button { width: 100%; font-size: 1.25em; padding: .25rem; } .__fs-modal__content span button { border: 0; border-radius: 5px; background-color: rgb(0 195 137); color: white; font-family: 'Varela Round', sans-serif !important; } @media only screen and (min-device-width : 320px) and (max-device-width : 768px) { .__fs-modal { width: 100vw; border-radius: 0; background-color: white; box-shadow: initial; border: 0; position: fixed; top: 0; bottom: 0; } } `,Kp=`<div class="__fs-modal"><form class="__fs-modal__content"><h2 class="__fs-modal__header">Welcome!</h2><p class="__fs-modal__description">Our trusted advertising partners using the UID identifier and/or encrypted email addresses are committed to delivering relevant advertising that also respects your choice. Advertising enables access to your favorite content across the internet.</p><h3 class="__fs-modal__header">Opt-Out</h3><p class="__fs-modal__description">Your choice to Opt-Out will indicate to trusted advertising partners that you no longer wish to receive targeted advertising based on your UID/email. The scope of this Opt-Out is limited to this site which use UID/email. For choice with respect to advertising based on cookies, please visit https://optout.aboutads.info. To opt out of UID across all sites please visit <a href="https://transparentadvertising.org/" target="_blank">https://transparentadvertising.org/</a></p><p class="__fs-modal__description">Note: this choice may limit your ability to access ad supported content. You may be asked to Opt-In again in the future to access such content.</p><span><button type="submit" id="__fs-model__submit">OPT OUT</button>&nbsp; <button id="__fs-model__cancel">CANCEL</button></span></form></div>`,eI="serverPublicKey",tI="subscriptionId",Wp="emailHash",Qp=[eI,tI],Jp="fs_liveintent",Xp="liveIntentId",Ud=.95,or="carbon",Zp="4d97a662ad",Kr="airgrid",em="PV483g",tm="FpZbsa",im="cdeffa51-8532-473f-8ba0-200d751fd73e",rm="https://pb-ing.ccgateway.net",Gd={PARENT_ID:"parentId",ENDPOINT:"endpoint",ANALYTICS_ENDPOINT:"analyticsEndpoint"},Wr="hadronId",Vd=474,xt="symitri",sm="freestar.dap.symitri.net",nm="x1",om="compositeid",am="HEM:",dm=708,lm="https://prodsymitriapp.azurewebsites.net/v1/impression",Pt="gamera",cm=[Kr,or,xt,Pt],H={FABRICK_ID:"fabrickId",CONNECT_ID:"connectid",ID5_ID:"id5Id",LIVEINTENT_ID:"liveIntentId",UID2:"uid2",IDENTITY_LINK:"identityLink",AMAZON:"amazon",CRITEO:"criteo",OPTABLE:"optable"},fm=40,um=64,pm=32,mm=2,hm=106,Qr="optable",gm="https://freestar.solutions.cdn.optable.co/public-assets/freestar-sdk.js",Jr="intentIqId",_m="https://a.pub.network/core/intentIQ/20250226/IIQUniversalID.js",x0=H.CONNECT_ID});var At,qd=f(()=>{re();At=class{static normalizeEmail(e){if(!(e!=null&&e.length))return;let t=e.trim().toLowerCase();if(t.includes(" "))return;let r=this.splitEmailIntoAddressAndDomain(t);if(!r)return;let{address:s,domain:n}=r,o=this.isGmail(n),a=this.normalizeAddressPart(s,o,o);return a?`${a}@${n}`:void 0}static bytesToBase64(e){let t=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(t)}static hashUID2(e){let t=new Uint8Array(e.match(/[\da-f]{2}/gi).map(function(r){return parseInt(r,16)}));return this.bytesToBase64(new Uint8Array(t))}static splitEmailIntoAddressAndDomain(e){let t=e.split("@");if(!(t.length!==2||t.some(r=>r==="")))return{address:t[0],domain:t[1]}}static isGmail(e){return e===this.GMAIL_DOMAIN}static dropExtension(e){return e.split(this.EMAIL_EXTENSION_SYMBOL)[0]}static normalizeAddressPart(e,t,r){let s=e;return t&&(s=rf(s,this.EMAIL_DOT,"")),r&&(s=this.dropExtension(s)),s}};E(At,"EMAIL_EXTENSION_SYMBOL","+"),E(At,"EMAIL_DOT","."),E(At,"GMAIL_DOMAIN","gmail.com")});var Xr,zd=f(()=>{Xr={UUID:"fs_uuid",REFRESH:"fsrefresh",BID:"fsbid",PLACEMENT_NAME:"fs_placementName",REBID:"fsrebid",PRODUCT:"fs_ad_product",FLOORS_ID:"floors_id",FLOORS_HOUR:"floors_hour",ITF:"fsitf"}});var Hd,Em,ym=f(()=>{Nt();Hd=(i,e,t)=>(i==null?void 0:i.length)===e?{[t]:i}:{},Em=i=>{let e=w(w(w({},Hd(i==null?void 0:i.sha256,um,"sha256")),Hd(i==null?void 0:i.sha1,fm,"sha1")),Hd(i==null?void 0:i.md5,pm,"md5"));return e.sha256||console.warn("Limited support with ID partners due to invalid sha256",i==null?void 0:i.sha256),e}});var Im,Sm,bm,$d,Am=f(()=>{Im=Di(qp()),Sm=Di(Hp()),bm=Di(qa());Nt();qd();zd();z();L();k();nr();re();bi();ym();me();$d=class{constructor({identityConfig:i,hashedEmailProviderManager:e,realtimeProvidersManager:t,logger:r,analytics:s,win:n=window}){E(this,"targeting","----------------------------------------");E(this,"hashedEmailsPassed",!1);E(this,"messageSent",!1);E(this,"prebidNonRealTimeProvidersConfig",null);this._window=n,this._gam=n.googletag,this._identityConfig=i,this._analytics=s,this._logger=r,this._logger.setContext(l.IDENTITY_MANAGER),this.hashedEmailProviders=e,this.realtimeProviders=t,this._populatePrebidNonRealTimeProvidersConfig(),this._initializeLiveIntentHIRO()}init(){var i;this._logger.log((i=this._identityConfig.identityProviders)!=null&&i.length?`Eligible providers: ${this._identityConfig.identityProviders.map(e=>e.slug)}`:"No Eligible Providers"),this.hashedEmailProviders.initializeProviders(),this.realtimeProviders.loadScripts(),this._createTargeting(),this._logger.log(`Targeting: ${JSON.stringify(this.targeting)}`),this._setGamTargeting(),this._sendEventMessages(this._identityConfig.providersRules)}_hasIdentitySet(){return!!this._identityConfig.identityData&&!!Object.keys(this._identityConfig.identityData).length}setIdentity({email:i,hashes:e}={}){return i||e?(i&&gp({email:i})&&this._setIdentityFromEmail(i),e&&this._setIdentityFromHashes(e),this._sendEventMessages(this._identityConfig.providersRules),!0):(this._logger.error("setIdentity requires at least one parameter: email or hashes"),!1)}_updateProviders(i){this.hashedEmailProviders.updateAllProviders(i,!1)}_setIdentityFromHashes(i){let e=Em(i);if(!Object.keys(e).length)return console.warn("Invalid hashes: ",i),!1;this._identityConfig.setIdentityData(e),this._updateProviders(e)}_setIdentityFromEmail(i){let e=At.normalizeEmail(i),t={sha256:(0,Im.default)(e).toString(),sha1:(0,Sm.default)(e).toString(),md5:(0,bm.default)(e).toString()};this._identityConfig.setIdentityData(t),this._updateProviders(t)}showModal(){Yn(jp);let i=b({classList:["__fs-modal__overlay"]});i.innerHTML=Kp,this._window.document.body.appendChild(i);let e=this._window.document.getElementById("__fs-model__submit"),t=this._window.document.getElementById("__fs-model__cancel");e.onclick=r=>O(this,null,function*(){r.preventDefault(),this._identityConfig.removeIdentityDataFromSessionStorage(),this.hashedEmailProviders.updateAllProviders({},this._identityConfig.testGroup,!1),i.remove(),Ne({name:"identityModalOptOut",detail:!0})}),t.onclick=r=>{r.preventDefault(),i.remove(),Ne({name:"identityModalClosed",detail:!0})}}addOptOut({selector:i="#freestarOptOutLink",element:e=!1}){if(e=e!=null?e:document.querySelector(i),!e)return!1;e.onclick=t=>{t.preventDefault(),this.showModal()}}_createTargeting(){if(this._identityTrackingDisabled){this.targeting="0";return}let i=this._identityConfig.identityProviders.filter(({slug:e})=>e).map(({slug:e})=>e.toLowerCase());Object.entries(this._identityConfig.providersRules).forEach(([e,t])=>{if(i.includes(e.toLowerCase())&&typeof t.enabled=="boolean"){let r=this.targeting.split("");r[t.itfPosition]=t.enabled?"Y":"N",this.targeting=r.join("")}})}_setGamTargeting(){if(this._gam.pubads().setTargeting(Xr.ITF,this.targeting),this.targeting==="0")return;let i=po[Xp].itfPosition||-1,e=this.targeting.length>0&&this.targeting[i];["Y","N"].includes(e)&&this._gam.pubads().setTargeting(Jp,e)}get _identityTrackingDisabled(){return!(this._identityConfig.itfY||this._identityConfig.itf_n)&&this._identityConfig.testGroup===He.ALL_DISABLED}_normalizeStorageConfig(config={}){let{refreshInSeconds,expires}=config!=null?config:{};try{return B(w({},config),{refreshInSeconds:eval(refreshInSeconds),expires:eval(expires)})}catch(i){return config}}_populatePrebidNonRealTimeProvidersConfig(){if(this._identityTrackingDisabled)return[];this.prebidNonRealTimeProvidersConfig=this._identityConfig.identityProviders.filter(({slug:i})=>!cm.includes(i)&&this._identityConfig.checkIfProviderEnabled(i)&&this._identityConfig.checkIfProviderIsAllowedInGeo(i)&&Qr!==i&&Jr!==i).map(({slug:i,params:e,storage:t})=>{var s,n,o,a,d,c,u,p;let r=B(w({name:i},Object.keys(e||{}).length!==0?{params:e}:{}),{storage:w({},this._normalizeStorageConfig(t))});switch(i){case"uid2":if((s=this._identityConfig.identityData)!=null&&s.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}break;case"merkleId":r.params=Object.assign(r.params,{sv_domain:window.location.hostname});break;case"pairId":if((n=r.params)!=null&&n.liveramp){let m=ha("liveramp",r.params);r.params=Object.assign(r.params,{liveramp:m})}break;case"liveIntentId":if((o=r.params)!=null&&o.requestedAttributesOverrides){let m=ha("requestedAttributesOverrides",r.params);if(typeof m=="object"&&!Array.isArray(m)&&m!==null&&Object.keys(m).forEach(g=>{let h=["nonId","uid2","medianet","magnite","bidswitch","pubmatic","openx","sovrn","index","thetradedesk","triplelift","vidazoo","sonobi","sharethrough"];m[g]=h.includes(g)&&m[g]==="true"}),r.params=Object.assign(r.params,{requestedAttributesOverrides:m}),(a=this._identityConfig.identityData)!=null&&a.sha1||(d=this._identityConfig.identityData)!=null&&d.md5){let g=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);g.emailHash&&(r.params.emailHash=g.params.emailHash)}}break;case"connectid":if((c=this._identityConfig.identityData)!=null&&c.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}else{let{pixelId:m}=r.params||{};if(!m)break;let g=V({key:"fs.config",type:G.object.type}),h=g==null?void 0:g.fsuid,A=w({pixelId:m},h?{puid:h}:{});Object.assign(r.params,A)}break;case H.FABRICK_ID:if((u=this._identityConfig.identityData)!=null&&u.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}break;case H.ID5_ID:if((p=this._identityConfig.identityData)!=null&&p.sha256){let m=this.hashedEmailProviders.getProviderConfigByName(i,this._identityConfig.identityData);r.params=Object.assign(r.params,m.params)}break}return r})}_sendEventMessages(i){var r,s;let e={};i&&typeof i=="object"&&!Array.isArray(i)&&(e=Object.keys(i).reduce((n,o)=>(i[o].enabled?n.available.push(o):n.unavailable.push(o),n),{available:[],unavailable:[]}));let t=e&&(((r=e.available)==null?void 0:r.length)||((s=e.unavailable)==null?void 0:s.length));!this.messageSent&&this._hasIdentitySet()&&t&&(this._analytics.track(new Y({eventType:"IDENTITY",eventName:"HASHED_EMAIL_PROVIDERS",data:e})),this.messageSent=!0)}_initializeLiveIntentHIRO(){this._window.liModuleEnabled===void 0&&(this._window.liModuleEnabled=Math.random()<Ud,this._window.liTreatmentRate=Ud)}};I.class($d,{token:l.IDENTITY_MANAGER,dependencies:[l.IDENTITY_CONFIG,l.HASHED_EMAIL_PROVIDERS,l.REALTIME_PROVIDERS,l.LOGGER,l.ANALYTICS,l.OPTABLE_MANAGER,l.IIQ_MANAGER,{token:"window",alias:"win"}]})});var mo,Yd=f(()=>{mo=({getIsFound:i,callback:e,timeout:t=5e3,frequency:r=300})=>{let s=0,n=i();if(n){e(n);return}let o=setInterval(()=>{s=s+1;let a=i();(a||s>=t/r)&&(e(a),clearInterval(o))},r)}});var ho,wm=f(()=>{k();ie();L();Nt();Yd();ho=class{constructor({dispensaryData:e,logger:t,identityConfig:r,prebidManager:s,gamManager:n,win:o=window}){E(this,"_atsKey","ats");E(this,"version",2);E(this,"atsEnabled",!1);this._window=o,this._identityConfig=r,this._dispensaryData=e,this._prebidManager=s,this._gamManager=n,this._instance=null,this._logger=t,this._logger.setContext(l.ATS_MANAGER),this._init()}_init(){if(!this._identityConfig.checkIfProviderEnabled(H.IDENTITY_LINK)||!this._isGeoAllowed)return;this.atsEnabled=this._dispensaryData.fsdata.atsEnabledV2,this.atsEnabled&&(this._gamManager.instance.pubads().setTargeting("atsd",[]),this._loadScript()),(this._dispensaryData.fsdata.atsAnalyticsEnabled!==null&&this._dispensaryData.fsdata.atsAnalyticsEnabled!==void 0?this._dispensaryData.fsdata.atsAnalyticsEnabled:this._dispensaryData.fsdata.atsEnabledV2)&&this._enablePrebidAnalytics()}get _isGeoAllowed(){var t;let e=(t=this._dispensaryData.locData)==null?void 0:t.iso;return e?this._identityConfig.checkIfProviderIsAllowedInGeo(H.IDENTITY_LINK)?!0:(this._logger.log(`LiveRamp ATS does not run for users in ${e}.`,{level:10}),!1):(this._logger.log("LiveRamp ATS does not run for users "+(e?`in ${e}.`:"without location data."),{level:10}),!1)}getConfigV2(){let e=this._identityConfig.identityData;return e?{id:Object.values(e),type:"emailHashes"}:{}}_enablePrebidAnalytics(){var r,s;let e=this._identityConfig.identityProviders.find(n=>n.id===mm),t=(s=(r=e==null?void 0:e.params)==null?void 0:r.pid)!=null?s:hm;this._prebidManager.instance.enableAnalytics([{provider:"atsAnalytics",options:{pid:t}}])}get _atsURL(){return`https://launchpad-wrapper.privacymanager.io/${this._dispensaryData.fsdata.atsV2ConfigUUID}/launchpad-liveramp.js`}_loadScript(){se(this._atsURL,()=>{mo({getIsFound:()=>{var e;return!!((e=this._window[this._atsKey])!=null&&e.setAdditionalData)},callback:()=>{this._instance=this._window[this._atsKey],this.setConfig()},timeout:60*1e3})})}setConfig(){var t;let e=this.getConfigV2();Object.keys(e).length!==0&&((t=this._instance)==null||t.setAdditionalData(e))}};I.class(ho,{token:l.ATS_MANAGER,dependencies:[l.DISPENSARY_DATA,{token:"window",alias:"win"},l.LOGGER,l.IDENTITY_CONFIG,l.PREBID_MANAGER,l.GAM_MANAGER],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield Promise.all([i.prebidManager.ready,i.gamManager.ready]),new ho(w({},i))})})});var go,vm=f(()=>{Nt();qd();L();k();me();go=class{constructor({identityConfig:e,dispensaryData:t,atsManager:r,prebidManager:s,amazonManager:n,win:o=window}){this._prebid=s,this._amazon=n,this._ats=r,this._identityConfig=e,this._dispensaryData=t,this._window=o}getProviderConfigByName(e,t={}){switch(e){case H.FABRICK_ID:return this._getFabrickConfig(t);case H.CONNECT_ID:return this._getYahooConfig(t);case H.ID5_ID:return this._getID5Config(t);case H.LIVEINTENT_ID:return this._getLiveIntentConfig(t);case H.UID2:return this._getUid2Config(t);case H.CRITEO:return this._getCriteoConfig(t);default:return{}}}updateAllProviders(e={},t){if(!(!this._identityConfig.testGroup||this._identityConfig.testGroup===He.ALL_DISABLED)){if(this._hasAmazonNetwork&&this._identityConfig.checkIfProviderEnabled(H.AMAZON)&&this._hasSha256(e)&&this._updateAmazon(e,t),this._identityConfig.checkIfProviderEnabled(H.IDENTITY_LINK)&&this._updateATS(),this._identityConfig.checkIfProviderEnabled(H.FABRICK_ID)&&this._updatePrebidUserSyncConfig(this._getFabrickConfig(e)),this._identityConfig.checkIfProviderEnabled(H.CONNECT_ID)&&this._updatePrebidUserSyncConfig(this._getYahooConfig(e)),this._identityConfig.checkIfProviderEnabled(H.ID5_ID)&&this._updatePrebidUserSyncConfig(this._getID5Config(e)),this._identityConfig.checkIfProviderEnabled(H.LIVEINTENT_ID)&&this._updatePrebidUserSyncConfig(this._getLiveIntentConfig(e)),this._identityConfig.checkIfProviderEnabled(H.UID2)&&this._updatePrebidUserSyncConfig(this._getUid2Config(e)),this._identityConfig.checkIfProviderEnabled(H.CRITEO)){let r=this._getCriteoConfig(e);r&&this._prebid.instance.setBidderConfig(r,!0)}if(this._identityConfig.checkIfProviderEnabled(H.OPTABLE)){let r=this._getOptableConfig(e);if(r)try{window.optable=window.optable||{cmd:[]},window.optable.cmd.push(()=>{var s,n;(n=(s=window.optable)==null?void 0:s.freestar_auth)==null||n.identify("e:"+r)})}catch(s){console.warn(s)}}this._prebid.instance.refreshUserIds()}}initializeProviders(){if(this._hasSha256(this._identityConfig.identityData)&&this._identityConfig.testGroup!==He.ALL_DISABLED&&this._hasAmazonNetwork&&this._initializeAmazon(this._identityConfig.identityData),this._identityConfig.checkIfProviderEnabled(H.CRITEO)){let e=this._getCriteoConfig(this._identityConfig.identityData);e&&this._prebid.instance.setBidderConfig(e,!0)}}_hasSha256(e){return typeof(e==null?void 0:e.sha256)!="undefined"}get _hasAmazonNetwork(){return this._dispensaryData.fsdata.networks.find(({slug:e})=>e===H.AMAZON)}_initializeAmazon(e){this._amazon.ready.then(()=>{var t;(t=this._amazon.instance)==null||t.renewId({hashedRecords:[{type:"email",record:e.sha256}]})})}_getConfigBySlug(e){return this._identityConfig.identityProviders.find(({slug:t})=>t===e)}_getCriteoConfig(e){if(e!=null&&e.sha256||e!=null&&e.md5)try{return{bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:this._window.location.hostname,uids:[...e.md5?[{id:e.md5,atype:3,ext:{stype:"hemmd5"}}]:[],...e.sha256?[{id:e.sha256,atype:3,ext:{stype:"hemsha256"}}]:[]]}]}}}}}}}catch(t){return}}_getFabrickConfig(e){if(this._dispensaryData.locData.iso){let r=this._getConfigBySlug(H.FABRICK_ID);if(this._hasSha256(e)&&r)return{name:H.FABRICK_ID,params:B(w({},r.params),{e:e.sha256}),storage:r.storage}}return{}}_getYahooConfig(e){let t=this._getConfigBySlug(H.CONNECT_ID),r=V({key:"fs.config",type:G.object.type}),s=r&&r.fsuid?r.fsuid:void 0;return this._hasSha256(e)&&t?{name:t.slug,params:w(B(w({},t.params),{he:e.sha256}),s?{puid:s}:{}),storage:t.storage}:{}}_getID5Config(e){var r,s;let t=(s=(r=this._getConfigBySlug(H.ID5_ID))==null?void 0:r.params)==null?void 0:s.partner;if(this._hasSha256(e)&&t){let n={1:e.sha256},o=Object.keys(n).map(d=>d+"="+n[d]).join("&"),a=btoa(o);return{name:H.ID5_ID,params:{partner:t,pd:a}}}return{}}_getLiveIntentConfig(e){var s,n;let t=this._getConfigBySlug(H.LIVEINTENT_ID),r=(n=(s=e==null?void 0:e.sha1)!=null?s:e==null?void 0:e.sha256)!=null?n:e==null?void 0:e.md5;if(typeof r!="undefined"&&t)try{return{name:H.LIVEINTENT_ID,params:B(w({},t.params),{emailHash:r}),storage:t.storage}}catch(o){return{}}return{}}_getUid2Config(e){let t=this._getConfigBySlug(H.UID2);return!Qp.every(s=>!!(t!=null&&t.params[s]))||!this._hasSha256(e)?{}:{name:H.UID2,params:B(w({},t.params),{[Wp]:At.hashUID2(e.sha256)}),storage:t.storage}}_getOptableConfig(e){return this._hasSha256(e)?e.sha256:null}_updatePrebidUserSyncConfig(e){if(Object.keys(e).length===0)return;let t=this._prebid.instance.getConfig("userSync"),r=t.userIds.find(({name:s})=>s.toLowerCase()===e.name.toLowerCase());if(r){let s=t.userIds.filter(({name:n})=>n.toLowerCase()!==e.name.toLowerCase());t.userIds=[...s,w(w({},r),e)],this._prebid.instance.mergeConfig({userSync:t})}}_updateAmazon(e,t){this._amazon.ready.then(()=>{var r;(r=this._amazon.instance)==null||r.updateId({optOut:t,hashedRecords:[{type:"email",record:e.sha256}]})})}_updateATS(){this._window.addEventListener("pairIdEnvelopePresent",()=>{this._prebid.instance.refreshUserIds()}),this._window.addEventListener("lrEnvelopePresent",()=>{this._prebid.instance.refreshUserIds()}),this._ats.setConfig()}};I.class(go,{token:l.HASHED_EMAIL_PROVIDERS,dependencies:[l.IDENTITY_CONFIG,l.DISPENSARY_DATA,l.ATS_MANAGER,l.PREBID_MANAGER,l.AMAZON_MANAGER,{token:"window",alias:"win"}],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new go(i)})})});var _o,Tm=f(()=>{Nt();re();L();k();_o=class{constructor({identityConfig:e,dispensaryData:t,prebidManager:r,logger:s,win:n=window}){E(this,"HADRON_NAME","_hadron");E(this,"HADRON_SRC","https://cdn.hadronid.net/hadron.js");E(this,"GAMERA_SRC","https://metrics.rapidedge.io/gamera.js?ltv=1&audience=1&tpcs=1&partner=freestar");E(this,"prebidAnalyticProviders",[]);E(this,"prebidRealTimeDataProviders",[]);this._window=n,this._logger=s,this._logger.setContext(l.REALTIME_PROVIDERS),this._identityConfig=e,this._prebidManager=r,this._dispensaryData=t,this._carbonInit(),this._hadronInit(),this._airgridInit(),this._permutiveInit(),this._gameraInit()}_getIdentityProviderConfigBySlug(e){return this._identityConfig.identityProviders.find(t=>(t==null?void 0:t.slug)===e)}_getConfigValue(e,t){if(e.params=e.params||{},!(ga(e.params[t])||e.params[t]===""))return e.params[t]}_getConfigValueOrDefault(e,t,r){return this._getConfigValue(e,t)||r}_getHadronId(e,t){let r=this._getConfigValue(e,"partnerId");return ga(r)||Number.isNaN(r)?t:typeof r!="number"&&!Number.isNaN(Number(r))?Number(r):r}_getUserIdValue(e,t){var r,s,n,o,a,d,c,u;if(this._identityConfig.checkIfProviderEnabled(e)&&this._identityConfig.checkIfProviderIsAllowedInGeo(e)){let p=(a=(o=(n=(s=(r=this._prebidManager.instance.getConfig())==null?void 0:r.userSync)==null?void 0:s.userIds)==null?void 0:n.find(({name:m})=>m===e))==null?void 0:o.storage)==null?void 0:a.name;return p?t?(c=(d=this._prebidManager.instance.getUserIds())==null?void 0:d[p])==null?void 0:c[t]:(u=this._prebidManager.instance.getUserIds())==null?void 0:u[p]:null}}_loadHadronScript(){let e=this._getIdentityProviderConfigBySlug(Wr);if(!(e&&this._identityConfig.checkIfProviderEnabled(Wr)))return;let t=this._getConfigValueOrDefault(e,"partnerId",Vd);(function(r,s,n,o,a,d,c){r[d]=r[d]||function(){(r[d].q=r[d].q||[]).push(arguments)},r[d]({config:{dm:c}});let u=s.createElement(n);s.async=!0,u.src=o+"?url="+encodeURIComponent(r.location.href)+"&ref="+encodeURIComponent(s.referrer)+"&_it=freestar&partner_id="+a+"&ha="+d;let p=s.getElementsByTagName(n)[0];p.parentNode.insertBefore(u,p)})(window,document,"script",this.HADRON_SRC,t,this.HADRON_NAME,!0)}_carbonInit(){let e=this._getIdentityProviderConfigBySlug(or);if(!e||!this._identityConfig.checkIfProviderEnabled(or)||!this._identityConfig.checkIfProviderIsAllowedInGeo(or))return;let t=this._getConfigValueOrDefault(e,Gd.PARENT_ID,Zp);if(!t)return;let r=this._getConfigValueOrDefault(e,Gd.ANALYTICS_ENDPOINT,rm);this.prebidAnalyticProviders.push({provider:or,options:{parentId:t,endpoint:r}})}_hadronInit(){let e=this._getIdentityProviderConfigBySlug(Wr);if(e&&this._identityConfig.checkIfProviderEnabled(Wr)){let t=this._getHadronId(e,"partnerId")||Vd;t&&this.prebidRealTimeDataProviders.push({name:"hadron",waitForIt:!0,params:{partnerId:t}})}}_airgridInit(){let e=this._getIdentityProviderConfigBySlug(Kr);if(e&&this._identityConfig.checkIfProviderEnabled(Kr)){let t=this._getConfigValueOrDefault(e,"accountId",em),r=this._getConfigValueOrDefault(e,"publisherId",tm),s=this._getConfigValueOrDefault(e,"apiKey",im),n={name:Kr,waitForIt:!0,params:{apiKey:s,accountId:t,publisherId:r}},o=this._getConfigValue(e,"bidders");o&&(n.params.bidders=o.split(",").map(a=>a.trim())),this.prebidRealTimeDataProviders.push(n)}}_permutiveInit(){this._dispensaryData.fsdata.permutiveEnabled&&this.prebidRealTimeDataProviders.push({name:"permutive",waitForIt:!0,params:{acBidders:[this._dispensaryData.fsdata.permutiveBidders.split(",")]}})}get waitForUserSync(){return!!(this._getIdentityProviderConfigBySlug(xt)&&this._identityConfig.checkIfProviderEnabled(xt)&&this._identityConfig.checkIfProviderIsAllowedInGeo(xt))}_symitriInit(){let e=this._getIdentityProviderConfigBySlug(xt);if(!e||!this._identityConfig.checkIfProviderEnabled(xt)||!this._identityConfig.checkIfProviderIsAllowedInGeo(xt))return;let t=this._getConfigValueOrDefault(e,"apiHostname",sm),r=this._getConfigValueOrDefault(e,"apiVersion",nm),s=this._getConfigValueOrDefault(e,"segtax",dm),n=this._getConfigValueOrDefault(e,"pixelUrl",lm).trim(),o={},a=this._identityConfig.identityData;a!=null&&a.sha256&&(o.HEM=a==null?void 0:a.sha256);let d=this._getUserIdValue(H.ID5_ID,"uid");d&&(o.ID5=d);let c=this._getUserIdValue(H.IDENTITY_LINK);c&&(o.RampId=c);let u=Object.keys(o).reduce((m,g)=>(m.push(`${g}:${o[g]}`),m),[]).join(","),p={name:`${xt}Dap`,waitForIt:!0,params:{apiHostname:t.trim(),apiVersion:r,domain:this._dispensaryData.fsdata.domain,segtax:s,pixelUrl:n,identityType:om,identityValue:u||am}};this.prebidRealTimeDataProviders.push(p)}_gameraInit(){if(!this._getIdentityProviderConfigBySlug(Pt)||!this._identityConfig.checkIfProviderEnabled(Pt)||!this._identityConfig.checkIfProviderIsAllowedInGeo(Pt))return;let t={name:Pt,waitForIt:!0};this.prebidRealTimeDataProviders.push(t)}_loadGameraScript(){if(!this._getIdentityProviderConfigBySlug(Pt)||!this._identityConfig.checkIfProviderEnabled(Pt)||!this._identityConfig.checkIfProviderIsAllowedInGeo(Pt))return;let t=document.createElement("script");t.src=this.GAMERA_SRC,t.type="text/javascript",t.async=!0,t.id="__gamera__",document.body.appendChild(t)}loadScripts(){this._loadHadronScript(),this._loadGameraScript()}getRtdProvidersConfig(){return this._symitriInit(),this.prebidRealTimeDataProviders}};I.class(_o,{token:l.REALTIME_PROVIDERS,dependencies:[l.IDENTITY_CONFIG,l.DISPENSARY_DATA,l.PREBID_MANAGER,l.LOGGER,{token:"window",alias:"win"}],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new _o(i)})})});var jd,Rm=f(()=>{me();Nt();Ke();Od();L();k();jd=class{constructor({dispensaryData:e,logger:t}){E(this,"providersRules",[]);this._dispensaryData=e,this._logger=t,this._logger.setContext(l.IDENTITY_CONFIG),this.itfY=U("itf_y"),this.itf_n=U("itf_n"),this.identityData=this.identityDataFromSessionStorage,this.partnerOnlyTrafficPercentage=this.identityProviders.length*$p,this.testTrafficPercentage=1-Yp-this.partnerOnlyTrafficPercentage,this._populateIdentityTestGroup(),this._populateProviderRules()}get identityProviders(){return this._dispensaryData.fsdata.identityProviders||[]}get identityDataFromSessionStorage(){return V({key:Xn,type:G.object.type})}setIdentityData(e){this.identityData=e,ge({key:Xn,value:e,type:G.object})}removeIdentityDataFromSessionStorage(){this.identityDataFromSessionStorage&&(Fi({key:Xn}),this.identityData=null)}checkIfProviderEnabled(e){var t;return!this.providersRules[e]||((t=this.providersRules[e])==null?void 0:t.enabled)!==!1}checkIfProviderIsAllowedInGeo(e){var o,a;let t=(a=(o=this._dispensaryData)==null?void 0:o.locData)==null?void 0:a.iso;if(!t)return!1;let r=this.identityProviders.find(({slug:d})=>d===e);if(!r)return!1;let{disallowedGeos:s,allowedGeos:n}=r;return s!=null&&s.length?!s.includes(t):n!=null&&n.length?n.includes(t):!0}_itfTestLambda(e,t){return Math.random()<=t.itfTestPercent}_populateProviderRules(){try{this.providersRules=JSON.parse(atob(V({key:Cd,type:G.string.type})))}catch(e){this._getProvidersRulesByTestGroup()}this._updateProvidersRulesByUrlParams()}_getProvidersRulesByTestGroup(){let t={[He.TEST_PARTNERS]:this._itfTestLambda.bind(this),[He.PARTNER_ONLY]:!1,[He.ALL_DISABLED]:!1}[this.testGroup];this.providersRules=this._getDefaultProviderRules(t),this.testGroup===He.PARTNER_ONLY&&this._enableRandomIdentityProvider(),ge({key:Cd,value:btoa(JSON.stringify(this.providersRules)),type:G.string.type})}_getDefaultProviderRules(e){let t={};return this.identityProviders.forEach(r=>{let s=po[r.slug],n=typeof e=="function"?e(r.slug,s):e;t[r.slug]=Object.assign({},s,{enabled:n})}),t}_populateIdentityTestGroup(){let e=V({key:Rd,type:G.string.type});this.testGroup=e||this._determineTestingGroup(),ge({key:Rd,value:this.testGroup,type:G.string.type})}_updateProvidersRulesByUrlParams(){if(this.itfY&&this._logger.log(`itf_y parameter found: ${this.itfY}`),this.itf_n&&this._logger.log(`itf_n parameter found: ${this.itf_n}`),this.itfY||this.itf_n){let e=this.itfY?this.itfY.split(","):[],t=this.itf_n?this.itf_n.split(","):[];this._logger.log(`Provider Rules before update: ${this.providersRules}`),this.providersRules=Object.keys(this.providersRules).reduce((r,s)=>(e.includes(s)?(this._logger.log(`Enabling identity provider: ${s}`),r[s]=B(w({},this.providersRules[s]),{enabled:!0})):t.includes(s)&&(this._logger.log(`Disabling identity provider: ${s}`),r[s]=B(w({},this.providersRules[s]),{enabled:!1})),r),this.providersRules),this._logger.log(`Provider Rules after update: ${this.providersRules}`)}}_determineTestingGroup(){let e=Math.random();return e<=this.testTrafficPercentage?He.TEST_PARTNERS:this.testTrafficPercentage<e&&e<=this.testTrafficPercentage+this.partnerOnlyTrafficPercentage?He.PARTNER_ONLY:He.ALL_DISABLED}_enableRandomIdentityProvider(){let e=this.identityProviders[Math.floor(Math.random()*this.identityProviders.length)];this.providersRules[e.slug].enabled=!0}};I.class(jd,{token:l.IDENTITY_CONFIG,dependencies:[l.DISPENSARY_DATA,l.LOGGER]})});var Kd,Cm=f(()=>{k();ie();L();Nt();bi();Kd=class{constructor({dispensaryData:e,logger:t,identityConfig:r,win:s=window}){E(this,"version",1);this._window=s,this._identityConfig=r,this._dispensaryData=e,this._logger=t,this._logger.setContext(l.OPTABLE_MANAGER),this._init()}_init(){let e=this._getSlug();!this._identityConfig.checkIfProviderEnabled(Qr)||!this._isGeoAllowed||!e||this._loadScript(e)}get _isGeoAllowed(){var r;let e=(r=this._dispensaryData.locData)==null?void 0:r.iso,t="Optable does not run for users";return e?this._identityConfig.checkIfProviderIsAllowedInGeo(Qr)?!0:(this._logger.log(`${t} in ${e}.`,{level:10}),!1):(this._logger.log(`${t} without location data.`,{level:10}),!1)}_getSlug(){try{let t=this._dispensaryData.fsdata.domain.split("."),r=t.slice(-2),s=["co.uk","org.uk","gov.uk","com.au","net.au"],n=t.slice(-2).join("."),o=t.slice(-3).join(".");s.includes(n)?r=t.slice(-3):s.includes(o)&&(r=t.slice(-4));let a=r.join("-");return a=a.replace(/_/g,"-"),/^\d/.test(a)&&(a=`s-${a}`),a}catch(e){return null}}_loadScript(e){window.optable=window.optable||{cmd:[]},window.optable.site=e,document.addEventListener("optableResolved",()=>{this._enrich(arguments)}),se(gm,this._checkStorage)}_enrich(){var t,r,s,n;let e;try{e=JSON.parse(localStorage.OPTABLE_RESOLVED)}catch(o){freestar.log(0,"optable eid parse error");return}if((r=(t=e==null?void 0:e.ortb2)==null?void 0:t.user)!=null&&r.eids&&Array.isArray((n=(s=e==null?void 0:e.ortb2)==null?void 0:s.user)==null?void 0:n.eids)){let{eids:o}=e.ortb2.user;Ne({name:"optablePerformance",detail:{legacy:0,eidLength:o.length}}),fsprebid.mergeConfig({userSync:{userIds:(()=>{let a=fsprebid.getConfig("userSync.userIds")||[],d=a.find(c=>c.name==="pubProvidedId");return d||(d={name:"pubProvidedId",params:{eids:o}},a.push(d)),a})()}}),fsprebid.refreshUserIds({submoduleNames:["pubProvidedId"]})}}_checkStorage(){var s,n;let e,t=localStorage.getItem("OPTABLE_RESOLVED");if(!t)return;try{e=JSON.parse(t)}catch(o){console.error("optable parse failure")}if(!e)return;let r=(n=(s=e==null?void 0:e.ortb2)==null?void 0:s.user)==null?void 0:n.eids;Ne({name:"optablePerformance",detail:{legacy:1,eidLength:r.length}}),r&&fsprebid.que.push(()=>{fsprebid.mergeConfig({userSync:{userIds:[{name:"pubProvidedId",params:{eids:r}}]}}),fsprebid.refreshUserIds({submoduleNames:["pubProvidedId"]})})}};I.class(Kd,{token:l.OPTABLE_MANAGER,dependencies:[l.DISPENSARY_DATA,{token:"window",alias:"win"},l.LOGGER,l.IDENTITY_CONFIG,l.PREBID_MANAGER]})});var Eo,Om=f(()=>{k();Nt();ie();L();bi();Eo=class{constructor({dispensaryData:e,identityConfig:t,prebidManager:r,win:s=window}){E(this,"version",1);this._window=s,this._identityConfig=t,this._dispensaryData=e,this._prebidManager=r,this._iiq=null,this._init()}_init(){!this._identityConfig.checkIfProviderEnabled(Jr)||!this._isGeoAllowed||this._loadScript()}get _isGeoAllowed(){var t;return((t=this._dispensaryData.locData)==null?void 0:t.iso)?this._identityConfig.checkIfProviderIsAllowedInGeo(Jr):!1}_iiqPrebidOperations(){this._prebidManager.instance.onEvent("bidWon",e=>{if(this._iiq!=null){let t={biddingPlatformId:1,bidderCode:e==null?void 0:e.bidder,prebidAuctionId:e==null?void 0:e.auctionId,cpm:e==null?void 0:e.cpm,currency:e==null?void 0:e.currency,originalCpm:e==null?void 0:e.originalCpm,originalCurrency:e==null?void 0:e.originalCurrency,status:e==null?void 0:e.status,placementId:e==null?void 0:e.adUnitCode};this._iiq.reportExternalWin(t)}})}_iiqGAMKVPSetting(){let e="intent_iq_group";try{googletag.cmd.push(()=>{googletag.pubads().setTargeting(e,this._iiq.intentIqConfig.abTesting.currentTestGroup||"U")})}catch(t){googletag.cmd.push(function(){googletag.pubads().setTargeting(e,"N")})}}_iiqGAMPPIDSetting(){let t=(r=>{try{let s=r.eids;for(let n=0;n<s.length;n++){let o=s[n];if(o.source==="intentiq.com"){let a=o.uids;for(let d=0;d<a.length;d++){let c=a[d];if(c.ext.stype==="ppuid")return c.id}}}return null}catch(s){return null}})(this._iiq.getIntentIqData());t!=null&&googletag.pubads().setPublisherProvidedId(t)}_iiqGAMOperations(){this._iiq!=null&&(this._iiqGAMKVPSetting(),this._iiqGAMPPIDSetting())}_loadScript(){se(_m,()=>{this._iiq=new IntentIqObject({partner:1434517136,pbjs:this._prebidManager.instance,callback:()=>{Ne({name:"iiqInit",detail:!0})},timeoutInMillis:400,ABTestingConfigurationSource:"IIQServer",allowGDPR:!1,manualWinReportEnabled:!0,domainName:this._dispensaryData.domainName,vrBrowserBlackList:["chrome"]}),this._iiqPrebidOperations(),this._iiqGAMOperations()})}};I.class(Eo,{token:l.IIQ_MANAGER,dependencies:[l.DISPENSARY_DATA,l.IDENTITY_CONFIG,l.PREBID_MANAGER],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new Eo(i)})})});var xm=f(()=>{Am();wm();vm();Tm();Rm();Cm();Om()});var Wd,Pm=f(()=>{L();k();Wd=class{constructor(){E(this,"_events");this._events={}}subscribe(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}unsubscribe(e,t){this._events[e]&&(this._events[e]=this._events[e].filter(r=>r!==t))}emit(e,t){this._events[e]&&this._events[e].forEach(r=>r({eventName:e,payload:t}))}hasSubscribers(e){var t;return!!((t=this._events[e])!=null&&t.length)}};I.class(Wd,{token:l.EVENT_BUS,defaultAlias:"eventBus"})});var ar,Ki,yo,Hn,er,Vn,Nm,ln,Dm=f(()=>{ar="STICKY_FOOTER_RESIZE",Ki="NATIVE_RENDER_ENDED",yo="BEFORE_NATIVE_RENDER",Hn="GAM_SLOT_DESTROYED",er="GAM_SLOT_CREATED",Vn="GAM_ALL_SLOTS_DESTROYED",Nm="DEVICE_ORIENTATION_CHANGED",ln="LAZY_AD_INTERSECTED"});var Zr=f(()=>{Pm();Dm()});var iI,Qd,Lm=f(()=>{L();k();Fe();Ot();iI=[{owner:"google",ua:"googlebot"},{owner:"google",ua:"mediapartners-google"},{owner:"google",ua:"adsbot-google"},{owner:"bing",ua:"bingbot"},{owner:"yahoo",ua:"slurp"},{owner:"duckduckgo",ua:"duckduckbot"},{owner:"baidu",ua:"baiduspider"},{owner:"yandex",ua:"yandexbot"},{owner:"exabot",ua:"konqueror/3.5"},{owner:"exabot",ua:"Exabot/3.0"},{owner:"facebook",ua:"facebot"},{owner:"facebook",ua:"facebookexternalhit/1.0"},{owner:"facebook",ua:"facebookexternalhit/1.1"},{owner:"alexa",ua:"ia_archiver"}],Qd=class{constructor({win:e,analytics:t}){this._win=e,this._analytics=t,this._isDetected=!1}get isDetected(){return this._isDetected}checkForBot(){var s;let e=((s=this._win.navigator)==null?void 0:s.userAgent)||navigator.userAgent,t="fs.bot.found",r=ht({name:t});r&&r?this._handleBotDetected(t,e):e&&!r&&(iI.forEach(n=>{RegExp(n.ua.toLowerCase()).test(e.toLowerCase())&&this._handleBotDetected(t,e)}),ot({name:t,value:!1}))}_handleBotDetected(e,t){throw this._isDetected=!0,this._trackEvent(),ot({botCookieName:e,value:!0}),`pubfig code disabled as the user agent ${t} is a bot`}_trackEvent(){this._analytics.track(new Y({eventName:"BOT_DETECTED",eventType:"botDetected",data:{detected:!0}}))}};I.class(Qd,{token:"BotTraffic",dependencies:[l.ANALYTICS,{token:"window",alias:"win"}]})});var es,Jd,Xd=f(()=>{es=()=>{let i=Jd();return(i==null?void 0:i.offsetHeight)||0},Jd=()=>{var e;return(((e=freestar==null?void 0:freestar.currentStickyFooter)==null?void 0:e.footer)||(freestar==null?void 0:freestar.currentStickyFooter)||{}).slotWrapper}});var rI,km,Mm=f(()=>{Be();rI=["kargo","teads","seedtag"],km=i=>{var o;if(i.mediaType==="banner"){let a=fsprebid.adUnits.find(({code:c})=>c===i.adUnitCode);if(!((o=a==null?void 0:a.sizes)==null?void 0:o.some(([c=0,u=0])=>c===i.width&&u===i.height)))return freestar.log(10,`Invalid bid size for ad unit: ${i.adUnitCode}`),!1}let e=W(i.bidderCode);if(!rI.some(a=>W(a)===e))return!0;let{width:t,height:r,ad:s}=i;if(!s||!t||!r)return!0;let n=String(s).toLowerCase().includes(`${t}x${r}`);return n||freestar.log(10,`Invalid ad size for ${i.bidderCode} bid: ${t}x${r}`),n}});var Bm,Fm=f(()=>{Bm=(i,e=5e3)=>O(void 0,null,function*(){return new Promise((t,r)=>{var s,n;if(!i){t();return}if(((n=(s=i.contentWindow)==null?void 0:s.document)==null?void 0:n.readyState)==="complete"){t();return}i.addEventListener("load",()=>{if(Number(i==null?void 0:i.width)<=1){r(new Error("Iframe width is less than or equal to 1"));return}t()},{once:!0}),setTimeout(()=>{t()},e)})})});var Io=f(()=>{Xd();Mm();Fm()});var So,Zd=f(()=>{z();So=class{constructor({type:e,prebidAuctionId:t=null}){this.fsAuctionId=ue(),this.type=e,this.prebidAuctionId=t,this.adUnits=new Set,this.reportedPlacements=new Set,this.timestamp=Date.now()}addAdUnit(e){this.adUnits.add(e)}getAdUnits(){return Array.from(this.adUnits)}isAuctionEndReported(e){return this.reportedPlacements.has(e)}}});var sI,nI,Um,Gm=f(()=>{Nr();sI="pubfig.min.js",nI="https://a.pub.network/",Um=(i=window.document)=>{var s;let e="freestar-com",t=i.querySelectorAll(`script[src*="${sI}"]`),r=Array.from(t).find(n=>!n.src.includes("/core/"));return r?(s=r.src.split(nI)[1])==null?void 0:s.split("/")[0]:e}});var oI,dr,el,tl,Vm=f(()=>{ie();Gm();dt();re();oI={"scribd-com":{clientId:"ca-pub-1211639399720391",sizes:{"300x100":6475080870,"300x250":7125817567,"300x50":1716797968,"320x100":9052362509,"320x50":4499654227,"336x280":4367012037,"468x60":5113117491,"728x90":7843222610,"970x250":5105378639,"970x90":6338569255}}},dr=()=>{var i;return((i=freestar==null?void 0:freestar.config)==null?void 0:i.adsense)||oI[Um()]},el=class{constructor(){this.params=!1,this.init()}init(){this.params=dr()}render(e=null){if(!dr())return;this.params||(this.params=dr()),window.adsbygoogle||(se("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"),window.adsbygoogle=[]);let t=ce.getAdUnitByPrebidCode(e),{placement:r}=t,s=Object.keys(this.params.sizes),n=_a({placement:r,sizesAllowed:s}),o=document.getElementById(e);o.innerHTML=`<ins class="adsbygoogle" style="display:block; width:${n[0]}px; height:${n[1]}px;" data-ad-client="${this.params.clientId}" data-ad-slot="${this.params.sizes[n.join("x")]}" ></ins>`,window.adsbygoogle.push({})}},tl=new el});var $e,il,qm=f(()=>{$e={PREBID:"PREBID",PREBID_GAM:"PREBID-GAM",GAM:"GAM"},il=10*60*1e3});var bo,zm=f(()=>{dt();xe();Ve();Vm();L();k();nr();Zd();qm();Ke();bo=class{constructor({adUnitManager:e,analytics:t,prebidManager:r,gamManager:s,idealAdStackManager:n,rebidManager:o,dispensaryData:a,logger:d,nativeRenderManager:c}){this._adUnitManager=e,this._idealAdStackManager=n,this._analytics=t,this._prebidManager=r,this._gamManager=s,this._rebidManager=o,this._dispensaryData=a,this._nativeRenderManager=c,this._logger=d,this._logger.setContext(l.AUCTION_MANAGER),this.auctions=new Map,this._bindPrebidEvents(),this._bindGamEvents(),this._listeners={auctionInit:[]}}addEventListener(e,t){if(!this._listeners[e])throw new Error(`Invalid event type: ${e}`);this._listeners[e].includes(t)||this._listeners[e].push(t)}removeEventListener(e,t){this._listeners[e]=this._listeners[e].filter(r=>r!==t)}_bindGamEvents(){this._gamManager.instance.pubads().addEventListener(Rt,this._handleSlotRequested.bind(this)),this._gamManager.instance.pubads().addEventListener(we,this._handleSlotRenderEnded.bind(this))}_bindPrebidEvents(){this._prebidManager.instance.onEvent($s,this._handleAuctionInit.bind(this)),this._prebidManager.instance.onEvent(yt,this._handleAuctionEnd.bind(this))}_createAuction(e,t=null){let r=new So({type:e,prebidAuctionId:t});return this.auctions.set(r.fsAuctionId,r),r}_handleAuctionInit(e){let{adUnits:t,auctionId:r}=e,s=this._idealAdStackManager.isGAMEnabled()?$e.PREBID_GAM:$e.PREBID,n=this._createAuction(s,r),o=n.fsAuctionId;t.forEach(a=>{let{code:d}=a,c=this._adUnitManager.getAdUnitByPrebidCode(d);c&&(c.saveState({fsAuctionId:o,auctionType:s,prebidAuctionId:r,rebid:this._rebidManager.getStatus({adUnitCode:c.getSlotId()})}),n.addAdUnit(c),this._trackAuctionStart(c,o,s,r))}),this._listeners.auctionInit.forEach(a=>a(n))}_handleAuctionEnd(e){let{auctionId:t}=e,r=this.getAuctionByPrebidAuctionId(t);r&&r.adUnits.forEach(s=>{let n=(o,a=!1)=>{this._trackAuctionEnd(s,r.fsAuctionId,o,e,t,a,!1)};if(r.type===$e.PREBID){let o=this._nativeRenderManager.getHighestBid(s.prebid.code);o?this._nativeRenderManager.renderAd(o,s.prebid.code).then(()=>{n($e.PREBID,!0)}):dr()&&s.isDisplayAd()?tl.render(s.prebid.code):n($e.PREBID)}else s.slot||n($e.PREBID_GAM)})}_handleSlotRequested(e){let{slot:t}=e,r=this._adUnitManager.getAdUnitBySlotElementId(t.getSlotElementId());if(r){let s=t.getTargeting("fs-auuid")[0],n=this.getAuctionByFsAuctionId(s);if((n==null?void 0:n.type)===$e.PREBID_GAM||(n==null?void 0:n.type)===$e.PREBID)return;let o=this._createAuction($e.GAM);r.saveState({fsAuctionId:o.fsAuctionId,auctionType:$e.GAM,rebid:this._rebidManager.getStatus({adUnitCode:r.getSlotId()})}),this._trackAuctionStart(r,o.fsAuctionId,$e.GAM)}}_handleSlotRenderEnded(e){let{slot:t}=e,r=t.getSlotElementId(),s=this._adUnitManager.getAdUnitBySlotElementId(r);if(!s)return;let n=t==null?void 0:t.getTargeting("fs-auuid")[0],o=this.getAuctionByFsAuctionId(n);if(!o)return;let a=(c=!1)=>{this._trackAuctionEnd(s,n,o.type,e,o.prebidAuctionId,c,c)};if(U("fs-force-rebid")){this._rebidEmptySlot(e,r),a(),this._logger.log("When in 'fs-force-rebid' mode, ads will not be rendered natively");return}if(U("fs-force-native-render")){let c=this._nativeRenderManager.getHighestBid(r);if(c){this._nativeRenderManager.renderAd(c,r).then(()=>{a(!0)}).catch(u=>{this._logger.log(`Error native rendering prebid ad: ${u}`)});return}}if(!e.isEmpty){a(),this._rebidManager.resetRebidStatus(r);return}if(dr()&&s.isDisplayAd()){tl.render(r);return}let d=this._nativeRenderManager.getHighestBid(r);if(d){this._nativeRenderManager.renderAd(d,r).then(()=>{a(!0)}).catch(c=>{this._logger.log(`Error native rendering prebid ad: ${c}`)});return}this._rebidEmptySlot(e,r),a()}_rebidEmptySlot(e,t){this._dispensaryData.fsdata.secondAuctionDisabled||!this._idealAdStackManager.isRebidAllowed()||this._rebidManager.handleNoBidScenario(e,t)}_trackAuctionStart(e,t,r,s=null){let n=B(w({},this._buildBaseAuctionPayload(e,t,r,s)),{fsAuctionId:t});this._analytics.track(new Wi(n))}_trackAuctionEnd(e,t,r,s,n=null,o,a){let d=this.getAuctionByFsAuctionId(t);if(d&&!d.reportedPlacements.has(e.placement.name)){let c=this._buildAuctionEndPayload(e,t,r,s,n,o,a);this._analytics.track(new mn(c)),d.reportedPlacements.add(e.placement.name),this._setAuctionExpiration(t)}}_setAuctionExpiration(e){setTimeout(()=>{this._logger.log(`Removing expired auction ${e} after ${il}`),this.auctions.delete(e)},il)}_buildAuctionEndPayload(e,t,r,s,n,o,a){return B(w(w(w({},this._buildBaseAuctionPayload(e,t,r,n)),this._extractAuctionEndData(s)),this._calculateAuctionStatusFields(t,r,s,o,a)),{fsAuctionId:t,winningBid:e.getWinningBid(),isS2SDisabled:this._idealAdStackManager.isS2SDisabled()})}_buildBaseAuctionPayload(e,t,r,s=null){var n,o;return{placementId:e.placement.name,DfpId:(n=e.slot)==null?void 0:n.getAdUnitPath(),fsAuctionId:t,auctionId:s,auctionType:r,location:(o=freestar.locData)!=null?o:{},userIds:this._prebidManager.instance.getConfig().userSync.userIds.map(a=>a.name),kvps:e.getKVPs().filter(([a])=>eu.includes(a))}}_extractAuctionEndData(e){return B(w({},e),{size:JSON.stringify(e.size)})}_calculateAuctionStatusFields(e,t,r,s,n){let o,a;return t===$e.PREBID?(o=!0,a=!s):(o=!1,a=r.isEmpty&&!s&&!n),{isNativeRender:s,isGamBypass:o,unfilled:a}}getAuctionByFsAuctionId(e){return this.auctions.get(e)||null}getAuctionByPrebidAuctionId(e){return Array.from(this.auctions.values()).find(t=>t.prebidAuctionId===e)||null}};I.class(bo,{token:l.AUCTION_MANAGER,dependencies:[l.ANALYTICS,l.FREESTAR,l.PREBID_MANAGER,l.GAM_MANAGER,l.DISPENSARY_DATA,l.LOGGER,l.NATIVE_RENDER_MANAGER,l.REBID_MANAGER],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,yield i.gamManager.ready,new bo(B(w({},i),{idealAdStackManager:j(),adUnitManager:ce}))})})});var Hm=f(()=>{Zd();zm()});var Ao,$m=f(()=>{Ao=class{constructor(){this._queue=[]}enqueue({bidObjects:e}){this._queue=this._queue.concat(e)}get items(){return Array.from(new Set(this._queue))}hasItem(e){return this.items.includes(e)}clear(){this._queue=[]}}});var wo,Ym=f(()=>{k();L();vi();Wn();Ve();Ge();z();Fe();Te();re();bi();ke();Ra();$m();ji();wo=class{constructor(e){this._logger=e.logger,this._analytics=e.analytics,this._deviceInfo=e.deviceInfo,this._performanceLogger=e.performanceLogger,this._gamManager=e.gamManager,this._prebidManager=e.prebidManager,this._bidsQueue=e.bidsQueue,this._logger.setContext(l.BIDS_MANAGER),this._initializeState(),this._processingTimeout=null}enqueueBids({bidObjects:e}){if(!(e!=null&&e.length)){this._logger.log("No bid objects provided for enqueueBids");return}this._bidsQueue.enqueue({bidObjects:e}),this._processingTimeout&&clearTimeout(this._processingTimeout),this._processingTimeout=setTimeout(()=>{this.processBidsQueue()},100)}processBidsQueue({timeout:e}={}){let t=this._bidsQueue.items;if(this._bidsQueue.clear(),!t.length){this._logger.log("No items in bids queue");return}this._logger.log(["BidsQueue:Processing following bidObjects:",t]);let r=this._prebidManager.instance.adUnits,s=new Set,n=new Set,o=[],a=new Set(r.map(d=>d.code));return t.forEach(d=>{var u;if(!((u=d.sizes)!=null&&u.length))return;n.add(d.code),a.has(d.code)||o.push(d);let c=De({elementId:d.code});c&&s.add(c)}),s=Array.from(s),n=Array.from(n),Kt({adUnits:o}),this.requestBids({elementIds:n,slots:s,timeout:e})}_initializeState(){this.requestReference={bidTimer:null,requestNum:++freestar.bidRequestNum},freestar.requestReference=this.requestReference}requestBids({elementIds:e,slots:t,timeout:r,callback:s,sendAdserverSignal:n}={}){var d;let o=this._validateElements({elementIds:e});if(!(o!=null&&o.length))return;this._logPerformanceMark();let a=this._initializeRequestConfig({elementIds:o,slots:t,timeout:r,callback:s,sendAdserverSignal:n});n instanceof Promise&&this._trackEarlyBids(o),(d=freestar==null?void 0:freestar.config)!=null&&d.setNonPersonalizedAds?this._handleNonPersonalizedAds(a):this._initiateAuction(a)}handleNoBids({auctionData:e}){let{bidsReceived:t,noBids:r}=e,s=this._getAdUnitCodesWithNoBids({bidsReceived:t,noBids:r});this._setNoBidTargeting({adUnitCodesWithNoBids:s,isTimeout:!1})}_initializeRequestConfig({elementIds:e,slots:t,timeout:r,callback:s,sendAdserverSignal:n}){let o=r||window.freestar.fsdata.timeout;return{elementIds:e,slots:t,failSafeTimeout:o,callback:s,sendAdserverSignal:n,requestManager:{prebid:!1,aps:!1,adserverRequestSent:!1},amazonSlots:this._setupAmazonSlots(t)}}_setupAmazonSlots(e){if(!j().isGAMEnabled())return[];let t=Sp(e);return Array.isArray(t)?t:[]}_validateElements({elementIds:e}){return!e||!e.length?this._getAllValidPlacements():Array.isArray(e)?e:[e]}_getAllValidPlacements(){return freestar.fsdata.placements.flatMap(e=>e.validAdSizes&&!e.stickyFooter&&!e.pushdownUnit&&e.sideWallType===0&&document.getElementById(e.name)?e.name:[])}_initiateAuction(e){this._requestBidsFromVendors(e),this._setFailsafeTimeout(e)}_requestBidsFromVendors(e){let{elementIds:t,sendAdserverSignal:r}=e;j().isGAMEnabled()&&this._requestAmazonBids(e),this._requestPrebidBids(e),r instanceof Promise&&this._trackEarlyBids(t)}_setFailsafeTimeout(e){let{failSafeTimeout:t}=e;this.requestReference.bidTimer=window.setTimeout(()=>{j().isGAMEnabled()&&(this._logger.log(` (${this.requestReference.requestNum}) TIMEOUT!`),this._setNoBidTargeting({isTimeout:!0}),this._handleAdServerSignal(e))},t)}_requestPrebidBids(e){let{elementIds:t,failSafeTimeout:r}=e,s={timeout:r||1e3,bidsBackHandler:n=>{this._logger.log([` (${this.requestReference.requestNum}) prebid bid responses:`,n]),e.requestManager.prebid=!0,this._handleBidderBack("prebid",e)}};t&&(s.adUnitCodes=t),this._prebidManager.instance.que.push(()=>{this._prebidManager.instance.requestBids(s)})}_requestAmazonBids(e){let{amazonSlots:t,failSafeTimeout:r}=e,s=j().isGAMEnabled(),n=freestar.amazonNetwork;if(!s||!n||!t.length){this._logger.log("Amazon bidding is not applicable or no valid amazon Slots"),e.requestManager.aps=!0,this._handleBidderBack("aps",e);return}this._logger.log(["Requesting bids from Amazon:",t]),apstag.fetchBids({slots:t,timeout:r||1e3},o=>{this._logger.log([` (${this.requestReference.requestNum}) aps bids:`,o]),e.requestManager.aps=!0,this._handleBidderBack("aps",e)})}_handleBidderBack(e,t){let{requestManager:r}=t;freestar.debug&&freestar.debug>24&&e==="prebid"&&setTimeout(()=>vf(),1500),this._logger.log([`(${this.requestReference.requestNum}) Bidder back:`,e]),this._allBiddersBack(r)&&j().isGAMEnabled()&&(t.sendAdserverSignal instanceof Promise?this._handleAdServerSignal(t):this._handleAdServerRequest(t))}_allBiddersBack(e){return e.prebid&&(j().isGAMEnabled()?e.aps:!0)}_handleAdServerSignal(e){let{sendAdserverSignal:t,elementIds:r}=e;t instanceof Promise?t.then(()=>{this._handleAdServerRequest(e)}).catch(()=>{this._logger.log(`Adserver request cancelled for: ${r.toString()}`)}):this._handleAdServerRequest(e)}_handleAdServerRequest(e){let{requestManager:t}=e;t.adserverRequestSent||(this.requestReference.bidTimer&&(clearTimeout(this.requestReference.bidTimer),this.requestReference.bidTimer=null),t.adserverRequestSent=!0,this._logger.log([` (${this.requestReference.requestNum}) Sending adserver request!`]),this._sendAdServerRequest(e))}_sendAdServerRequest(e){let{elementIds:t}=e;this._gamManager.instance.cmd.push(()=>{let r={activeIds:[],activeSlots:[]};if(Array.isArray(t)&&t.length){this._logger.log([` (${this.requestReference.requestNum}) Refresh Only:`,this.elementIds]),freestar.amazonNetwork&&apstag.setDisplayBids(t);let s=this._dynamicPlacementFlooring(t);r.activeIds=s.activeIds,r.activeSlots=s.activeSlots}else this._logger.log(` (${this.requestReference.requestNum}) Refresh All!`),freestar.amazonNetwork&&apstag.setDisplayBids(),r.activeIds=this._staticPlacementFlooring();this._setTestTargeting(),r.activeSlots.length&&(r.activeIds.length&&this._prebidManager.instance.setTargetingForGPTAsync(r.activeIds),up(r.activeSlots),this._refreshWithCorrelator(r.activeSlots)),e.callback&&e.callback()})}_setTestTargeting(){let e=wf();e&&(this._logger.log(["Part of an A/B test... ",e]),Xe({key:"fs_test_variant_id",value:String(e.testGroup)}))}_refreshWithCorrelator(e){freestar.googletagCorrelatorUpdate===!0?(this._gamManager.instance.pubads().refresh(e),freestar.googletagCorrelatorUpdate=!1):this._gamManager.instance.pubads().refresh(e,{changeCorrelator:!1})}_setNoBidTargeting({adUnitCodesWithNoBids:e,isTimeout:t}){at().forEach(r=>{if(t)r.setTargeting("fsbid","timeout");else if(e){let s=r.getAdUnitPath(),n=jm({adUnitPath:s});n&&e.includes(n.name)&&r.setTargeting("fsbid","0")}})}_placementFlooring({placementName:e,domId:t}){let r=!0,s,n,o=this._prebidManager.instance.getBidResponses()[t],a=Q({name:ne({slotId:e})});return!o||!a||(n=Rr(o.bids,function(d){return Number(d.cpm)}),s=a[`floor${this._deviceInfo.device.type.charAt(0).toUpperCase()+this._deviceInfo.device.type.slice(1)}`],Ss(s)&&s>0&&(n!=null&&n.cpm)&&n.cpm<s&&(r=!1)),r}_fetchPlacementName(e){return freestar.dynamicSlotLibrary[e]||e}_dynamicPlacementFlooring(e){let t={activeIds:[],activeSlots:[]};return e.forEach(r=>{let s=De({elementId:r});s&&t.activeSlots.push(s),this._placementFlooring({placementName:this._fetchPlacementName(r),domId:r})&&t.activeIds.push(r)}),t}_staticPlacementFlooring(){let e=[];return at().forEach(t=>{var s;let r=t.getSlotElementId();(s=freestar.bidsWon)!=null&&s[r]&&!freestar.bidsWon[r]&&(freestar.bidsWon[r].evaluated=!0,this._placementFlooring({placementName:this._fetchPlacementName(r),domId:r})&&e.push(r))}),e}_getAdUnitCodesWithNoBids({bidsReceived:e}){let t=this._prebidManager.instance.adUnits.reduce((r,s)=>(r[s.code]=!1,r),{});return e&&e.forEach(r=>{r.cpm>0&&(t[r.adUnitCode]=!0)}),Object.keys(t).filter(r=>!t[r])}_createAuctionStartEvent(){Ne({name:"auctionStarted",detail:!0})}_logPerformanceMark(){this._performanceLogger.logMark({markerName:oe.pubfigPrebidFsRequestBids})}_trackEarlyBids(e){this._logger.log(["Refreshing early bids",e])}_handleNonPersonalizedAds(e){this._logger.log(` (${this.requestReference.requestNum}) set to skip pre auctions, sending GAM request.`),e.sendAdserverSignal instanceof Promise?e.sendAdserverSignal.then(()=>this._sendAdServerRequest(e)).catch(()=>{this._logger.log(`Adserver request cancelled for: ${e.elementIds.toString()}`)}):this._sendAdServerRequest(e)}};I.class(wo,{token:l.BIDS_MANAGER,defaultAlias:"bidsManager",dependencies:[l.LOGGER,l.ANALYTICS,l.DEVICE_INFO,l.PERFORMANCE_LOGGER,l.GAM_MANAGER,l.PREBID_MANAGER],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield Promise.all([i.prebidManager.ready,i.gamManager.ready]),i.bidsQueue=i.bidsQueue||new Ao,new wo(i)})})});var Km=f(()=>{Ym()});var vo,Wm=f(()=>{ie();L();k();dt();Io();Zr();kr();Be();vo=class{constructor({prebidManager:e,adUnitManager:t,logger:r,eventBus:s,ancillary:n}){this._prebidManager=e,this._adUnitManager=t,this._ancillary=n,this._eventBus=s,this._logger=r,this._logger.setContext(l.NATIVE_RENDER_MANAGER)}getHighestBid(e,t=[]){let r=this._prebidManager.instance.getBidResponsesForAdUnitCode(e);if(r.bids&&r.bids.length>0){let s=r.bids.filter(n=>n.status!=="rendered"&&km(n)&&!t.includes(W(n.bidderCode)));if(s.length>0)return s.sort((n,o)=>o.cpm-n.cpm),s[0]}return null}getAdUnit(e){return this._adUnitManager.getAdUnitBySlotElementId(e)}_sendEvents(e,t,r){this._eventBus.emit(Ki,{elementId:t,bid:r})}renderAd(e,t){return O(this,null,function*(){let r=document.getElementById(t);if(r.style.display==="none")return;let s=this.getAdUnit(t);if(!s){console.warn(`[nativeRender-renderAd] AdUnit not found for elementId: ${t}`);return}if(s.renderMap.has(e.adId))return;s.renderMap.set(e.adId,!0),yield this.clearExistingAd(t),e.isNativeRender=!0;let n=this.createAdElement(e);r.appendChild(n),this.executeRenderAd(e.adId),this._ancillary.create({id:t,placement:s.placement,container:n}),this._sendEvents(s,t,e)})}clearExistingAd(e){return new Promise(t=>{this._ancillary.hide(e),$i(e),this._eventBus.emit(yo,{elementId:e}),t()})}createAdElement(e){return b({id:Qs,children:[b({type:"iframe",id:`_fs-ad-${e.adId||e.amzniid}`,attributes:[{width:e.width||"100%",height:e.height||"100%",frameBorder:"0",marginHeight:"0",marginWidth:"0",scrolling:"no"}]})]})}executeRenderAd(e){this._prebidManager.instance.renderAd(document.querySelector(`#_fs-ad-${e}`).contentWindow.document,e),this._logger.log(`rendered #_fs-ad-${e} natively`)}};I.class(vo,{token:l.NATIVE_RENDER_MANAGER,dependencies:[l.PREBID_MANAGER,l.LOGGER,l.EVENT_BUS,l.ANCILLARY],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new vo(B(w({},i),{adUnitManager:ce}))})})});var Qm=f(()=>{Wm()});var rl=pi((SN,Zm)=>{"use strict";var aI=function(e){return dI(e)&&!lI(e)};function dI(i){return!!i&&typeof i=="object"}function lI(i){var e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"||uI(i)}var cI=typeof Symbol=="function"&&Symbol.for,fI=cI?Symbol.for("react.element"):60103;function uI(i){return i.$$typeof===fI}function pI(i){return Array.isArray(i)?[]:{}}function ts(i,e){return e.clone!==!1&&e.isMergeableObject(i)?lr(pI(i),i,e):i}function mI(i,e,t){return i.concat(e).map(function(r){return ts(r,t)})}function hI(i,e){if(!e.customMerge)return lr;var t=e.customMerge(i);return typeof t=="function"?t:lr}function gI(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return Object.propertyIsEnumerable.call(i,e)}):[]}function Jm(i){return Object.keys(i).concat(gI(i))}function Xm(i,e){try{return e in i}catch(t){return!1}}function _I(i,e){return Xm(i,e)&&!(Object.hasOwnProperty.call(i,e)&&Object.propertyIsEnumerable.call(i,e))}function EI(i,e,t){var r={};return t.isMergeableObject(i)&&Jm(i).forEach(function(s){r[s]=ts(i[s],t)}),Jm(e).forEach(function(s){_I(i,s)||(Xm(i,s)&&t.isMergeableObject(e[s])?r[s]=hI(s,t)(i[s],e[s],t):r[s]=ts(e[s],t))}),r}function lr(i,e,t){t=t||{},t.arrayMerge=t.arrayMerge||mI,t.isMergeableObject=t.isMergeableObject||aI,t.cloneUnlessOtherwiseSpecified=ts;var r=Array.isArray(e),s=Array.isArray(i),n=r===s;return n?r?t.arrayMerge(i,e,t):EI(i,e,t):ts(e,t)}lr.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return lr(r,s,t)},{})};var yI=lr;Zm.exports=yI});var eh,To,th=f(()=>{eh=Di(rl());L();k();ie();Ot();me();Cs();Be();To=class{constructor({window:e,freestar:t,dispensaryData:r,logger:s,analytics:n,prebidManager:o,rebidManager:a}){E(this,"prebidNameSpace","fsprebid");E(this,"_handleEvent",e=>{var r,s;let{data:t}=e;if(t.message==="CONFIANT_CALLBACK"&&t.isBlocked===1){let n=t.impressionData||{},o=((r=n.prebid)==null?void 0:r.s)||((s=n.dfp)==null?void 0:s.s);if(!o){this._logger.log("domId not found in impressionData");return}n.prebid?this._prebidBlockProcess(n):this._dfpBlockProcess({domId:o}),this._rebidBlockedAd({domId:o})}});this._win=e,this._freestar=t,this._dispensaryData=r,this._logger=s,this._logger.setContext("Confiant"),this._logger.setLevel(50),this._analytics=n,this._rebidManager=a,this._prebidManager=o}init(){return O(this,null,function*(){yield this._loadScript(),this._logger.log("Confiant module initialized")})}_loadScript(){return O(this,null,function*(){let{adQualityOptions:e}=this._dispensaryData.fsdata||{};if(e&&e.vendor==="CONFIANT"&&(e.desktopEnabled||e.mobileEnabled)){let t=e.vendorId;this._buildBasicConfiantObject(),yield Ai(`https://cdn.confiant-integrations.net/${t}/gpt_and_prebid/config.js`),this._logger.log("Inserted Confiant script"),this._subscribe()}})}_buildBasicConfiantObject(){this._win.confiant=this._win.confiant||{},this._win.confiant.prebidNameSpace=this.prebidNameSpace,this._win.confiant.callback=(e,t,r,s,n,o)=>{this._win.postMessage({message:"CONFIANT_CALLBACK",isBlocked:r,impressionData:o})}}_sendMessage({args:e}){this._analytics.track(new Ln(e))}_subscribe(){this._win.addEventListener("message",this._handleEvent.bind(this))}_prebidBlockProcess(e){let{adId:t}=e.prebid,r=this._win.fsprebid.getAllWinningBids().find(s=>s.adId===t);if(r){let s=Object.keys(r).reduce((o,a)=>(a!=="adserverTargeting"&&a!=="ad"&&(o[a]=r[a]),o),{}),n=(0,eh.default)({blockingType:"prebid",isBlocked:!0,bidCpm:s.cpm},s);this._sendMessage({args:n}),this._prebidBlockExcludeBidderSet({bidResponse:r})}}_prebidBlockExcludeBidderSet({bidResponse:e}){let t=V(Rs);t.includes(e.bidder)||t.push(e.bidder),ge({key:Aa,value:t,type:G.array}),this._removeBidder(e)}_removeBidder({bidder:e}){this._prebidManager.instance.adUnits.forEach(t=>{t.bids=t.bids.filter(r=>W(r.bidder)!==W(e))})}_dfpBlockProcess({domId:e}){let t={blockingType:"dfp",isBlocked:!0,adUnitCode:e};this._sendMessage({args:t})}_rebidBlockedAd({domId:e}){var t,r;this._rebidManager.track({elementId:e}),this._rebidManager.isAbleToRebid({elementId:e})?(this._logger.log(`Rebid for blocked ad on ${e}`),(r=(t=this._freestar)==null?void 0:t.freestarReloadAdSlot)==null||r.call(t,e)):this._logger.log(`Rebid attempt maximum reached for ${e}. There will not be another attempt to fill`)}reportSingleAd(e){try{this._win.confiant.services().reportSingleAd(e)}catch(t){alert("Unable to report the ad: "+t.toString())}}};I.class(To,{token:l.CONFIANT,defaultAlias:"confiant",dependencies:[l.WINDOW,l.FREESTAR,l.DISPENSARY_DATA,l.LOGGER,l.ANALYTICS,l.PREBID_MANAGER,l.REBID_MANAGER],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.prebidManager.ready,new To(w({},i))})})});var ih=f(()=>{th();Cs()});var cr,X,Re,ct=f(()=>{cr="REFRESH",X="VIDEO",Re="STICKYFOOTER"});var Ro,rh=f(()=>{ct();Ro=class{constructor({logger:e,freestar:t}){e.setContext(cr),t.refreshLibrary={},t.refreshSlots=[],e.log("Ad refresh is disabled for this geo."),["refresh","refreshAll"].forEach(r=>{this[r]=()=>{e.warning("Ad Refresh is disabled for this geo.")}}),["refreshAllVisible","disableForItem","enableForItem","disable","enable","pause","resume","setDirectAdRefresh"].forEach(r=>{this[r]=()=>{e.log("Ad refresh is disabled.")}})}}});var sh,nh,oh,ah,dh,lh,sl=f(()=>{sh={root:null,threshold:.5},nh=1e3,oh=.49,ah=3e3,dh=300,lh=["stickyFooter","sideWall","pushdown","revolvingRail","dynamicAd","stickyRail"]});function II(i){return{bidder:W(i.bidder),creativeId:i.creativeId,cpm:i.cpm,mediaType:i.mediaType,evaluated:!1,ad:i.ad,time:Date.now()}}function SI(i){let{adUnitCode:e}=i;e&&(freestar.bidsWon[e]=II(i))}function ch(){fsprebid.que.push(function(){fsprebid.onEvent(zi,i=>SI(i))})}var fh=f(()=>{xe();Be()});function uh({bidder:i,cpm:e,siteAdjustment:t,networkAdjustment:r}){(t||r&&freestar.adjustments.isLogged)&&(freestar.log(is,"bidder : ",i),freestar.log(is,"cpm : ",JSON.stringify(e)),t&&freestar.log(is,"siteAdjustment : ",t),r&&freestar.log(is,"networkAdjustment : ",r))}function ph({cpm:i,siteAdjustment:e,networkAdjustment:t,bid:r}){(i&&e||t)&&(freestar.adjustments.isLogged&&freestar.log(is,"final cpm value : ",i),r.rawCpm=r.cpm,r.adjustedCpm=i,freestar.adjustments.bids.push(st(r)))}function mh(){freestar.adjustments.isLogged&&fsprebid.onEvent(Si,function(i){let e=freestar.adjustments.bids.find(t=>t.requestId===i.requestId);e&&(freestar.log("Bid Adjustment Log: bid response after adjustment",i),freestar.log("Bid Adjustment Log: original bid",e))})}var is,hh=f(()=>{Mi();xe();is="Bid Adjustment Log : "});var Co,gh=f(()=>{Co=class{constructor(){this.ext={fs_company:window.freestar.fsdata&&window.freestar.fsdata.companyId||"unknown"}}}});var nl,ol,al,Oo,_h=f(()=>{Pe();z();gh();Vs();nl=class{constructor(){this.data=[{name:Gi(),ext:{taxonomyname:"iab_content_taxonomy"},segment:dp()}]}},ol=class{constructor(){this.fs_optimized=this.getIsOptimized(window.freestar),this.fs_site=window.freestar.fsdata&&window.freestar.fsdata.siteId||"unknown"}getIsOptimized({config:e={}}){return e&&e.pageSpeedOptimized?e.pageSpeedOptimized:!1}},al=class{constructor(){this.data=new ol}},Oo=class{constructor(e=""){this.name=window.freestar.fsdata.path||"",this.domain=window.freestar.fsdata.domain||"",this.cat=window.freestar.fsdata.categories||[],this.sectioncat=window.freestar.fsdata.categories||[],this.pagecat=window.freestar.fsdata.categories||[],this.page=window.location.href||"",this.mobile=e===ee?1:0,this.ref=document.referrer||"",this.content=new nl,this.ext=new al,this.publisher=new Co}}});var xo,Eh=f(()=>{J();xo=class{constructor(){this.id=window.freestar.msg.fpc||""}isValid(){return this.id&&this.id.length&&this.id!==Es}}});var Po,yh=f(()=>{Po=class{clean(){for(let e in this)typeof this[e]=="string"&&this[e].length===0&&delete this[e]}}});var fr,dl=f(()=>{yh();fr=class extends Po{constructor(){super(),this.region=this.getRegion(),this.city=this.getCity(),this.country=this.getCountry(),this.ext={},this.clean()}getLocObj(){return window.freestar.locData?window.freestar.locData:!1}getRegion(){return this.region!==void 0?this.region:this.getLocObj().state||""}getCity(){return this.city!==void 0?this.city:this.getLocObj().city||""}validateCountryISO(e){return e.length===2?e:!1}getCountry(){return this.country!==void 0&&this.validateCountryISO(this.country)?this.country:this.getLocObj().iso&&this.validateCountryISO(this.getLocObj().iso)?this.getLocObj().iso:""}}});var ll,No,Ih=f(()=>{J();dl();ll=class{constructor(){this.types={unknown:0,mobile:1,desktop:2,ctv:3,phone:4,tablet:5,connectedDevice:6,"set-top-box":7}}getType(){if(window.freestar.deviceInfo&&window.freestar.deviceInfo.device){if(window.freestar.fsdata.siteId===6324)return this.types.ctv;let{type:e="unknown"}=window.freestar.deviceInfo.device;if(e&&this.types[e])return this.types[e]}return this.types.unknown}},No=class{constructor(){this.ua=this.fetchFromDeviceInfo("ua"),this.geo=new fr({}),this.dnt=this.getUserDNTStatus(),this.devicetype=new ll().getType(),this.make=this.getMobileDeviceInfo("vendor"),this.model=this.getMobileDeviceInfo("model"),this.os=this.getOSInfo("name"),this.osv=this.getOSInfo("version")}getUserDNTStatus(){return window.freestar.msg.fpc===Es?1:0}getOSInfo(e){return this.fetchFromDeviceInfo("os")[e]||""}fetchFromDeviceInfo(e){return window.freestar&&window.freestar.deviceInfo&&window.freestar.deviceInfo[e]?window.freestar.deviceInfo[e]:""}getMobileDeviceInfo(e){return this.fetchFromDeviceInfo("device")[e]||""}}});var cl,Do,Sh=f(()=>{cl=class{constructor(){window.freestar.fsdata.topLevelStoredRequestId&&(this.storedrequest={id:window.freestar.fsdata.topLevelStoredRequestId})}},Do=class{constructor(){this.prebid=new cl}}});var bh,Lo,Ah=f(()=>{_h();Eh();Ih();dl();Sh();bh=Di(rl()),Lo=class{constructor(e=""){let t=window.freestar.config.ortb2||{};this.site=this.merge(t.site,new Oo(e)),this.user=this.merge(t.user,new xo),this.device=this.merge(t.device,new No),this.geo=this.merge(t.geo,new fr),this.ext=this.merge(t.ext,new Do);let{enableClientBlocking:r,enableClientCategoryBlocking:s,badv:n,bcat:o}=window.freestar.fsdata.ortb||{};r&&(this.badv=n),s&&(this.bcat=o)}merge(e={},t){return(0,bh.default)(t,e)}}});function Oi(i=window.freestar.locData){return i?ms.includes(i.iso)||i.state==="QC":!1}var wh,bI,ko=f(()=>{J();wh=i=>{bI()?window.__tcfapi("getTCData",2,(e,t)=>t&&e.tcString?i(e.tcString):i(null)):i(null)},bI=()=>!!window.__tcfapi});var vh,Th=f(()=>{vh={maxTopicCaller:3,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7}]}});function Rh(i){var e,t;if(i!=null&&i.adUnitCode){let r=null,s=!1;try{r=(t=(e=freestar.refreshLibrary)==null?void 0:e[i.adUnitCode])==null?void 0:t.dataRefreshId}catch(n){freestar.log(1,`Error: ${n}`)}if(r){let n=0,o=RegExp(r,"g");return freestar.refreshSlots.forEach((a,d)=>{o.test(a.refreshId)&&(n=d,s=!0)}),freestar.refreshSlots.splice(n,1),s}return s}else return!1}function AI({bidder:i,cpm:e,siteAdjustment:t,networkAdjustment:r,placement:s,bid:n}){uh({bidder:i,cpm:e,siteAdjustment:t,networkAdjustment:r,placement:s,bid:n});let o=e,a=U("manipulate-cpm"),d=U("manipulate-bidder");if(a&&d&&i===d||a)return a;function c({adj:p,value:m}){let g=(100-p)/100,h=Number(m*g).toFixed(8);return parseFloat(h)}function u({bidder:p,placement:m}){let g=m.networks.filter(function(h){if(p===h.slug&&h.placementLevelBidAdjustment&&h.placementLevelBidAdjustment>0)return h})[0];return g?g.placementLevelBidAdjustment:0}if(r&&r>0&&(o=c({adj:r,value:o})),t&&t>0&&(o=c({adj:t,value:o})),i&&s&&s.networks&&s.networks.length){let p=u({bidder:i,placement:s});p&&p>0&&(o=c({adj:p,value:o}))}return ph({cpm:o,siteAdjustment:t,networkAdjustment:r,bid:n}),o}function wI({network:i}){let{id:e}=i,t=i.networkBidAdjustment||0;if(freestar.networkMap&&e){let r=freestar.networkMap[e];t=r&&r.bidAdjustment&&Number(r.bidAdjustment)&&r.bidAdjustment>0?r.bidAdjustment:i.networkBidAdjustment||0}return t}function Ch(i){ft[i.slug]||(ft[i.slug]={bidCpmAdjustment:function(e,t){let r=Q({name:ne({slotId:t.adUnitCode})}),s=AI({bidder:i.slug,cpm:e,siteAdjustment:i.bidAdjustment,networkAdjustment:wI({network:i}),placement:r,bid:t});return s||e}})}function TI({enableSendAllBids:i,useTargetingKeys:e}){let t={};return e&&(t.allowTargetingKeys=["key1"]),i||(t.alwaysIncludeDeals=!0),t}var Ze,rs,fl,ft,vI,et,ul=f(()=>{fh();vi();J();Mr();Fe();z();Te();hh();ji();Dr();Ah();re();ko();Ad();Be();Th();xe();L();k();nn();Le();Ze={},rs=[],fl=null;Ze.initiate=()=>{var i=window.fsprebid||{};return i.que=i.que||[],i.retries=0,i};ft={};Ze.setNetworks=()=>{fl=new gt,ch(),freestar.fsdata.networks.forEach(e=>{td(e),Ch(e)}),freestar.fsdata.placements.filter(e=>e.networks.length).forEach(function(e){e.networks.forEach(t=>{td(t),Ch(t)})})};Ze.getBidderSettings=()=>{let i=Yi({freestar});ft.standard={alwaysUseBid:!1,adserverTargeting:[{key:i.bidder,val:function(e){return W(e.bidderCode)}},{key:i.adid,val:function(e){return e.adId}},{key:i.pb,val:function(e){return freestar.fsdata.priceGranularity==="medium"?e.pbMg:freestar.fsdata.priceGranularity==="high"?e.pbHg:freestar.fsdata.priceGranularity==="auto"?e.pbAg:freestar.fsdata.priceGranularity==="dense"?e.pbDg:e.adUnitCode&&e.cpm&&e.cpm>2&&freestar.gamMap[e.adUnitCode]&&freestar.gamMap[e.adUnitCode]===!0?Xf({cpm:e.cpm}):e.pbCg}},{key:i.size,val:function(e){return e.size}},{key:i.format,val:function(e){return e.mediaType}},{key:"custom_bidder_size",val:function(e){return[W(e.bidder),e.size].join("_")}},{key:"freestar_domain",val:function(){return freestar.fsdata.domain||location.domain}},{key:"freestar_path",val:function(){return location.pathname}},{key:i.auction_id,val:function(e){return`${e.auctionId}`}},{key:i.source,val:function(e){return e.source}}]},(freestar.fsDfpId||freestar.fsDevDfpId||freestar.fsdata.useFsAdserverTargetingKeys)&&ft.standard.adserverTargeting.push({key:"fspbg",val:"fs_universal"}),ft.concert&&(ft.concert.storageAllowed=!0),ft.criteo&&(ft.criteo.storageAllowed=!0),ft.taboola&&(ft.taboola.storageAllowed=!0)};Ze.setBidderSettings=()=>{fsprebid.bidderSettings=ft};vI=()=>{if(window.freestar.fsdata.priceGranularity)if(window.freestar.fsdata.priceGranularity.length>6)try{return JSON.parse(freestar.fsdata.priceGranularity)}catch(e){window.freestar.log(10,`Error parsing priceGranularity ${e}`)}else return window.freestar.fsdata.priceGranularity;return{buckets:window.freestar.fsDfpId||window.freestar.fsDevDfpId||window.freestar.fsdata.useFsAdserverTargetingKeys?fa.v2:fa.v1}};Ze.setEventListeners=()=>{mh(),fsprebid.onEvent($s,function(e){freestar.performanceLogger.logMark({markerName:oe.pubfigPrebidAuctionInit}),e.adUnitCodes.forEach(t=>{freestar.bidsWon[t]&&delete freestar.bidsWon[t]})}),fsprebid.onEvent(Si,function(e){var r;let t=freestar.adjustments.bids.find(s=>s.requestId===e.requestId);e.rawCpm=(r=t==null?void 0:t.cpm)!=null?r:e.cpm});let i=[l.ANALYTICS,l.BID_WON_ANALYTICS_EVENT_FACTORY];if(freestar.allowBidResponseCollection&&i.push(l.BID_RESPONSE_ANALYTICS_EVENT_FACTORY),Promise.all(i.map(e=>D.instance.resolve(e))).then(([e,t,r])=>{fsprebid.onEvent(Si,s=>{s.adUnitCode&&$a({bidder:W(s.bidderCode),adUnitCode:s.adUnitCode}),Rh(s),r&&e.track(r.create(s))}),fsprebid.onEvent(zi,s=>{s.adUnitCode&&$a({bidder:W(s.bidderCode),adUnitCode:s.adUnitCode});let n=Rh(s);s.bidderRefresh=n,e.track(t.create(s))})}),D.instance.resolve(l.ANALYTICS).then(e=>{var t;fsprebid.onEvent(Uf,r=>{setTimeout(()=>{r.forEach(s=>{e.track(new wn(s))})},50)}),(t=window.freestar.fsdata.ortb)!=null&&t.enableClientBlockingLogs&&window.fsprebid.onEvent(Gf,r=>{e.track(new Y({eventName:r.rejectionReason?r.rejectionReason.toUpperCase().replace(/ /g,"_"):"UNKNOWN",eventType:"BID_REJECTED",data:r}))})}),freestar.allowBidRequestedCollection){let e=[l.ANALYTICS,l.BID_REQUESTED_ANALYTICS_EVENT_FACTORY];Promise.all(e.map(t=>D.instance.resolve(t))).then(([t,r])=>{fsprebid.onEvent(Ff,s=>{t.track(r.create(s))})})}};Ze.setSChain=()=>{let{companyId:i="",schain:e}=window.freestar.fsdata,t=jn(i,e==null?void 0:e.type,e==null?void 0:e.bidderOverrides);t&&window.fsprebid.setBidderConfig({bidders:Eu(fl),config:{schain:{validation:"strict",config:t}}},!0)};Ze.settingConfig=(i,e,t)=>{var p,m,g,h,A,S,_,y;let r=vI(),s=freestar.fsdata.useFsAdserverTargetingKeys||U("use-fs-adserver-targeting-keys"),n=window.freestar.deviceInfo&&window.freestar.deviceInfo.device.type||"",o=!!((m=(p=window.freestar)==null?void 0:p.fsdata)!=null&&m.enableSendAllBidsToAdServer),a={performanceMetrics:!1,targetingControls:TI({enableSendAllBids:o,useTargetingKeys:s}),ortb2:new Lo(n),rubicon:{singleRequest:!0},bidderTimeout:window.freestar.fsdata.timeout||1500,userSync:{auctionDelay:100,enableOverride:!1,filterSettings:{all:{bidders:"*",filter:"include"}},userIds:[],syncDelay:100,syncEnabled:!0,syncsPerBidder:8,topics:vh},enableTIDs:!0,enableSendAllBids:o,priceGranularity:r,bidderSequence:"random",publisherDomain:`${window.location.protocol}//${window.location.host}`,useBidCache:!0,minBidCacheTTL:60,eventHistoryTTL:60,gptPreAuction:{enabled:!0,customPbAdSlot:function(N,x=`/${Li}`){let{appendDivIdToGpid:q=!0}=freestar.fsdata,M=x;return q&&(M+="/"+N),freestar.log({title:"GPID"},"Payload is:",M),M},mcmEnabled:!0},firstPartyData:{skipEnrichments:!0},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache",ignoreBidderCacheKey:!0}};a.userSync.userIds=t.prebidNonRealTimeProvidersConfig,e.getBypassFirstAuction()||(e.getS2sBidders(fl).forEach(x=>{rs.includes(x)||rs.push(x)}),rs.length&&(window.freestar.log(49,"Setting s2sconfig..."),a.s2sConfig={accountId:"d0cd3243-716f-4f9c-b074-f72637de26f3",enabled:!0,bidders:rs,timeout:window.freestar.fsdata.timeout,adapter:"prebidServer",endpoint:"https://s2s.t13.io/openrtb2/auction",syncEndpoint:"https://s2s.t13.io/cookie_sync",cookieSet:!1,cookiesetUrl:"",allowUnknownBidderCodes:!0})),t.realtimeProviders.prebidAnalyticProviders.forEach(N=>{i.enableAnalytics(N)}),Oi(window.freestar.locData)&&(a.consentManagement=a.consentManagement||{},a.consentManagement.gdpr={cmpApi:"iab",timeout:1200,allowAuctionWithoutConsent:!1},(h=(g=window.freestar)==null?void 0:g.consentLibrary)!=null&&h.gpp&&(a.consentManagement=a.consentManagement||{},a.consentManagement.gpp={cmpApi:"iab",timeout:1200})),Gt(window.freestar.locData)&&((S=(A=window.freestar)==null?void 0:A.consentLibrary)!=null&&S.gpp?(a.consentManagement=a.consentManagement||{},a.consentManagement.gpp={cmpApi:"iab",timeout:1200}):(y=(_=window.freestar)==null?void 0:_.consentLibrary)!=null&&y.usp&&(a.consentManagement=a.consentManagement||{},a.consentManagement.usp={cmpApi:"iab",timeout:1200}));let{enableClientBlocking:d,enableClientCategoryBlocking:c,enableClientBlockingUnknown:u}=window.freestar.fsdata.ortb||{};(d||c)&&(a.bidResponseFilter={cat:{enforce:c,blockUnknown:!!u},adv:{enforce:d,blockUnknown:!!u},attr:{enforce:!1,blockUnknown:!1}}),i.setConfig(a)};Ze.analytics=i=>{i.enableAnalytics([{provider:"freestar",options:{}}])};Ze.enableTIDs=()=>{window.fsprebid.setConfig({enableTIDs:!0})};Ze.enableRTDProviders=i=>{fsprebid.mergeConfig({realTimeData:{auctionDelay:50,dataProviders:i.realtimeProviders.getRtdProvidersConfig()}})};Ze.updateTimeouts=({bidderTimeout:i,s2sTimeout:e})=>{let t={bidderTimeout:i};rs.length&&(t.s2sConfig={timeout:e||i*.75}),window.fsprebid.setConfig(t),window.freestar.fsdata.timeout=i};et=Ze});var Mo,pl=f(()=>{Mo=({elementId:i})=>document.getElementById(i)&&i.indexOf("_fs-sf")===-1});var Bo,Oh=f(()=>{L();k();Ve();rh();sl();z();yi();ir();ct();xe();Zr();ul();pl();ke();Bo=class{constructor({renderBidMidwayManager:e,logger:t,dispensaryData:r,refreshers:s,globalRefreshUserIDsState:n,gamManager:o,freestar:a,win:d,eventBus:c,refreshLibrary:u}){E(this,"_counterEventsConfig",[{thresholdPercentageFrom:.5,thresholdPercentageTo:.75,handler:({elementId:e,refreshLibraryItem:t})=>{t.checkingForBid||!t.canBeRefreshed()||!t.isVisibilityThresholdMet()||(t.checkingForBid=!0,this._renderBidMidwayManager.renderAd({elementId:e}))}},{thresholdPercentageFrom:.75,thresholdPercentageTo:.85,handler:({elementId:e,refreshLibraryItem:t})=>{t.checkingForBid=!1,!(t.hasPrefetchCalled||!t.canBeRefreshed()||!t.isVisibilityThresholdMet())&&(t.hasPrefetchCalled=!0,this._prefetchBids({elementId:e,refreshLibraryItem:t}))}},{thresholdPercentageFrom:.8,handler:({elementId:e,refreshLibraryItem:t})=>{if(!Ei({siteId:this._dispensaryData.fsdata.siteId,placement:t.placement})&&!Ci(t.placement)){let r=(t.refreshTime||0)+1;bt().prefetchFloorsData({placement:t.placement,slotId:e,timesRefreshed:r})}}},{thresholdPercentageFrom:.8,handler:({refreshLibraryItem:e})=>{var t;this._globalRefreshUserIDsState.allowed()&&((t=e.refreshUserIds)!=null&&t.requiresRefresh)&&(e.refreshUserIds.refresh(),this._globalRefreshUserIDsState.updateLastRefreshTime())}},{thresholdPercentageFrom:1,handler:({elementId:e,refreshLibraryItem:t})=>{!t.canBeRefreshed()||!t.isVisibilityThresholdMet()||(this._refresh({elementId:e,refreshLibraryItem:t}),t.hasPrefetchCalled=!1,t.refreshUserIds.reset())}}]);E(this,"_isTimeoutUpdatedForSubsequentAuctions",!1);E(this,"_handleIntersection",e=>{e.forEach(t=>{this._refreshLibrary.updateLibraryItem({slotId:t.target.id,attributes:{intersectionRatio:t.isIntersecting?t.intersectionRatio:0}})})});E(this,"_checkRefreshCap",()=>{let[e]=Object.values(this._refreshLibrary.items),{slotsCombinedRefreshCap:t}=this._dispensaryData.fsdata;if(!e||t===0)return;let r=t||dh;e.constructor.totalRefreshes>=r&&(this._logger.log(`Max refresh cap reached. Total Refreshes: ${e.constructor.totalRefreshes}, Cap: ${r}`),this._refreshLibrary.toggleRefreshForAll({disableRefresh:!0}))});this._renderBidMidwayManager=e,this._gamManager=o,this._window=d,this._freestar=a,this._eventBus=c,this._refreshLibrary=u,this._dispensaryData=r,this._logger=t,this._logger.setContext(cr),this._logger.setLevel(50),this._currentUrl=d.location.href,this.renderBidMidwayManager=e,this._globalRefreshUserIDsState=n,this._observedElements=new Set,this._intervalId=null,this._freestar.refreshSlots=this.refreshSlots=[],this._refreshers=s,this._subscribeToEvents(),this._attachIntersectionObserver(),this._startPolling()}disableForItem({slotId:e,placementName:t}){this._refreshLibrary.toggleRefreshForItem({slotId:e,placementName:t,disableRefresh:!0})}enableForItem({slotId:e,placementName:t}){this._refreshLibrary.toggleRefreshForItem({slotId:e,placementName:t,disableRefresh:!1})}disable(){this._refreshLibrary.toggleRefreshForAll({disableRefresh:!0})}enable(){this._refreshLibrary.toggleRefreshForAll({disableRefresh:!1})}pause(){this._refreshLibrary.updateAllItems({attributes:{pauseRefresh:!0}})}resume(){this._refreshLibrary.updateAllItems({attributes:{pauseRefresh:!1}})}addToLibrary({elementId:e}){let t=this._refreshLibrary.addToLibrary({elementId:e});if(!t)return;let r=this._window.document.getElementById(e);return this._addToObserver(r),t}refresh({elementIds:e}={}){this._logger.log(["freestar.refresh: ",e]),e=e!=null?e:this._gamManager.instance.pubads().getSlots().map(({getSlotElementId:t})=>t()),e.forEach(t=>{if(!Mo({elementId:t}))return;let r=this._refreshLibrary.getRefreshLibraryItem({slotId:t});r||(r=this.addToLibrary({elementId:t})),r&&this._refresh({elementId:t,refreshLibraryItem:r})})}refreshAll(){this._logger.log("freestar.refreshAllSlots");let e=this._gamManager.instance.pubads().getSlots();e==null||e.forEach(t=>{let r=t.getSlotElementId(),s=this._refreshLibrary.getRefreshLibraryItem({slotId:r});s!=null&&s.canBeRefreshed()&&this._refresh({elementId:r,refreshLibraryItem:s})})}refreshAllVisible(){let e=this._gamManager.instance.pubads().getSlots();e==null||e.forEach(t=>{let r=t.getSlotElementId(),s=this._refreshLibrary.getRefreshLibraryItem({slotId:r});s!=null&&s.isVisibilityThresholdMet()&&(s!=null&&s.canBeRefreshed())&&this._refresh({elementId:r,refreshLibraryItem:s})})}removeFromLibrary({elementId:e}){this._refreshLibrary.removeFromLibrary({elementId:e}),this._observedElements.delete(e);let t=this._window.document.getElementById(e);!this._observer||!t||this._observer.unobserve(t)}_eventMatchesDirectAdRefresh(e){return["advertiserId","campaignId","lineItemId","creativeId"].some(t=>{let r=e[t];return r!=null&&this._dispensaryData.fsdata.directAdRefreshTargeting.includes(r.toString())?(this._logger.log(1,`found ${t} ${r} in directAdRefreshTargeting, setting refresh ${this._dispensaryData.fsdata.directAdRefreshRate}.`),!0):!1})}setDirectAdRefresh(e){let t=this._dispensaryData.fsdata.directAdRefreshRate;this._refreshLibrary.updateLibraryItem({slotId:e,attributes:{refreshTime:t>0?t:-1,disableRefresh:t<=0}})}_subscribeToEvents(){this._dispensaryData.fsdata.customDirectAdRefresh&&this._gamManager.instance.pubads().addEventListener(we,e=>{this._eventMatchesDirectAdRefresh(e)&&this.setDirectAdRefresh(e.slot.getSlotElementId())}),this._gamManager.instance.pubads().addEventListener(Rt,e=>{$i(e.slot.getSlotElementId())}),this._eventBus.subscribe(er,({payload:{elementId:e,elementIds:t}})=>{t||(t=[e]),t.forEach(r=>{this.addToLibrary({elementId:r})})}),this._eventBus.subscribe(Hn,({payload:{elementId:e}})=>{this.removeFromLibrary({elementId:e})}),this._eventBus.subscribe(Vn,()=>{this._clearLibrary()}),this._eventBus.subscribe(ln,({payload:{elementId:e}})=>{this._refreshLibrary.updateLibraryItem({slotId:e,attributes:{hasIntersectLazyAd:!0}})})}_clearLibrary(){this._refreshLibrary.clearLibrary()}_addToObserver(e){this._observer&&(this._observer.observe(e),this._observedElements.add(e.id))}_attachIntersectionObserver(){"IntersectionObserver"in this._window&&(this._observer=new this._window.IntersectionObserver(this._handleIntersection,sh))}_startPolling(){this._intervalId||(this._intervalId=this._window.setInterval(()=>{var t,r;if(this._observedElements.forEach(s=>{if(!this._refreshLibrary.getRefreshLibraryItem({slotId:s})){this._observedElements.delete(s);let n=this._window.document.getElementById(s);this._observer.unobserve(n)}}),this._window.document.hidden)return;let e=!1;(this._currentUrl!==this._window.location.href||this._placementsChangedViaUrl!==this._refreshLibrary.count)&&(e=!0,this._placementsChangedViaUrl=this._refreshLibrary.count,this._currentUrl=this._window.location.href);for(let s in this._refreshLibrary.items){let n=this._window.document.getElementById(s);if(!(n!=null&&n.id))continue;let o=this._refreshLibrary.getRefreshLibraryItem({slotId:s});o!=null&&o.canIncrementCounter()&&(o.incrementCounter(),this._counterEventsConfig.forEach(({thresholdPercentageFrom:a,thresholdPercentageTo:d,handler:c})=>{let u=o.refreshTime*a,p=d?o.refreshTime*d:null;o.refreshCounter>=u&&(!p||o.refreshCounter<p)&&c({refreshLibraryItem:o,elementId:s})}),(!this._observedElements.has(s)||e)&&(this._observedElements.add(s),(t=this._observer)==null||t.unobserve(n),(r=this._observer)==null||r.observe(n)))}},nh))}_prefetchBids(r){return O(this,arguments,function*({elementId:e,refreshLibraryItem:t}){this._isTimeoutUpdatedForSubsequentAuctions||(et.updateTimeouts({bidderTimeout:ah}),this._isTimeoutUpdatedForSubsequentAuctions=!0);let s=t.placement,n=this._gamManager.instance.pubads().getSlots().find(o=>o.getSlotElementId()===e);n==null||n.setTargeting("fs_uuid",ue()),t.isCounterStopped=!0,s&&!Ei({siteId:this._dispensaryData.fsdata.siteId,placement:s})&&!Ci(s)&&(t.timesRefreshed+=1,yield bt().getFloorsData({placement:s,slotId:e,callback:({result:o})=>{t.timesRefreshed-=1,o&&n&&(Object.keys(o).forEach(a=>{n.setTargeting(a,o[a])}),freestar.log({title:"FLOORS"},e,"Refreshed floors value.",o))}})),j().refreshData(),t.isCounterStopped=!1;for(let o of this._refreshers)if(o.shouldRefresh({elementId:e,placement:s,refreshLibraryItem:t})){o.fetchBids({elementId:e,placement:s,refreshLibraryItem:t}),this._logger.log(`Making bid ahead of time ${e}`);break}})}_refresh(r){return O(this,arguments,function*({refreshLibraryItem:e,elementId:t}){let s=e.placement;e.refreshCounter=1,e.timesRefreshed+=1;for(let n of this._refreshers)if(n.shouldRefresh({elementId:t,placement:s,refreshLibraryItem:e})){n.refresh({elementId:t,placement:s,refreshLibraryItem:e});break}this._checkRefreshCap()})}resetCapCounter(){let[e]=Object.values(this._refreshLibrary.items);e&&(e.constructor.totalRefreshes=0,this._logger.log("Resetting refresh cap counter"))}};I.class(Bo,{token:l.AD_REFRESHER,dependencies:[{token:l.WINDOW,alias:"win"},l.FREESTAR,l.DISPENSARY_DATA,l.EVENT_BUS,l.LOGGER,l.RENDER_BID_MIDWAY,l.GLOBAL_REFRESH_USER_IDS_STATE,l.GAM_MANAGER,l.REFRESH_LIBRARY,l.DEFAULT_REFRESHER,{token:l.SUPERFLEX_REFRESHER,optional:!0},{token:l.STICKY_FOOTER_REFRESHER,optional:!0}],factory:e=>O(void 0,[e],function*({dependencies:i}){yield i.gamManager.ready;let{isRefreshAllowed:t}=j().determineAdRefreshBehavior();if(!t)return new Ro(i);let r=[i.defaultRefresher];return i.stickyFooterRefresher&&r.unshift(i.stickyFooterRefresher),i.superflexRefresher&&r.unshift(i.superflexRefresher),new Bo(B(w({},i),{refreshers:r}))})})});var Fo,xh=f(()=>{Fo=class{constructor(){this.requiresRefresh=!0}reset(){this.requiresRefresh=!0}refresh(){this.requiresRefresh=!1,window.fsprebid.refreshUserIds()}}});var Go,Uo,Ph=f(()=>{sl();nt();xh();Go=class Go{constructor({placement:e,elementId:t,refreshAttributes:r={},siteRefreshRate:s,freestar:n,logger:o,win:a=window,enableRefreshCounterOutOfView:d}={}){let{refreshTime:c,isCounterStopped:u,refreshCounter:p,disableRefresh:m,pauseRefresh:g,intersectionRatio:h,checkingForBid:A,timesRefreshed:S,hasPrefetchCalled:_,hasIntersectLazyAd:y,refreshUserIds:N}=r;if(this._freestar=n,this._logger=o,this.placement=e,this.placementName=e.name,this._siteRefreshRate=s,this.refreshTime=c||this._getPlacementAdRefreshRate(),this.isCounterStopped=u!=null?u:!1,this.checkingForBid=A!=null?A:!1,this.hasPrefetchCalled=_!=null?_:!1,this.pauseRefresh=g!=null?g:!1,this.refreshCounter=p!=null?p:0,this.intersectionRatio=h!=null?h:0,this._timesRefreshed=S!=null?S:0,this.hasIntersectLazyAd=y!=null?y:!1,this.elementId=t,this.enableRefreshCounterOutOfView=d!=null?d:!0,typeof m!="boolean"){this.disableRefresh=!1;let x=a.document.getElementById(t);(Number(x==null?void 0:x.getAttribute("data-refresh-time"))===-1||e.outOfPage===!0)&&(this.disableRefresh=!0)}else this.disableRefresh=m;this.refreshUserIds=N!=null?N:new Fo}canBeRefreshed(){var e,t;return!((e=this.placement)!=null&&e.lazyAd&&!this.hasIntersectLazyAd&&((t=this.placement.selectedSize)==null?void 0:t.lazyLoadViewportHeight)>0||this.disableRefresh||this.pauseRefresh)}toggleRefresh(e){this.disableRefresh=e,this.refreshTime=e?0:this._getPlacementAdRefreshRate()}setRefreshCounter(e){this.refreshCounter=e}setRefreshTime(e){this.refreshTime=e||this._getPlacementAdRefreshRate()}isVisibilityThresholdMet(){return this.intersectionRatio>oh}incrementCounter(){if(!(this.refreshCounter>=this.refreshTime)){if(isNaN(this.refreshCounter)){this.refreshCounter=1;return}this.refreshCounter+=1}}canIncrementCounter(){var t;return((t=this.placement)==null?void 0:t.lazyAd)&&!this.hasIntersectLazyAd?(this.refreshCounter=0,!1):this.disableRefresh||this.isCounterStopped||this.refreshTime<=0||this.refreshCounter<0||!this.enableRefreshCounterOutOfView&&!this.isVisibilityThresholdMet()?!1:(this._logger.log(`${this.elementId} ${this.refreshCounter}`),!0)}_getPlacementAdRefreshRate(){let{ignoreSiteRefresh:e,adRefreshRate:t}=this.placement,r=e?t:this._siteRefreshRate;return this._getConfigOverrides({refreshRate:r})}_getConfigOverrides({refreshRate:e}){var t;if(!this._freestar.config.products)return e;for(let r of lh){if(!((t=this._freestar.config.products)!=null&&t[r])||!We({placement:this.placement,type:`${r}Options`}))continue;let{refreshDisabled:n,refreshInterval:o}=this._freestar.config.products[r];if(n)return 0;if(o>15)return o}return e}get timesRefreshed(){return this._timesRefreshed}set timesRefreshed(e){Go.totalRefreshes+=e-this._timesRefreshed,this._timesRefreshed=e}};E(Go,"totalRefreshes",0);Uo=Go});var ml,Nh=f(()=>{L();k();Te();Ph();pl();ct();ml=class{constructor({logger:e,dispensaryData:t,freestar:r,win:s}){this._window=s,this._dispensaryData=t,this._logger=e,this._logger.setContext(cr),this._logger.setLevel(50),this._freestar=r,this._freestar.refreshLibrary=this.items={}}get count(){return this.items.length}get globalRefreshCount(){let[e]=Object.values(this.items);return(e==null?void 0:e.totalRefreshes)||0}getRefreshLibraryItem({slotId:e,placementName:t}){var r;return(r=this.items[e])!=null?r:Object.values(this.items).find(s=>s.placementName===t)}addToLibrary({elementId:e}){var d;if(!Mo({elementId:e}))return;let{adRefreshRate:t,enableRefreshCounterOutOfView:r,placements:s}=this._dispensaryData.fsdata,n=ne({freestar:this._freestar,slotId:e}),o=s.find(c=>c.name===n);if(!o||((d=o.interstitialOptions)==null?void 0:d.active)===!0){this._logger.log(`Cannot find placement for AD slot: ${e}`,{level:20});return}let a=new Uo({placement:o,elementId:e,refreshAttributes:this.items[e],siteRefreshRate:t,freestar:this._freestar,logger:this._logger,win:this._window,enableRefreshCounterOutOfView:r});return Object.assign(this.items,{[e]:a}),this.items[e]}removeFromLibrary({elementId:e}){this.items[e]&&delete this.items[e]}toggleRefreshForAll({disableRefresh:e}){var t;for(let r in this.items)(t=this.items[r])==null||t.toggleRefresh(e)}toggleRefreshForItem({slotId:e,placementName:t,disableRefresh:r}){let s=this.getRefreshLibraryItem({slotId:e,placementName:t});s==null||s.toggleRefresh(r)}updateAllItems({attributes:e}){for(let t in this.items){let r=this.items[t];Object.assign(r,e)}}updateLibraryItem({slotId:e,placementName:t,attributes:r}){let s=this.getRefreshLibraryItem({slotId:e,placementName:t});s&&Object.assign(s,r)}clearLibrary(){for(let e in this.items)this.removeFromLibrary({elementId:e})}};I.class(ml,{token:l.REFRESH_LIBRARY,dependencies:[{token:l.WINDOW,alias:"win"},l.FREESTAR,l.LOGGER,l.DISPENSARY_DATA]})});var hl,Dh,gl=f(()=>{hl={LANDSCAPE:"landscape",MOBILE:"mobile"},Dh=1e3});var ss,_l=f(()=>{gl();ss=({width:i,height:e})=>i>e?hl.LANDSCAPE:hl.MOBILE});var El,Lh=f(()=>{L();k();ke();St();Ge();Zr();gl();re();Pe();_l();El=class{constructor({dispensaryData:e,freestar:t,eventBus:r,adRefresher:s,win:n=window}){this._dispensaryData=e,this._freestar=t,this._adRefresher=s,this._eventBus=r,this._win=n,this.orientation=this._currentDeviceOrientation,this._shouldRecreateSlots=this._dispensaryData.fsdata.reorientationRefresh&&!this._freestar.config.disableReorientation&&[ee,Vt].indexOf(this._freestar.deviceInfo.device.type)>-1,this._shouldRecreateSlots&&!t.config.alwaysRefresh&&(t.config.alwaysRefresh=e.fsdata.placements.map(({name:o})=>o)),this._subscribeToEvents()}_subscribeToEvents(){this._win.visualViewport.addEventListener("resize",ki(()=>{this.orientation!==this._currentDeviceOrientation&&(this.orientation=this._currentDeviceOrientation,this._eventBus.emit(Nm,{orientation:this.orientation}),this._onOrientationChange())},Dh))}_recreateSlot(e){Vr([e.name]);let t=Xt({placement:e,id:e.name});Ti(t,e.name,null,{fs_ad_product:qe(e)})}_onOrientationChange(){Zi(),this._shouldRecreateSlots&&this._recreateSlots()}_recreateSlots(){let e=[],t=this._freestar.config.removeRefresh||[],r=this._freestar.config.alwaysRefresh||[];this._dispensaryData.fsdata.placements.forEach(s=>{document.getElementById(s.name)&&(this._freestar.config.enabled_slots&&this._freestar.config.enabled_slots.indexOf(s.name)>-1&&!s.stickyFooter&&t.indexOf(s.name)===-1?(this._recreateSlot(s),e.push(s.name)):r.indexOf(s.name)>-1&&(this._recreateSlot(s),e.push(s.name)))}),e.length&&this._adRefresher.refresh({elementIds:e})}get _currentDeviceOrientation(){let e=this._win.innerWidth||this._win.document.documentElement.clientWidth,t=this._win.innerHeight||this._win.document.documentElement.clientHeight;return ss({width:e,height:t})}};I.class(El,{token:l.DEVICE_ORIENTATION_TRACKER,dependencies:[l.WINDOW,l.FREESTAR,l.CONFIG_MANAGER,l.DISPENSARY_DATA,l.EVENT_BUS,l.AD_REFRESHER]})});var yl=f(()=>{Lh();_l()});var Il,kh=f(()=>{L();k();Pe();yl();Il=class{constructor({logger:e,adRefresher:t,dispensaryData:r,freestar:s,win:n=window}){E(this,"keyboardIsOpen",!1);E(this,"resizeDelay",1e3);var o,a,d,c;!r.fsdata.pauseRefreshOnVirtualKeyboard||[ee,Vt].indexOf(s.deviceInfo.device.type)===-1||(this._freestar=s,this._adRefresher=t,this._logger=e,this._logger.setContext(l.VIRTUAL_KEYBOARD_REFRESH_CONTROL),this._win=n,this.initialOrientation=ss({width:(a=(o=this._win)==null?void 0:o.visualViewport)==null?void 0:a.clientWidth,height:(c=(d=this._win)==null?void 0:d.visualViewport)==null?void 0:c.clientHeight}),this.maxViewportHeight=this._getMaxViewportHeight(),this._attachListeners())}_attachListeners(){this._win.visualViewport.addEventListener("resize",e=>this.onResizeDelayed(e))}_getMaxViewportHeight(){let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="1px",e.style.height="100svh",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetHeight;return e.remove(),t}onResizeDelayed(){this.keyboardIsOpen?(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this._onResize()},this._freestar.keyboardRefreshControlDelay||this.resizeDelay)):(clearTimeout(this.resizeTimeout),this._onResize())}_onResize(){var r,s;let e=this._win.visualViewport.height,t=ss({width:(r=document==null?void 0:document.documentElement)==null?void 0:r.clientWidth,height:(s=document==null?void 0:document.documentElement)==null?void 0:s.clientHeight});t!==this.initialOrientation?(this.initialOrientation=t,this.maxViewportHeight=this._getMaxViewportHeight()):e>this.maxViewportHeight&&(this.maxViewportHeight=e),e<.9*this.maxViewportHeight?this.keyboardIsOpen||(this.keyboardIsOpen=!0,this.onKeyboardOpen()):this.keyboardIsOpen&&(this.keyboardIsOpen=!1,this.onKeyboardClose())}onKeyboardOpen(){this._logger.log("Keyboard opened, pausing ad refresh."),this._adRefresher.pause()}onKeyboardClose(){this._logger.log("Keyboard closed, resuming ad refresh."),this._adRefresher.resume()}};I.class(Il,{token:l.VIRTUAL_KEYBOARD_REFRESH_CONTROL,dependencies:[l.LOGGER,l.AD_REFRESHER,l.DISPENSARY_DATA,l.FREESTAR,{token:"window",alias:"win"}]})});function ur({placement:i,product:e=void 0,callback:t=void 0,timeout:r=!1,timestamp:s=!1}){this.placement=i,this.product=e,this.productKey=e+"Options",this.timeout=r,this.timestamp=s,this.resetIteration=()=>{this.iteration=0,sessionStorage.setItem(this.key,this.iteration.toString()),freestar.log(1,"Frequency Cap : reset iteration")},this.cleanUpIfTimedOut=()=>{this.timeout&&Date.now()-this.timestamp>=this.timeout&&(this.resetIteration(),this.timestamp=Date.now())},this.incrementIteration=()=>{this.iteration++,sessionStorage.setItem(this.key,this.iteration.toString())},this.subtractIteration=()=>{freestar.log(1,"Frequency Cap : iteration will remove this attempt as an iteration. Setting new sessionStorage item value."),this.iteration--,sessionStorage.setItem(this.key,this.iteration.toString())},this.fetchCap=()=>this.placement[this.productKey]&&i[this.productKey].cap>0?i[this.productKey].cap:-1,this.fetchIteration=()=>{let n=sessionStorage.getItem(this.key);return Number(n)?Number(n):0},this.allowProduct=()=>this.cap>0?this.iteration>=this.cap?(freestar.log(1,`Frequency Cap: iteration of ${this.iteration} is higher than cap of ${this.cap}. ${this.product} will not run again until the ${this.timeout?"timeout":"session"} ends.`),!1):(freestar.log(1,`Frequency Cap: iteration of ${this.iteration+1} is lower than or equal to the cap of ${this.cap}. Continue with ${this.product}.`),!0):!1,this.cap=this.fetchCap(),this.key=`fs.${this.product}.${this.placement.name}.frequencycap`,this.iteration=this.fetchIteration(),this.callback=t}function Mh(i){let e=ne({slotId:i.slot.getSlotElementId()});e&&freestar.frequencyLibrary[e]&&freestar.frequencyLibrary[e].cap&&(i.isEmpty?i.isEmpty&&freestar.frequencyLibrary[e].callback&&freestar.frequencyLibrary[e].callback(!0):freestar.frequencyLibrary[e].incrementIteration())}var ns=f(()=>{Te()});var os,BL,Bh,Sl,Fh,Uh,bl=f(()=>{os="rbm",BL=`fs.${os}`,Bh=["ttd","ttdfsx","ttds2s"],Sl="RENDER BID MIDWAY V1.0.0",Fh={title:Sl,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},Uh=1});var as,Gh,Vh,qh=f(()=>{bl();me();Fe();as={blockedSiteIDs:[1575,1910,1748,1841,6326,2410,1783,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1985,2095,2132,2170,2232,2244,2511,5491,1756,2372,1556,2086,2087,2192,2193,2194,2195,2196,2197,2198,2199,2200,2201,2202,2203,2204,2205,2206,2207,2208,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2426,3516,5344,3107,3108,3109,3110,3111,3234,6152,6603,1556,1495,6302],default:{percentage:.4},siteSpecific:[{activeSiteIds:[6615,6125,533],percentage:.5},{activeSiteIds:[5926,5927,5928,5929,5930,5931,5932,5933,5934,5935,5936,5937,5938,5939,5940,5941,5942,5943,5944,5960],percentage:2},{activeSiteIds:[7185],percentage:.4,timeout:60*1e3*5}]},Gh=()=>{let i=JSON.parse(V({key:`fs.${os}`}))||{};if(!as.blockedSiteIDs.includes(freestar.fsdata.siteId)&&typeof i.inTest=="undefined"){let e=as.siteSpecific.filter(s=>{if(s.activeSiteIds.includes(freestar.fsdata.siteId))return s}).shift(),t=(e==null?void 0:e.percentage)||as.default.percentage,r=Math.random();i.inTest=r<t,e!=null&&e.timeout&&(i.timeout=e==null?void 0:e.timeout,i.timestamp=Date.now()),ge({key:`fs.${os}`,value:i,type:G.object})}return i.inTest&&i.side===1&&freestar.log(Fh,"Session is participating in test..."),U(`fs-use-${os}`)||i.inTest},Vh=()=>as.siteSpecific.filter(e=>{if(e.activeSiteIds.includes(freestar.fsdata.siteId))return e}).shift()||as.default});var Al,wl,zh=f(()=>{L();k();Ot();dt();ns();bl();qh();Al=class{constructor({placement:e,nativeRenderManager:t,prebid:r=null,logger:s,analytics:n}){this.placement=e,this.prebid=r,this._analytics=n,this._logger=s,this._nativeRenderManager=t,this.placement.rbmOptions={cap:Uh};let o=Vh();this.frequencyCapManager=new ur({placement:this.placement,product:"rbm",timeout:o==null?void 0:o.timeout,timestamp:o==null?void 0:o.timestamp})}renderAd(){if(!this.prebid||(this.frequencyCapManager.cleanUpIfTimedOut(),this._logger.log([this.prebid.code,`Can render an ad? ${this.frequencyCapManager.allowProduct()}`]),!this.frequencyCapManager.allowProduct()))return;let e=this._nativeRenderManager.getHighestBid(this.prebid.code,Bh);this._logger.log([this.prebid.code,`Found an ad?? ${!!e}`]),e&&this._nativeRenderManager.renderAd(e,this.prebid.code).then(()=>{this.frequencyCapManager.incrementIteration();let{adId:t}=e;this._analytics.track(new Y({eventName:"RENDER_BID_MIDWAY",eventType:"SUCCESS",data:{adId:t}}))}).catch(t=>{this._logger.log([this.prebid.code,`Error native rendering prebid ad: ${t}`])})}},wl=class{constructor({nativeRenderManager:e,logger:t,analytics:r}){this._nativeRenderManager=e,this._logger=t,this._analytics=r,this._logger.setContext(Sl),this.trackers={}}renderAd({elementId:e}){if(Gh())try{let t=this.getAdUnit(e);if(!t){this._logger.log(`No adUnit found for elementId: ${e}`);return}let{placement:r,prebid:s}=t;if(!(r!=null&&r.name)){this._logger.log(`Invalid placement for elementId: ${e}`);return}this.ensureTracker(r,s),this.trackers[r.name].renderAd()}catch(t){this._logger.log(`Error in renderAd: ${t.message}`)}}getAdUnit(e){return this.adUnitManager||(this.adUnitManager=ce),this.adUnitManager.getAdUnitBySlotElementId(e)||this.adUnitManager.getAdUnitByPrebidCode(e)}ensureTracker(e,t){this.trackers[e.name]||(this.trackers[e.name]=new Al({placement:e,prebid:t,nativeRenderManager:this._nativeRenderManager,logger:this._logger,analytics:this._analytics}))}};I.class(wl,{token:l.RENDER_BID_MIDWAY,dependencies:[l.NATIVE_RENDER_MANAGER,l.LOGGER,l.ANALYTICS]})});var RI,vl,Hh=f(()=>{L();k();RI=6e3,vl=class{constructor(){this.lastRefreshTime=0}allowed(){return Date.now()-this.lastRefreshTime>RI}updateLastRefreshTime(){this.lastRefreshTime=Date.now()}};I.class(vl,{token:l.GLOBAL_REFRESH_USER_IDS_STATE})});var pr,Tl=f(()=>{pr=class{constructor(){E(this,"_bidRequestLibrary",new Map)}getSignal(e){return this._bidRequestLibrary.has(e)&&(this._bidRequestLibrary.get(e).reject(),this._bidRequestLibrary.delete(e)),new Promise((t,r)=>{this._bidRequestLibrary.set(e,{resolve:t,reject:r})})}getPendingRequest(e){return this._bidRequestLibrary.has(e)?()=>{this._bidRequestLibrary.get(e).resolve(),this._bidRequestLibrary.delete(e)}:null}shouldRefresh(){return!0}fetchBids(){}refresh(){}}});var Rl,$h=f(()=>{Tl();z();L();k();Rl=class extends pr{constructor({gamManager:e,logger:t,freestar:r,rebidManager:s,bidsManager:n}){super(),this._gamManager=e,this._freestar=r,this._logger=t,this._rebidManager=s,this._bidsManager=n}fetchBids({elementId:e,refreshLibraryItem:t}){let r=this.getSignal(e);t.dataRefreshId=ue(),this._freestar.refreshSlots.push({refreshId:t.dataRefreshId});let s=this._gamManager.instance.pubads().getSlots().find(n=>n.getSlotElementId()===e);this._bidsManager.requestBids({elementIds:[e],slots:[s],sendAdserverSignal:r})}refresh({elementId:e,refreshLibraryItem:t}){var n;this._logger.log(`freestar.refresh ${e}`),this._rebidManager.reset({elementId:e}),t.setRefreshTime();let r=this._gamManager.instance.pubads().getSlots().find(o=>o.getSlotElementId()===e);r.setTargeting("fsrefresh",`${(n=t.timesRefreshed)!=null?n:0}`);let s=this.getPendingRequest(e);typeof s=="function"?s():(t.dataRefreshId=ue(),this._freestar.refreshSlots.push({refreshId:t.dataRefreshId}),this._bidsManager.requestBids({elementIds:[e],slots:[r]}))}};I.class(Rl,{token:l.DEFAULT_REFRESHER,dependencies:[l.FREESTAR,l.LOGGER,l.REBID_MANAGER,l.GAM_MANAGER,l.BIDS_MANAGER]})});var Yh=f(()=>{Oh();Nh();kh();zh();Hh();$h()});var Cl,jh=f(()=>{z();Te();k();nr();ir();Ge();L();zd();Cl=class{constructor({bidsManager:e,analytics:t,logger:r}){this._bidsManager=e,this._analytics=t,this._logger=r,this._logger.setContext(l.REBID_MANAGER),this.map={}}getStatus({adUnitCode:e=null}){if(e)return this.getStatusByAdUnitCode({adUnitCode:e})}getStatusByAdUnitCode({adUnitCode:e}){return this.map[e]}isAbleToRebid({elementId:e}){return this.map[e]?this.map[e].count<1:!0}isValidPlacement({placement:e=!1}){return e&&!e.interstitialOptions.active}rebid({elementId:e,slot:t}){this._logger.log(`Rebidding for ${e}`),this._bidsManager.requestBids({elementIds:[e],slots:t})}handleNoBidScenario(e,t){let{slot:r}=e,s=Q({name:ne({slotId:t})});if(this._analytics.track(new Y({eventName:`EVENT_IS_EMPTY_CAN_REBID=${this.isValidPlacement({placement:s})&&this.isAbleToRebid({elementId:t})}`,eventType:"REBID",data:{event:e}})),!!this.isValidPlacement({placement:s})){if(this.isAbleToRebid({elementId:t})){this.track({elementId:t}),this.updateKeyValues({slot:r,data:{[Xr.REBID]:String(this.map[t].count)}}),bt().getFloorsData({placement:s,slotId:t,callback:({result:n})=>{this._logger.log(`Floors called for rebid for blocked ad on ${s.name}`),n&&r.updateTargetingFromMap(n),this.rebid({elementId:t,slot:r})},isRebid:!0});return}this._logger.log(`Rebid attempts exceeded ${t}`),this.reset({elementId:t})}}resetRebidStatus(e){this.map[e]&&(this.reset({elementId:e}),this._logger.log(`Rebid successful ${e}`))}reset({elementId:e}){let t=De({elementId:e});t&&this.updateKeyValues({slot:t,data:{[Xr.REBID]:"0"}}),delete this.map[e]}track({elementId:e,type:t="EMPTYRESPONSE"}){this.map[e]||(this.map[e]={count:0,type:t}),this.map[e].count+=1}updateKeyValues({slot:e,data:t}){e.updateTargetingFromMap(t)}};I.class(Cl,{token:l.REBID_MANAGER,dependencies:[l.BIDS_MANAGER,l.ANALYTICS,l.LOGGER]})});var Kh=f(()=>{jh()});var Wh=f(()=>{me();Ii();Br()});var Qh,Jh=f(()=>{Qh={sampleInterval:6e4,maxSnapshots:180,warningThresholdMb:200,criticalThresholdMb:500,minLeakThreshold:512e3}});var ri,Xh=f(()=>{ri=i=>{let e=["B","KB","MB","GB"],t=i,r=0;for(;t>=1024&&r<e.length-1;)t=t/1024,r++;return`${t.toFixed(2)} ${e[r]}`}});var Vo,Zh=f(()=>{Jh();k();nr();me();Ii();Xh();L();Vo=class{constructor(e){this._logger=e.logger,this._logger.setContext(l.MEMORY_MONITOR),this._analytics=e.analytics,this._deviceInfo=e.deviceInfo,this._geoInfo=e.geoInfo,this._refreshLibrary=e.refreshLibrary;let r=!!V({key:Lr}),s=window.performance&&window.performance.memory,n=r||Math.random()<=.05;if(!s||!n){this.enabled=!1,this.intervalId=null;return}this.enabled=!0,this.snapshots=[],this.intervalId=null,this.options=w({},Qh)}start(){this.enabled&&(this._takeSnapshot(),this.intervalId||(this.intervalId=setInterval(()=>this._takeSnapshot(),this.options.sampleInterval)))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}_getDisplayedAdsCount(){var r;let e=Object.keys(((r=window==null?void 0:window.freestar)==null?void 0:r.refreshLibrary)||{}).length||0,t=this._refreshLibrary.globalRefreshCount;return e+t}_getMemoryUsage(){let{usedJSHeapSize:e=0,totalJSHeapSize:t=0,jsHeapSizeLimit:r=0}=window.performance&&window.performance.memory||{};return{usedJSHeapSize:e,totalJSHeapSize:t,jsHeapSizeLimit:r}}_takeSnapshot(){let e=this._getMemoryUsage(),t=Date.now();if(this.snapshots.length>0){let r=this.snapshots[this.snapshots.length-1],s=(t-r.timestamp)/1e3,n=e.usedJSHeapSize-r.usedJSHeapSize,o=1024*1024,a=n/s/o,d=a*60;this._trackGrowthRate({currentUsage:e.usedJSHeapSize,previousUsage:r.usedJSHeapSize,memoryDiff:n,growthRatePerSecond:a,growthRatePerMinute:d,timeDiffSeconds:s})}this.snapshots.push(w({timestamp:t},e)),this.snapshots.length>this.options.maxSnapshots&&this.snapshots.shift(),e.usedJSHeapSize>this.options.criticalThresholdMb*1024*1024?this._handleCriticalMemory(e):e.usedJSHeapSize>this.options.warningThresholdMb*1024*1024&&this._handleWarningMemory(e)}_trackGrowthRate({currentUsage:e,previousUsage:t,memoryDiff:r,growthRatePerSecond:s,growthRatePerMinute:n,timeDiffSeconds:o}){let a=this._formatDeviceInfo(),d=this._getDisplayedAdsCount(),c=new Y({eventName:"MEMORY_MONITOR",eventType:"GROWTH_RATE",data:{currentUsage:e,previousUsage:t,memoryDiff:r,growthRatePerSecond:s.toFixed(2),growthRatePerMinute:n.toFixed(2),timeDiffSeconds:o,currentUsageFormatted:ri(e),deviceInfo:a,timestamp:Date.now(),adsCount:d}});this._analytics.track(c)}_detectMemoryLeak(){if(this.snapshots.length<3)return null;let e=this.snapshots.slice(-3),t=[];for(let s=1;s<e.length;s++){let n=e[s-1],o=e[s],a=(o.timestamp-n.timestamp)/1e3,c=(o.usedJSHeapSize-n.usedJSHeapSize)/a;t.push(c)}return t.every(s=>s>this.options.minLeakThreshold)?{averageGrowthRate:t.reduce((s,n)=>s+n,0)/t.length,lastSnapshot:this.snapshots[this.snapshots.length-1]}:null}getReport(){if(this.snapshots.length===0)return null;let e=this.snapshots[this.snapshots.length-1],t=this.snapshots[0],r=e.usedJSHeapSize-t.usedJSHeapSize,s=(e.timestamp-t.timestamp)/1e3;return{currentUsage:ri(e.usedJSHeapSize),totalGrowth:ri(r),growthRate:ri(r/s)+"/s",snapshots:this.snapshots,potentialLeak:this._detectMemoryLeak()}}_handleWarningMemory(e){this._logger.log(`Memory usage warning: ${ri(e.usedJSHeapSize)}`)}_handleCriticalMemory(e){this._logger.log(`Critical memory usage: ${ri(e.usedJSHeapSize)}`);let t=this._formatDeviceInfo(),r=this._getDisplayedAdsCount();this._analytics.track(new Y({eventName:"MEMORY_MONITOR",eventType:"CRITICAL",data:{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,formattedUsed:ri(e.usedJSHeapSize),deviceInfo:t,timestamp:Date.now(),adsCount:r}}))}_formatDeviceInfo(){var t,r,s,n,o,a,d,c;let e=(t=this._geoInfo)==null?void 0:t.iso;return{browser:{name:(r=this._deviceInfo.browser)==null?void 0:r.name,version:(s=this._deviceInfo.browser)==null?void 0:s.version},device:{type:(n=this._deviceInfo.device)==null?void 0:n.type,os:(o=this._deviceInfo.os)==null?void 0:o.name,osVersion:(a=this._deviceInfo.os)==null?void 0:a.version},engine:{name:(d=this._deviceInfo.engine)==null?void 0:d.name,version:(c=this._deviceInfo.engine)==null?void 0:c.version},geo:{country:e}}}};I.class(Vo,{token:l.MEMORY_MONITOR,defaultAlias:"memoryMonitor",dependencies:[l.LOGGER,l.FREESTAR,l.ANALYTICS,l.DEVICE_INFO,l.GEO_INFO,l.REFRESH_LIBRARY],factory:({dependencies:i})=>new Vo(i)})});var eg=f(()=>{Wh();Zh()});var si,qo=f(()=>{si=class{getElement(){throw new Error("Method not implemented.")}destroy(){}get enabled(){return!0}}});var CI,zo,Ol,xl,tg=f(()=>{L();qo();Ke();ie();k();St();J();fn();id();CI="fsbranding",zo=class extends si{constructor({placement:e,dispensaryData:t,win:r=window}){super(),this._win=r,this._placement=e,this._dispensaryData=t}get enabled(){return!!this.getLogoUrl(this._placement)}getElement(){return this.enabled?b({type:"a",style:{color:"#999"},attributes:{href:this.getLink(this._placement),target:"_blank",rel:"noreferrer"},textContent:"Freestar.com"},this._win.document):null}getLogoUrl(){var s,n,o;let e=U(CI,this._win);if((s=this._placement)!=null&&s.freestarBrandingDisabled&&!e)return null;let{branding:t}=this._dispensaryData.fsdata,r=Ur(t);return e&&(r=Ur(_e.GREEN)),(o=(n=this._placement)==null?void 0:n.stickyFooterOptions)!=null&&o.active?r:[_e.GREEN_FOOTER_ONLY,_e.GRAYSCALE_FOOTER_ONLY].includes(t)?null:r}getLink(e){let t=qe(e);return`https://ads.${Ft}/?${new URLSearchParams({utm_campaign:"branding",utm_medium:t,utm_source:this._dispensaryData.fsdata.domain,utm_content:e.name}).toString()}`}},Ol=class extends zo{getElement(){let e=this.getLogoUrl(this._placement);return e?b({type:"div",classList:["__fs-branding"],children:[b({type:"a",attributes:{href:this.getLink(this._placement),target:"_blank",rel:"noreferrer"},children:[b({type:"img",src:e,attributes:{alt:"freestar",width:"14",height:"14"}},this._win.document)]},this._win.document)]},this._win.document):null}},xl=class{constructor({dispensaryData:e,win:t}){this._dispensaryData=e,this._win=t}createLink(e){return new zo(this._getParams(e))}createIcon(e){return new Ol(this._getParams(e))}getGlobalBranding(){let{branding:e}=this._dispensaryData.fsdata;return!e||[_e.NO_BRANDING,_e.GRAYSCALE_FOOTER_ONLY,_e.GREEN_FOOTER_ONLY].includes(e)?null:e}_getParams(e){return{placement:e,dispensaryData:this._dispensaryData,win:this._win}}};I.class(xl,{token:l.BRANDING,dependencies:[l.DISPENSARY_DATA,{token:l.WINDOW,alias:"win"}]})});var Pl,OI,Ho,Nl,Dl,Ll,ig=f(()=>{L();qo();Ke();ie();k();Pr();Pl="Report This Ad",OI="fsreportad",Ho=class extends si{constructor({id:t,placement:r,confiantReportThisAdEnabled:s,idealAdStackManager:n,confiant:o,win:a=window}){super();E(this,"_report",t=>{t.preventDefault(),t.stopPropagation(),this._confiant.reportSingleAd(this._id)});this.placement=r,this._confiantReportThisAdEnabled=s,this._confiant=o,this._id=t,this._win=a,this._idealAdStackManager=n,this._abortController=new AbortController,this._createElement()}getElement(){return this._element}destroy(){var t;this._abortController.abort(),(t=this._element)==null||t.remove(),this._element=null}_createElement(){throw new Error("Method not implemented.")}get enabled(){var r,s;return U(OI,this._win)?!0:(s=(r=this.placement)==null?void 0:r.adQualityOptions)!=null&&s.disabled?!1:!!(Os()==="CONFIANT"&&this._confiantReportThisAdEnabled&&this._idealAdStackManager.allowConfiant())}},Nl=class extends Ho{_createElement(){this.enabled&&(this._element=b({type:"button",classList:["fs-report-ad-button"],attributes:{"aria-label":Pl},innerHTML:Pl},this._win.document),this._element.addEventListener("click",this._report,{signal:this._abortController.signal}))}},Dl=class extends Ho{_createElement(){if(!this.enabled)return null;let e=b({type:"button",classList:["fs-report-ad-button-icon"],attributes:{"aria-label":Pl}},this._win.document);e.addEventListener("click",this._report,{signal:this._abortController.signal}),this._element=b({children:[e]},this._win.document)}},Ll=class{constructor({confiant:e,dispensaryData:t,win:r,idealAdStackManager:s}){var n,o;this._confiant=e,this._win=r,this._idealAdStackManager=s,this._confiantReportThisAdEnabled=(o=(n=t.fsdata)==null?void 0:n.adQualityOptions)==null?void 0:o.confiantReportThisAdEnabled}createTextButton(e,t){return new Nl(this._getParams(e,t))}createIconButton(e,t){return new Dl(this._getParams(e,t))}_getParams(e,t){return{id:e,placement:t,confiant:this._confiant,confiantReportThisAdEnabled:this._confiantReportThisAdEnabled,win:this._win,idealAdStackManager:this._idealAdStackManager}}};I.class(Ll,{token:l.REPORT_AD,dependencies:[l.CONFIANT,l.DISPENSARY_DATA,l.IDEAL_AD_STACK_MANAGER,{token:l.WINDOW,alias:"win"}]})});var $o,kl,Ml,Yo,rg=f(()=>{L();qo();Te();k();kr();zs();xe();z();Io();$o=class extends si{constructor(e=window){super(),this._win=e}getElement(){return b({classList:["fs-branding-spacer"]},this._win.document)}},kl=class{constructor(e=[]){this._element=null,this._components=e}getElement(){return this._element}hide(){this._element&&(this._element.style.visibility="hidden")}show(){this._element&&(this._element.style.visibility="visible")}destroy(){var e;this._components.forEach(t=>t.destroy()),(e=this._element)==null||e.remove(),this._element=null,this._components=[]}},Ml=class extends kl{constructor(e=[],t=window){super(e);let r=this._components.flatMap(s=>s!=null&&s.enabled?s:[]);!r.length||r.every(s=>s instanceof $o)||(this._element=b({classList:["__fs-ancillary"],style:{visibility:"hidden"},children:r.map(s=>s.getElement())},t.document))}},Yo=class{constructor({freestar:e,gamManager:t,branding:r,reportAd:s,win:n}){this._freestar=e,this._gamManager=t,this._branding=r,this._reportAd=s,this._win=n,this._items=new Map,this._handleSlotEvents()}_handleSlotEvents(){this._gamManager.instance.pubads().addEventListener(we,e=>{let t=e.slot.getSlotElementId(),r=this._win.document.getElementById(t),s=r==null?void 0:r.querySelector(`#${CSS.escape(t)} > div[id*="google_ads_iframe_"]`);this.create({id:t,placement:Q({name:ne({slotId:t})}),container:s})}),this._gamManager.instance.pubads().addEventListener(Rt,e=>{let t=e.slot.getSlotElementId();this.hide(t)})}create({id:e,placement:t,container:r}){var u,p;if([e,t,r,this.isEnabled({id:e,placement:t})].some(m=>!m))return;let s=this._items.get(e),n=r.querySelector("__fs-ancillary");if(s&&n){s.show();return}s==null||s.hide(),s==null||s.destroy(),n==null||n.remove();let o=(u=this._branding)==null?void 0:u.createIcon(t),a=(p=this._reportAd)==null?void 0:p.createTextButton(e,t),d=new Ml([o,new $o(this._win),a],this._win);if(n=d.getElement(),!n)return;this._items.set(e,d),r.appendChild(n);let[c]=r.getElementsByTagName("iframe")||[];c&&Bm(c).then(()=>{d.show()})}get(e){return this._items.get(e)||null}show(e){let t=this._items.get(e);t&&t.show()}hide(e){let t=this._items.get(e);t&&t.hide()}isEnabled({id:e,placement:t}){if(t&&(qs(t)||np(t.sizes||[])))return!1;if(e){let r=this._win.document.getElementById(e);return(r==null?void 0:r.getAttribute(Js))!=="false"}return!0}};I.class(Yo,{token:l.ANCILLARY,dependencies:[l.GAM_MANAGER,l.BRANDING,l.REPORT_AD,{token:l.WINDOW,alias:"win"}],factory:e=>O(void 0,[e],function*({dependencies:i}){return yield i.gamManager.ready,new Yo(i)})})});var sg=f(()=>{L();k();I.object({token:l.CONFIG_MANAGER,dependencies:[l.FREESTAR],defaultAlias:"config",factory:({dependencies:i})=>{var t,r,s;let e=(r=(t=i.freestar)==null?void 0:t.configManager)!=null?r:{};return(s=i.freestar)==null||delete s.configManager,e}})});var ng=f(()=>{L();k();I.object({token:l.DISPENSARY_DATA,defaultAlias:"dispensaryData",dependencies:[l.FREESTAR],factory:({dependencies:i})=>{let{freestar:e}=i,t=e.dispensaryData||{};return delete e.dispensaryData,t}})});var wi=f(()=>{Ap();nr();xm();Zr();kd();Lm();Io();Hm();Km();Qm();ih();Yh();Kh();yl();eg();tg();ig();rg();sg();ng()});var xI,Bl,j,Ve=f(()=>{Ra();Oa();Bs();Dr();Fs();Ua();ka();Ui();Ke();J();Ii();me();xe();L();wi();k();Nr();yi();xI={title:"IDEAL AD STACK v3.0"};window.freestar=window.freestar||{};Bl=class{constructor(){this.active=!0,this.config=null,this.configByRtt=null,this.refreshCallback=()=>this.refreshData(),this.refreshingInProgress=!0,this.logs=new ks,this.debugOrTestSession=null,this.allowedBothBidders=null,this.s2sBidders=null}init(){return O(this,null,function*(){let e,t,r,s=Ue().get({requestId:"getIdealData"});if(s)({config:e,source:t,errors:r}=this.parseRequestHandlerResult(s));else{let n=Ms({key:gi});n?(e=n,r=[],t=Gs):(e={},r=["data not yet available"],t=_i)}this.logs.add(`Got config from ${t}`),r.length>0&&(this.sendErrorMessage(r),this.logs.add("Config invalid!",JSON.stringify(e))),this.setConfig(e),this.setKVPs(),this.setGlobalTimeout(),this.logs.show(xI),yield this.asyncInit()})}setConfig(e){this.config=e,this.setConfigByRtt()}sendErrorMessage(e){D.instance.resolve(l.ANALYTICS).then(t=>{t.track(new Y({eventName:"DYNAMIC_AUCTION_TIMEOUT_TEST",eventType:"ERRORS",data:{errors:e.join(", ")}}))})}sessionStoreConfig({config:e}){let t=e==null?void 0:e.floors,r=!Et({siteId:freestar.fsdata.siteId}),s=e==null?void 0:e.testGroup;r&&(!t&&s!=="experiment"||t!=null&&t.error)?Rf({key:gi,value:e}):r&&(t==null?void 0:t.length)===0?Cf({key:gi,value:e}):Tf({key:gi,value:e})}asyncInit(){return O(this,null,function*(){let e=yield Ue().fetch({requestId:"getIdealData",fetchFn:qi}),{config:t,source:r,errors:s}=this.parseRequestHandlerResult(e);r===_i&&s.length===0&&this.sessionStoreConfig({config:t}),t.knownUser||this.bindEvents(),this.refreshingInProgress=!1})}refreshData(){return O(this,null,function*(){if(this.refreshingInProgress)return;this.refreshingInProgress=!0;let e=yield Ue().fetch({requestId:"getIdealData",fetchFn:qi});if(!this.parseRequestHandlerResult(e).config.knownUser&&zt.isKnown){Ue().clearClassCachedData({requestId:"getIdealData"});let t=yield Ue().fetch({requestId:"getIdealData",fetchFn:Fa}),{config:r,source:s,errors:n}=this.parseRequestHandlerResult(t);s===_i&&n.length===0&&(this.sessionStoreConfig({config:r}),window.freestar.queue.push(()=>{window.fsprebid.offEvent(yt,this.refreshCallback)}))}this.refreshingInProgress=!1})}bindEvents(){!window.freestar||!window.freestar.queue||window.freestar.queue.push(()=>{window.fsprebid.onEvent(yt,this.refreshCallback)})}parseRequestHandlerResult(e){let t,r,s,{data:n,error:o}=e;return o?(t={},s=[o.toString()]):({data:t,source:r}=n,r===_i?s=this.getErrors(t):s=[]),{config:t,source:r,errors:s}}getConfigByRtt(){return this.configByRtt}setConfigByRtt(){var r,s;if(this.configByRtt=this.config,this.config.roundTripTime==null)return;let e=Number(this.config.roundTripTime);if(Number.isNaN(e))return;let t=(s=(r=this.config)==null?void 0:r.clientServerRTT)==null?void 0:s.find(n=>{let[o,a]=n.rttRange;return e>=o&&e<a});t&&(this.configByRtt=t.config)}getAllowedBothBidderOverrides({clientServer:e={}}){let t=[],r=this.getAllowedBothBidders();return Object.entries(e).forEach(([s,n])=>{n===Ht.BOTH&&!r.includes(s)&&t.push(s)}),t}getConfig(){let e=w({},this.getConfigByRtt());e.clientServer||(e.clientServer={}),e.clientServer=w({},this.applyTestSessionOverride(e.clientServer));let t=this.getAllowedBothBidderOverrides({clientServer:e.clientServer});return t.length>0&&(delete e.clientServerMask,t.forEach(r=>{delete e.clientServer[r]})),e}getAllowedBothBidders(){return this.allowedBothBidders||(this.allowedBothBidders=this._buildAllowedBothBidders()),this.allowedBothBidders}_buildAllowedBothBidders(){var e;return(((e=freestar.fsdata)==null?void 0:e.networks)||[]).filter(t=>t.allowConcurrent&&(!t.distinctParamsRequired||t.sizes.some(r=>r.serverParams))).map(t=>t.slug)}applyTestSessionOverride(e){if(!this.isDebugOrTestSession())return e;let t=w({},e);return Object.keys(t).forEach(r=>{var n,o,a;let s=((a=(o=(n=window==null?void 0:window.freestar)==null?void 0:n.fsdata)==null?void 0:o.networks)==null?void 0:a.find(d=>d.slug===r))||null;s&&t[r]!=="off"&&(s.isClient?t[r]=Ht.CLIENT:s.isPrebidServer?t[r]=Ht.SERVER:s.isClientAndServer&&(t[r]=Ht.BOTH))}),t}getServerToServerDetails(){if(!this.active)return{};let{testGroup:e}=this.config,{clientServerMask:t}=this.getConfig();return{clientServerMask:t,testGroup:e}}getDynamicAuctionTimeoutDetails(){let{maxTimeout:e=window.freestar.fsdata.timeout,roundTripTime:t=null}=this.config;return{maxTimeout:e,roundTripTime:t}}getMaxAuctionTimeout(){let{maxTimeout:e}=this.getDynamicAuctionTimeoutDetails();return e}setGlobalTimeout(){let e=this.getMaxAuctionTimeout()||3e3;window.freestar.fsdata.timeout=e,window.freestar.fsdata.mobileTimeout=e}setKVPs(){let{roundTripTime:e=null}=this.getDynamicAuctionTimeoutDetails(),{clientServerMask:t=null,testGroup:r=null}=this.getServerToServerDetails();freestar.queue.push(()=>{googletag.pubads().setTargeting("floors_user",String(zt.isKnown)),e&&googletag.pubads().setTargeting("floors_rtt",`${e}`),!this.isDebugOrTestSession()&&(t&&googletag.pubads().setTargeting("fs_clientservermask",t),r&&googletag.pubads().setTargeting("fs_testgroup",`${r}`))}),this.logs.add(`fs_clientservermask: ${t} fs_testgroup: ${r} floors_user: ${zt.isKnown} floors_rtt: ${e}`)}getErrors(e){let t=[];return Object.keys(e).length===0?t.push("no params"):typeof e.maxTimeout=="undefined"&&t.push("no maxTimeout"),t}getFloorsData(){return O(this,null,function*(){let e=yield Ue().fetch({requestId:"getIdealData",fetchFn:qi}),{config:t}=this.parseRequestHandlerResult(e);return t&&t.floors})}getBypassFirstAuction(){let e=this.getConfig();return(e==null?void 0:e.preGAMAuction)==="off"}getFeatureConfig(){return this.config&&this.config.features||{}}allowBrowsi(){return this.getFeatureConfig().browsi!=="off"}allowConfiant(){return this.getFeatureConfig().confiant!=="off"}allowBlockthrough(){return this.getFeatureConfig().blockthrough!=="off"}isRebidAllowed(){return this.getFeatureConfig().rebid!=="off"}isGAMEnabled(){return this.getFeatureConfig().gam!=="off"}getS2sBidders(e){return this.s2sBidders||(this.s2sBidders=this._buildS2sBidders(e)),this.s2sBidders}_buildS2sBidders(e=new gt){let t=new Set;window.freestar.fsdata.networks.forEach(function(s){s.isPrebidServer&&t.add(s.slug)}),window.freestar.fsdata.placements.forEach(function(s){s.networks.forEach(function(n){n.isPrebidServer&&t.add(n.slug)})});let{clientServer:r}=this.getConfig();return Object.entries(r).forEach(([s,n])=>{n==="off"||n===Ht.CLIENT?t.delete(s):(n===Ht.SERVER||n===Ht.BOTH)&&t.add(s)}),!t.size&&e&&e.hasValidStoredRequests()&&t.add(e.getSlug()),Array.from(t)}isS2SDisabled(){return this.getS2sBidders().length===0}allowRefresh(){return this.getFeatureConfig().refresh!=="off"}determineAdRefreshBehavior(){var n,o;let e=!!((o=(n=window.freestar)==null?void 0:n.fsdata)!=null&&o.adRefreshDisabled),t=!this.isGAMEnabled()&&this.isS2SDisabled(),r=this.allowRefresh();return{isRefreshAllowed:!e&&(t||r)}}_getDebugOrTestSession(){var o,a,d,c,u,p;let e=U(qt.fsdebug),t=U(qt.fsaltconfig),r=(d=(a=(o=window.freestar)==null?void 0:o.fsdata)==null?void 0:a.networks)==null?void 0:d.some(m=>m.isClient!==void 0||m.isPrebidServer!==void 0);if(e||t)return r;let s=(p=(u=(c=V({key:Tr,type:G.object.type}))==null?void 0:c.pubfigSettings)==null?void 0:u.abtest)==null?void 0:p.testType,n=V({key:Mf,type:G.string.type});return s==null&&n==null||[s,n].some(m=>m==="PUBFIG_TEMPLATE")?!1:r}isDebugOrTestSession(){return this.debugOrTestSession===null&&(this.debugOrTestSession=this._getDebugOrTestSession()),this.debugOrTestSession}},j=_t.getInstanceFn({ClassConstructor:Bl,instanceName:"idealAdstackManager"})});function jo(){return Fl==null&&(Fl=new Ul),Fl}var Ul,Fl,Gl=f(()=>{xe();Te();Ul=class i{constructor(){this.slotMaxBids={},this.slotToPlacement={},this.placementToSlots={}}initiateWatcher(e){e.que.push(()=>{e.onEvent(Si,this.handleBidResponse.bind(this))})}handleBidResponse(e){this.addSlotPlacementAssociation(e.adUnitCode),this.addBidResponse(e)}addSlotPlacementAssociation(e){if(e&&!this.slotToPlacement[e]){let t=ne({slotId:e});t&&(this.slotToPlacement[e]=t,this.placementToSlots[t]||(this.placementToSlots[t]=[]),this.placementToSlots[t].push(e))}}addBidResponse(e){let{adUnitCode:t,cpm:r}=e;t&&r&&(!this.slotMaxBids[t]||this.slotMaxBids[t]<r)&&(this.slotMaxBids[t]=r)}getSlotMaxBid(e){return i.validateMaxBid(this.slotMaxBids[e])}getPlacementMaxBidBySlot(e){let t=this.slotToPlacement[e];return this.getPlacementMaxBid(t)}getPlacementMaxBid(e){let t=this.placementToSlots[e]||[];return i.validateMaxBid(Math.max(...t.map(r=>this.getSlotMaxBid(r))))}static validateMaxBid(e){return!Number.isNaN(e)&&e!=null&&e>0?e:null}},Fl=null});function mr(o){return O(this,arguments,function*({deviceVendor:i,deviceType:e,refreshNumber:t,placement:r,maxBid:s,isFloorsActive:n}){let a=Gi(),d=i==="Apple"?"smartphone-ios":e,c=zt.isKnown,u=r&&s!=null?`&mb=${s}&au=${encodeURIComponent(r)}`:"",p=freestar.locData?freestar.locData.iso:"",m=n?"0":"1",g=`d=${a}&t=${d}&k=${c}&r=${t}${u}&c=${p}`,h=`${Of}?${g}`,S=yield fetch(h,{headers:{"x-api-key":Us,"x-lm":m}});if(!S.ok)throw new Error(`Request failed with status ${S.status}`);return S.json()})}var Vl=f(()=>{Vs();Bs();La()});var ni,ql,bt,ir=f(()=>{Ve();Gl();Fs();Vl();Ui();L();wi();k();yi();ke();ni=class ni{constructor(e,t){this.idealAdStackManager=e,this.maxBidTracker=t,this.initialData=null,this.requests=[],this.maxBidRequests={},this.failedRequestCount=0,this.throttleRequests=!1,this.throttleExpiry=0}getInitialFloorsData(){return O(this,null,function*(){if(Et({siteId:freestar.fsdata.siteId}))return this.initialData={timestamp:new Date,floors:[]};let e=0,{timestamp:t,floors:r}=this.getRequest(e);return this.initialData?yield r:this.initialData={timestamp:t,floors:yield r},this.initialData})}getRequest(e,t,r){if(this.shouldThrottleRequests()){let n=t&&r!=null?`, placement ${t}, maxBid ${r}`:"";return freestar.log({level:20,title:"Floors"},`Floors throttled: fetch skipped for refresh ${e}${n}`),{timestamp:new Date,floors:Promise.resolve([])}}if((Zt()?t==null?void 0:t.customTargetingPlacementName:t)&&r!=null){if(this.maxBidRequests[t.name]||(this.maxBidRequests[t.name]=[null]),this.maxBidRequests[t.name][e]||(this.maxBidRequests[t.name][e]={}),!this.maxBidRequests[t.name][e][r]){let n=Zt()?t.customTargetingPlacementName:t.dfpId;this.maxBidRequests[t.name][e][r]={timestamp:new Date,floors:this.fetchData(e,n,r)}}return this.maxBidRequests[t.name][e][r]}return this.requests[e]||(this.requests[e]={timestamp:new Date,floors:this.fetchData(e)}),this.requests[e]}reportError(e){freestar.log({level:40,title:"Floors"},"Floors error",e),D.instance.resolve(l.ANALYTICS).then(t=>{t.track(new Y({eventName:"FLOORS_ERROR",eventType:"FETCH_RESPONSE",data:{message:e}}))})}fetchInitialData(){return O(this,null,function*(){let t=yield this.idealAdStackManager().getFloorsData();if(t)return!t.error&&t.length>0?t:(t!=null&&t.error&&(t!=null&&t.message)&&this.reportError(t.message),this.startThrottle(),[]);let{data:r,error:s}=yield Ue().fetch({requestId:"getFloorsData",fetchFn:()=>{var n,o;return mr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:(o=(n=window.freestar)==null?void 0:n.fsdata)==null?void 0:o.isTriple13Enabled})}});if(s)this.reportError(s.toString());else{if(r&&!r.error&&r.length>0)return r;r!=null&&r.error&&(r!=null&&r.message)&&this.reportError(r.message)}return this.startThrottle(),[]})}countRequestFailed(){this.failedRequestCount+=1,this.failedRequestCount>=ni.MAX_FAILED_REQUESTS&&this.startThrottle()}startThrottle(){this.throttleRequests=!0,this.throttleExpiry=Date.now()+ni.FAILED_REQUEST_TIMEOUT}countRequestSucceeded(){this.failedRequestCount=0,this.throttleRequests=!1}shouldThrottleRequests(){return this.throttleRequests&&Date.now()>this.throttleExpiry?(this.startThrottle(),!1):this.throttleRequests}fetchData(e,t,r){return O(this,null,function*(){var o,a;if(e===0)return yield this.fetchInitialData();let s,n;try{s=yield mr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:e,placement:t,maxBid:r,isFloorsActive:(a=(o=window.freestar)==null?void 0:o.fsdata)==null?void 0:a.isTriple13Enabled})}catch(d){n=d}if(n)this.reportError(n.toString());else{if(s&&!s.error&&s.length>0)return this.countRequestSucceeded(),s;s!=null&&s.error&&(s!=null&&s.message)&&this.reportError(s.message)}return this.countRequestFailed(),[]})}getFloor(e,t,r){let s=Zt()?r.customTargetingPlacementName:r.dfpId,n=t.find(c=>s===c.adUnit),o=n?n.upr:"timeout",a=n?new Date(n.lastUpdated):e,d=String(a.getUTCHours());return{floors_id:o,floors_hour:d}}getInitialFloorKVP({placement:e,keyMap:t}){t||(t={});let s=(Zt()?e==null?void 0:e.customTargetingPlacementName:e)?this.getFloor(this.initialData.timestamp,this.initialData.floors,e):{};return Object.assign(t,s)}getFloorsData(n){return O(this,arguments,function*({placement:e,slotId:t,callback:r,isRebid:s=!1}){let o,a;if(Ei({siteId:freestar.fsdata.siteId,placement:e})||Ci(e))return o=null,a="inactive",void r({result:o,reason:a});let c=(yield D.instance.resolve(l.REFRESH_LIBRARY)).getRefreshLibraryItem({slotId:t}),u=((c==null?void 0:c.timesRefreshed)||0)+(s?1:0),p,m;if(u===0||s)({timestamp:p,floors:m}=this.getRequest(u));else{let g=this.maxBidTracker.getSlotMaxBid(t),h=ni.formatMaxBid(g);({timestamp:p,floors:m}=this.getRequest(u,e,h))}o=this.getFloor(p,yield m,e),a=null,r&&r({result:o,reason:a})})}prefetchFloorsData({placement:e,slotId:t,timesRefreshed:r}){let s=this.maxBidTracker.getSlotMaxBid(t),n=ni.formatMaxBid(s);this.getRequest(r,e,n)}static formatMaxBid(e){if(e!=null){let t=e.toString();if(t){if(t.includes("e-"))return"0";if(t.includes("e"))return e.toPrecision(3);let r=e.toString().match(/^-?\d*(?:\.\d{0,2})?/);if(r){let s=r[0];for(;s.includes(".")&&(s.endsWith("0")||s.endsWith("."));)s=s.slice(0,-1);return s}}}return null}};E(ni,"MAX_FAILED_REQUESTS",2),E(ni,"FAILED_REQUEST_TIMEOUT",1e3*60*15);ql=ni,bt=_t.getInstanceFn({ClassConstructor:ql,instanceName:"floorsManager",params:[j,jo()]})});function og({freestar:i=window.freestar,network:e}){return!e.deviceExclusive||e.deviceExclusive.toLowerCase()===i.deviceInfo.device.type}var ag=f(()=>{});function dg(i,e){if("indexExchange".indexOf(e.bidder)>-1&&e.params&&e.params.id&&e.params.id<0&&(e.dynamicId=!0),e.bidder==="conversant"){e.params.secure=freestar.isHttps;for(let s in e.params)switch(s){case"bidfloor":case"position":case"maxduration":e.params[s]=Number(e.params[s]);break}}if(e.bidder==="cox"&&(e.params.id=Number(e.params.id),e.params.siteId=Number(e.params.siteId)),e.bidder==="justpremium"&&e.params&&(e.params.allow=cg(e.params.allow),e.params.exclude=cg(e.params.exclude),e.params.allow!==void 0&&(e.params.allow===null||e.params.allow.length===0)&&delete e.params.allow,e.params.exclude!==void 0&&(e.params.exclude===null||e.params.exclude.length===0)&&delete e.params.exclude),e.bidder==="pulsepoint")for(let s in e.params)s=="cf"&&(e.params[s]=e.params[s].replace("X","x"));if(e.bidder==="connectad")for(let s in e.params)(s==="siteId"||s==="networkId")&&(e.params[s]=Number(e.params[s]));if(e.bidder==="grid"&&e.params&&e.params.uid&&(e.params.uid=Number(e.params.uid)),e.bidder==="beachfront")for(var t in e.params)(t=="video"||t=="banner")&&(e.params[t]=typeof e.params[t]=="object"?e.params[t]:JSON.parse(e.params[t]));if(e.bidder==="undertone"&&(e.params.publisherId=Number(e.params.publisherId),e.params.placementId=Number(e.params.placementId)),e.bidder==="zid"&&(e.params.adUnitID=Ut(e.params.adUnitID)),e.bidder==="mantis"&&(e.params.zone=i.name),e.bidder==="districtmDMX"&&(e.params.dmxid=Number(e.params.dmxid),e.params.memberid=Number(e.params.memberid)),e.bidder==="answermedia"&&(e.params.siteId=Ut(e.params.siteId),e.params.networkId=Ut(e.params.networkId),e.params.zoneIds&&bs(e.params.zoneIds)&&e.params.zoneIds.split(",").length>0?e.params.zoneIds=e.params.zoneIds.split(",").map(function(s){return Ut(s)}):e.params.zoneIds=[]),e.bidder==="consumable"&&(e.params.siteId=Ut(e.params.siteId),e.params.networkId=Ut(e.params.networkId),e.params.unitId=Ut(e.params.unitId)),["appnexus","appnexusAst","brealtime","pagescience","defymedia","gourmetads","matomy","featureforward","oftmedia"].indexOf(e.bidder)>-1)for(let s in e.params)s=="placementId"&&(e.params[s]=Number(e.params[s])),["allowSmallerSizes","member","invCode"].indexOf(s)>-1&&delete e.params[s];if(["defymedia","zid"].indexOf(e.bidder)>-1)return!1;e.bidder==="sortable"&&(e.params.tagId=i.name);let r=["sharethrough","triplelift"];if(i.stickyFooter===!0&&r.indexOf(e.bidder)>-1)return!1;if(e.bidder==="criteo"&&(e.params.zoneId=Number(e.params.zoneId)),e.bidder==="taboola"&&(e.params.tagId=i.name),e.bidder==="monetixads"&&e.params&&e.params.networkId&&(e.params.networkId=Number(e.params.networkId)),e.bidder==="teads")for(let s in e.params)(s==="pageId"||s==="placementId")&&(e.params[s]=Number(e.params[s]));if((e==null?void 0:e.bidder)==="flipp"&&(e!=null&&e.params)){let{siteId:s,zoneIds:n,dwellExpand:o}=e.params;if(s&&n){let a=Number(s),d=Number(n);[a,d].every(c=>!Number.isNaN(c))&&(e.params.siteId=a,e.params.zoneIds=[d]),o==="true"&&(e.params.options={dwellExpand:!0})}}return st(e)}function PI(i,e=!1){if(e===!1)return!0;let{allowedGeos:t=[],disallowedGeos:r=[]}=i,{iso:s}=e,n=freestar.networkMap[i.id];return n&&(n.allowedGeos&&n.allowedGeos.length&&(t=n.allowedGeos),n.disallowedGeos&&n.disallowedGeos.length&&(r=n.disallowedGeos)),t&&t.length&&t.indexOf(s)===-1||r&&r.length&&r.indexOf(s)!==-1?(freestar.log(1,`Users in ${freestar.locData.iso} are not allowed to use ${i.slug}!`),!1):!0}function NI({network:i}){if(freestar.networkMap===!1||Object.keys(freestar.networkMap).length===0)return!0;let e=freestar.networkMap[i.id];return!e||Me()&&Uc.indexOf(i.slug)!==-1?(freestar.log(1,"isNetworkActive - Page Speed Optimized in effect, or network is inactive filtering out",i.slug),!1):e&&tf(e.active)?e.active:!0}function lg(i){return ug(i.size,[0,0])&&delete i.size,i}function Je(){return window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function Ko(i,e){if(e.length>0&&Array.isArray(e[0])){let r=e.length;if(e[0][0]===0&&e[0][1]===0)return!0;for(;r--;)if(Ko(i,e[r]))return!0}let t=i.length;for(;t--;)if(i[t][0]===e[0]&&i[t][1]===e[1])return!0;return!1}function ug(i,e){let t=i.length;for(;t--;)if(i[t][0]===e[0]&&i[t][1]===e[1])return!0;return!1}function Hr(){return freestar.fsdata.placements}function Qn(i){return!i.validAdSizes||!i.bidders||i.bidders.length===0||i.stickyFooter||i.dynamicAd?!1:DI(i)}function DI(i){return freestar.config!==void 0&&freestar.config.enabled_slots!==void 0?LI(freestar.config.enabled_slots,i.name):!0}function LI(i,e){for(let t=0;t<i.length;t++)if(i[t].placementName===e)if(document.readyState==="complete"){if(window.document.getElementById(e))return!0}else return!0;return!1}function cg(i){if(!i)return null;let e=null;try{e=JSON.parse(i)}catch(t){e=null}return e!==null&&e.length>0?e:null}function fg({network:i,adQualityBlockList:e}){return PI(i,window.freestar.locData)&&NI({network:i})&&Ps({network:i,adQualityBlockList:e})&&og({network:i})}function Zi(){return O(this,null,function*(){let i=xs();function e(s,n){W(s.bidder)==="ix"?n.sizes.forEach(o=>{let a={bidder:s.bidder,params:{siteId:s.params.siteId,size:o}};n.bidders.push(a)}):s&&n.bidders.push(s)}function t(s,n,o){let{clientServer:a}=j().getConfig(),d=a[s.slug];if(d==="off")return;d||(d=s.isPrebidServer?"server":"client");let c=freestar.fsdata.networks.find(u=>u.slug===s.slug);if(d!=="both"){let u=n.params;if((c!=null&&c.distinctParamsRequired||s.distinctParamsRequired)&&d==="server"){if(!n.serverParams)return;u=n.serverParams}let p={bidder:s.slug,size:n.size,params:u},m=dg(o,lg(p));m&&e(m,o);return}[{bidderName:Ns(s.slug),params:n.params},{bidderName:s.slug,params:n.serverParams}].forEach(({bidderName:u,params:p})=>{if(p){let m={bidder:s.slug,size:n.size,params:p},g=dg(o,lg(m));g&&e(B(w({},g),{bidder:u}),o)}})}let r=freestar.config.channel||freestar.fsdata.defaultChannel;r&&(freestar.log(9," Setting the channel to:"+r),freestar.config.orignalChannel=r),freestar.fsdata.placements=freestar.fsdata.placements.filter(s=>!s.archived),freestar.fsdata.placements.forEach(s=>O(this,null,function*(){r&&(s.dfpId=s.dfpId.replace("{{channel}}",r),freestar.log(9," Setting the dfp id to:"+s.dfpId)),s.bidders=[],s.sizes=[],s.validAdSizes=!1,s.sizeMappings.sort(function(c,u){return c.viewport.size[0]===u.viewport.size[0]?0:c.viewport.size[0]>u.viewport.size[0]?-1:1});let n=c=>c[0]===320&&c[1]===50,o=c=>{c.size&&(c.size=[[300,250]])},a=(c,u)=>{if(Array.isArray(c.size[0]))c.size.forEach(p=>{n(p)?(c.size.push([300,250]),u(null,!0)):u(!0)});else{let p=c.size;n(c.size)?(c.size=[p,[300,250]],u(null,!0)):u(!0)}};for(let c=0;c<s.sizeMappings.length;c++){let u=s.sizeMappings[c];if(Je()>=u.viewport.size[0]){for(let p=0;p<u.size.length;p++){let m=u.size[p];s.selectedSize=u,m[0]==35843?(s.fluidAd=!0,s.validAdSizes=!0):Ko(u.size,m)&&!ug(s.sizes,m)&&(freestar.forceSize&&ws(freestar.forceSize.sort(),m.sort())?s.sizes.push(m):freestar.forceSize||s.sizes.push(m))}s.sizes.length>0&&(s.validAdSizes=!0);break}}s.ignoreSiteBidders||freestar.fsdata.networks.forEach(c=>{fg({network:c,adQualityBlockList:i})&&Is({value:c.sizes})&&c.sizes.forEach(u=>{Ko(s.sizes,u.size)&&t(c,u,s)})});let d=[];if(s.networks.forEach(c=>{fg({network:c,adQualityBlockList:i})&&c.sizes.forEach(u=>{if(d.push(u.size[0]),Ko(s.sizes,u.size)){if(u.deviceExclusive&&u.deviceExclusive.toLowerCase()!==freestar.deviceInfo.device.type)return;t(c,u,s)}})}),s.sizes=ma(s.sizes),s.bidders=ma(s.bidders),s.sizes.length>0){let{active:c,adhesionRemove:u}=mt({placement:s,type:pe.STICKY_FOOTER_OPTIONS});c&&u&&document.getElementById("fs-special-remove")&&(s.bidders=s.bidders.filter(p=>!["33across","gumgum"].includes(W(p.bidder))))}})),freestar.log(1," freestar.fsdata.placements : "+JSON.stringify(freestar.fsdata.placements))})}function tr(){let i=Fc,e=i.length,t=!1;if(freestar.locData&&freestar.locData.iso)for(let r=0,s=e;r<s;r++){let n=i[r];if(freestar.fsdata.siteId===n.siteId&&n.restrictedCountries.indexOf(freestar.locData.iso)>-1){t=!0;break}}return t}function Zt(){return zl==null&&(zl=freestar.fsdata.placements.some(i=>i.customTargetingPlacementName)),zl}function Ci(i){return Zt()&&!i.customTargetingPlacementName}var jm,zl,ke=f(()=>{Mi();J();nt();xr();Pr();re();Be();ir();Ve();hi();ag();jm=({adUnitPath:i})=>window.freestar.fsdata.placements.find(e=>i===e.dfpId)});function kI(i){let e={},t=st({code:i.name,sizes:i.sizes,mediaTypes:null,bids:i.bidders}),r=qe(i),{battr:s=null}=window.freestar.fsdata.ortb||{};t.ortb2Imp={ext:{data:{fs_ad_product:r}},tagid:i.name,battr:s},i.storedRequestId&&(t.ortb2Imp.ext.prebid={storedrequest:{id:i.storedRequestId}});let n=!1;if(i.sizeMappings.forEach(a=>{!n&&Je()>=a.viewport.size[0]&&(a.mediaTypes.forEach(d=>{typeof e[d]=="undefined"&&(e[d]={}),typeof e[d].sizes=="undefined"&&(e[d].sizes=[]),a.size.forEach(h=>{if(h[0]<35843){if((d==="banner"||d==="native")&&"302x170, 443x250, 554x312, 640x360".includes(`${h[0]}x${h[1]}`))return;e[d].sizes.push(h)}}),e[d].sizes=nf(e[d].sizes);let c=Gc.map(h=>h.join("x")),u=[],p=xs();i.networks&&i.networks.forEach(h=>{Ps({network:h,adQualityBlockList:p})&&h.sizes&&h.sizes.forEach(A=>{A.size.forEach(S=>{u.push(S)})})});let m=u.filter(h=>Array.isArray(h)).map(h=>h.join("x")),g=i.sizes.filter(h=>Array.isArray(h)).map(h=>h.join("x"));if(e[d].sizes=e[d].sizes.filter(h=>{if(c.indexOf(h.join("x"))!==-1||g.indexOf(h.join("x"))!==-1&&m.indexOf(h.join("x"))!==-1)return h}),e[d].sizes=e[d].sizes.sort((h,A)=>h[0]+h[1]<A[0]+A[1]?1:A[0]+A[1]<h[0]+h[1]?-1:0),d==="native"&&(e[d]=Object.assign(e[d],{type:"image",sendTargetingKeys:!1})),d==="video"){let h=[1,1];e[d].sizes.forEach(S=>{h[0]<S[0]&&(h=S)});let A=h[0]>=500?[[552,334],[640,360]]:[[300,169],[400,225]];e[d]=Object.assign({},e[d],{api:[2],context:"instream",delivery:[2],linearity:2,maxduration:window.freestar.fsdata.adRefreshRate,mimes:["video/mp4","application/javascript","video/webm"],minduration:1,placement:1,playbackmethod:[6],playerSize:A[0],plcmt:4,protocols:[2,3,5,6],size:A,skip:0,useCacheKey:!0,renderer:{render:S=>{D.instance.create(l.IN_BANNER_VIDEO_PLAYER,{provide:{params:{bid:S}}})},url:"https://a.pub.network/superflex/loader.js"}})}}),n=!0)}),t.mediaTypes=e,!t.bids)return;for(let a=t.bids.length-1;a>=0;a--){if(t.bids[a].dynamicId&&(t.bids[a].params.id=++freestar.dynamicIdNum),t.bids[a].bidder){let d={minViewPort:[0,0],relevantMediaTypes:["banner","native"]},c={minViewPort:[0,0],relevantMediaTypes:["banner","native","video"]};switch(W(t.bids[a].bidder)){case"zid":t.bids[a].params.adUnitID=Number(t.bids[a].params.adUnitID),t.bids[a].sizeConfig=[d];break;case"appnexus":t.bids[a].params.keywords={fs_ad_product:[r||""]},t.bids[a].sizeConfig=[c];break;case"amazon":t.bids.splice(a,1),t.bids[a].sizeConfig=[d];break;case"onemobile":t.bids[a].params.ext=Object.assign(t.bids[a].params.ext||{},{req:location.href}),t.bids[a].sizeConfig=[d];break;case"ttd":t.bids[a].params.publisherId=freestar.fsdata.companyId,t.bids[a].sizeConfig=[d];break;case"gourmetads":t.bids[a].params.use_pmt_rule&&t.bids[a].params.use_pmt_rule==="true"&&(t.bids[a].params.use_pmt_rule=!0),t.bids[a].params.usePaymentRule&&t.bids[a].params.usePaymentRule==="true"&&(t.bids[a].params.usePaymentRule=!0),t.bids[a].sizeConfig=[d];break;case"resetdigital":MI()||t.bids.splice(a,1);break;case"fsxs2s":case"pubmatic":case"rubicon":case"ix":case"unruly":case"yieldmo":case"openx":case"yahoo":case"mediagrid":t.bids[a].sizeConfig=[c];break;default:t.bids[a].sizeConfig=[d];break}}t.bids[a].size?pg(t.bids[a].size[0],t.mediaTypes.banner.sizes)||t.bids.splice(a,1):t.bids[a].params.size&&(pg(t.bids[a].params.size,t.mediaTypes.banner.sizes)||t.bids.splice(a,1))}let o=new gt;return o.hasValidStoredRequests()&&!i.ignoreSiteBidders&&t.bids.push(o.addToPlacementAsBidder()),t}function pg(i,e){for(let t=0;t<e.length;t++)if(JSON.stringify(i)===JSON.stringify(e[t]))return!0;return!1}function MI(){let i=window.freestar.locData&&window.freestar.locData.iso||null,e=window.freestar.locData&&window.freestar.locData.state||null;return i==="US"&&!["CA","CO","CT","VA","UT"].includes(e)}var ze,Ri=f(()=>{re();Mi();ke();St();Dr();J();Be();Pr();L();k();ze=kI});var Dt,hr,gr,Hl,mg,xi=f(()=>{Dt="FREESTAR VIDEO v1.0.0",hr={title:Dt,styles:"background: black; color: white; border-radius: 3px; padding: 3px"},gr="FOP",Hl="FVP - PBJS IBV",mg="aps_springserve_outstream_ron"});function ds(i){let{width:e,height:t}=i.reduce((r,[s=0,n=0]=[])=>(s>r.width&&(r.width=s),n>r.height&&(r.height=n),r),{width:0,height:0});return[e,t]}var $l=f(()=>{});var hg,oi,ls=f(()=>{k();Le();z();L();xi();$l();hg=["adsready","adRequest","adserror","loadstart","adImpression","adComplete","impression","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],oi=class{constructor({params:e}){E(this,"handlePlayerEvent",e=>{let{type:t}=e;switch(t){case"impression":this.handleImpressionEvent({event:e});break;case"volumechange":case"volumeChange":this.handleVolumeChangeEvent({event:e});break;case"allAdsCompleted":this.handleAllAdsCompleteEvent({event:e});break;case"adsready":this.handleAdsReadyEvent({event:e});break;case"ended":this.handleEndedEvent({event:e});break;case"adserror":this.handleAdsErrorEvent({event:e});break}});this.uuid=ue(),this.params=e,this._playerId=`fsPlayer_${this.uuid}`}init(){}updateBottomSpacing(e){this.params.bottomSpacing=e,this.addCSS()}bindEvents(){this.player.on(hg,this.handlePlayerEvent),this.player.on("ads-manager",e=>{let{adsManager:t}=e;Object.keys(window.google.ima.AdEvent.Type).forEach(r=>{t.addEventListener(window.google.ima.AdEvent.Type[r],this.handlePlayerEvent)})})}addPlayer(){this.player=window.videojs(this._playerId,{controls:!1,disablePictureInPicture:!0,enableDocumentPictureInPicture:!1})}addHTML(){}addCSS(){}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter(r=>Array.isArray(r)),ds(t)}renderAd(){}handleEndedEvent({event:e}){freestar.log(hr,"handleEnded",e)}handleAdsReadyEvent({event:e}){freestar.log(hr,"handleAdsReadyEvent",e)}handleAdsErrorEvent({event:e}){freestar.log(hr,"handleAdsErrorEvent",e)}handleVolumeChangeEvent(){this.player.ima.getAdsManager()&&this.player.ima.getAdsManager().getVolume()!==0&&this.player.ima.getAdsManager().setVolume(0)}handleImpressionEvent({event:e}){freestar.log(hr,"handleImpressionEvent",e)}handleAllAdsCompleteEvent({event:e}){freestar.log(hr,"handleAllAdsCompleteEvent",e)}remove(){var s,n,o,a,d,c,u,p;(s=this.player)==null||s.off(hg,this.handlePlayerEvent);let e=(o=(n=this.player)==null?void 0:n.ima)==null?void 0:o.getAdsManager();e&&(Object.keys(window.google.ima.AdEvent.Type).forEach(m=>{e.removeEventListener(window.google.ima.AdEvent.Type[m],this.handlePlayerEvent)}),e.destroy());let{controller:t}=((a=this.player)==null?void 0:a.ima)||{},r=(d=t==null?void 0:t.sdkImpl)==null?void 0:d.adsLoader;r&&((c=r.contentComplete)==null||c.call(r),(u=r.destroy)==null||u.call(r)),t.sdkImpl.adDisplayContainer.destroy(),(p=this.player)==null||p.dispose(),this.player=null,this.renderer=null,this.callback=null,this.request&&(this.request.cb=null,this.request._prebid=null,this.request._apstag=null,this.request=null)}sendEvent({name:e=Dt,type:t,value:r}){D.instance.resolve(l.ANALYTICS).then(s=>{s.track(new Y({eventName:e,eventType:t,data:w({name:this.placement.name,uuid:this.uuid},r)}))})}}});var _r,Yl=f(()=>{L();k();Le();xi();_r=class{constructor({aps:e=!1,apsSlot:t=mg,pbjs:r=!0,pbjsCode:s,auctionTimeout:n=5e3,cb:o=null,prebid:a,apstag:d}){this.aps=e,this.apsSlot=t,this.pbjs=r,this.pbjsCode=s,this.auctionTimeout=n,this.auctionCutoff=2e4,this.cb=o,this.finished=[],this._prebid=a,this._apstag=d,this.init()}init(){this.requestBids()}requestBids(){this.aps&&this.requestAPSBids(),this.pbjs&&this.requestPBJSBids(),(this.aps||this.pbjs)&&(this.timer=setTimeout(()=>{clearTimeout(this.timer),D.instance.resolve(l.ANALYTICS).then(e=>{e.track(new Y({eventName:Dt,eventType:"videoAuctionTimeout",data:{pbjsCode:this.pbjsCode}}))}),this.finishRequestingBids()},this.auctionCutoff))}requestAPSBids(){this._apstag&&this._apstag.fetchBids({timeout:this.auctionTimeout,slots:[{slotID:this.apsSlot,mediaType:"video"}]},e=>{this.finished.push("aps"),this.apsBids=e,this.checkIfBidsFinished()})}requestPBJSBids(){this._prebid.requestBids({adUnitCodes:[this.pbjsCode],bidsBackHandler:e=>{let{bids:t=[]}=e[this.pbjsCode]||{};this.finished.push("pbjs"),this.pbjsBids=t,this.checkIfBidsFinished()}})}checkIfBidsFinished(){let e=[];this.aps&&e.push("aps"),this.pbjs&&e.push("pbjs"),e.every(r=>this.finished.includes(r))&&(clearTimeout(this.timer),this.finishRequestingBids())}finishRequestingBids(){if(this.cb)try{this.cb(this)}catch(e){console.error(e)}}}});var Er,jl=f(()=>{J();Er=class{constructor({player:e,adTagUrl:t="DEFAULT",uuid:r,placement:s}){this.player=e,this.adTagUrl=t,this.placement=s,this.uuid=r}renderAd(){typeof this.player.ima=="function"?(this.player.ima({adTagUrl:this.adTagUrl}),this.player.loadMedia({id:"XVXVXVXV",src:`${Tt}/videos/blank1s-20231016.mp4`,type:"video/mp4"})):(this.player.ima.changeAdTag(this.adTagUrl),this.player.ima.requestAds())}}});var Lt,gg=f(()=>{jl();Lt=class extends Er{constructor({player:e,adTagUrl:t,uuid:r,placement:s}){super({player:e,adTagUrl:t,uuid:r,placement:s}),this.init(),this.adTagUrl=t}init(){this.renderAd()}}});var Kl=f(()=>{gg();jl()});var Wl,_g=f(()=>{dt();L();k();ie();xi();Kl();ls();$l();Wl=class extends oi{constructor({params:e}){super({params:e}),this.init()}init(){let{bid:e}=this.params,{adUnitCode:t,vastUrl:r,adId:s}=e;this.adId=s,this.adUnit=ce.getAdUnitByPrebidCode(t);let{placement:n}=this.adUnit;this.placement=n,this.addCSS(),this.addHTML({targetElm:document.getElementById(t)}),this.addPlayer(),this.bindEvents(),this.renderAd({vastUrl:r,adId:s})}addHTML({targetElm:e=document.body}){e.id&&$i(e.id),this.videoPlayer=b({type:"div",id:`fs-player-container_${this.uuid}`}),this.videoPlayer.innerHTML=`<div class='fs-player-container-shim'><video id='fsPlayer_${this.uuid}' muted playsinline disablePictureInPicture class='video-js vjs-16-9 vjs-default-skin'></video></div>`,e.appendChild(this.videoPlayer)}addCSS(){let e=b({type:"style",id:`fs-player_${this.uuid}`}),t=this.getLargestPossibleDimensions({placement:this.adUnit.placement}),r=this.getPlayer16x9Dimensions({width:t[0]*.95,height:t[1]*.95});e.textContent=` #fs-player-container_${this.uuid} { width: ${t[0]}px; height: ${t[1]}px; display: flex; align-items: center; justify-content: center; background-color: #d3d3d3; } #fs-player-container_${this.uuid}>.fs-player-container-shim { width: ${r.width}px; height: ${r.height}px; border-radius: 10px; border: 0px; overflow: hidden; } `,document.head.appendChild(e)}getPlayer16x9Dimensions({width:e,height:t}){let r=Math.min(e,Math.round(1.7777777777777777*t)),s=Math.round(9/16*r);return{width:r,height:s}}getLargestPossibleDimensions({placement:e}){let{sizes:t}=e;return t=t.filter(r=>Array.isArray(r)),ds(t)}renderAd({vastUrl:e,adId:t}){let{prebid:r}=this.adUnit;freestar.refreshLibrary[r.code]&&(freestar.refreshLibrary[r.code].disableRefresh=!0),this.renderer=new Lt({player:this.player,adTagUrl:e}),fsprebid.markWinningBidAsUsed({adId:t})}handleAdsReadyEvent(){let e={type:"videoBidAttemptedToPlay",value:{player:Hl,placementId:this.placement.name,adId:this.adId}};this.sendEvent(e),this.player.play()}handleAdsErrorEvent(){this.remove()}handleImpressionEvent({event:e}){let{adSystem:t,creativeAdId:r,creativeId:s,duration:n,universalAdIds:o,vastMediaHeight:a,vastMediaWidth:d}=e.ad.data,c={type:"videoBidImpression",value:{player:Hl,placementId:this.placement.name,adSystem:t,creativeAdId:r,creativeId:s,duration:n,universalAdIds:o,vastMediaHeight:a,vastMediaWidth:d,adId:this.adId}};this.sendEvent(c)}handleAllAdsCompleteEvent(){this.remove()}remove(){var r,s;let{prebid:e,slot:t}=this.adUnit;e&&freestar.refreshLibrary[e.code]&&(freestar.refreshLibrary[e.code].disableRefresh=!1),freestar.refresh([t.getSlotElementId()]),(s=(r=this.videoPlayer)==null?void 0:r.parentNode)==null||s.removeChild(this.videoPlayer),this.videoPlayer=null,super.remove()}};I.class(Wl,{token:l.IN_BANNER_VIDEO_PLAYER,dependencies:[l.FOP_VIDEO_SCRIPTS]})});var Eg=f(()=>{ls();_g();Kl()});var cs=f(()=>{Eg()});var Ql,yg=f(()=>{Ql=({isGDPRCountry:i,isUspApplicable:e,mspsPrivacyManagerId:t,gdprPrivacyManagerId:r})=>{try{window._sp_queue=[],window._sp_={config:B(w({accountId:1638,baseEndpoint:"https://cdn.privacy-mgmt.com",propertyHref:`https://${document.location.host}`,usnat:{includeUspApi:e}},i?{gdpr:{}}:{}),{events:B(w({},["onMessageChoiceSelect","onMessageReady","onMessageChoiceError","onPrivacyManagerAction","onPMCancel","onMessageReceiveData","onSPPMObjectReady","onError"].reduce((s,n)=>(s[n]=function(){console.log(`[event] ${n}`,arguments)},s),{})),{onConsentReady:function(s,n,o,a){s=="usnat"&&a.applies&&(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Do Not Sell or Share My Personal Information",document.getElementById("pmLink").onclick=function(){window._sp_.usnat.loadPrivacyManagerModal(String(t))}),s=="gdpr"&&a.applies&&(document.getElementById("pmLink").style.visibility="visible",document.getElementById("pmLink").innerHTML="Privacy Preferences",document.getElementById("pmLink").onclick=function(){window._sp_.gdpr.loadPrivacyManagerModal(String(r))})}})})}}catch(s){console.error("Error in sourcepointGMPScript",s)}}});var Jl,Ig=f(()=>{Jl=()=>{try{(()=>{var i=!1,e=window,t=document;function r(){if(!e.frames.__uspapiLocator)if(t.body){var o=t.body,a=t.createElement("iframe");a.style.cssText="display:none",a.name="__uspapiLocator",o.appendChild(a)}else setTimeout(r,5)}r();function s(){var o=arguments;if(__uspapi.a=__uspapi.a||[],o.length)o[0]==="ping"?o[2]({gdprAppliesGlobally:i,cmpLoaded:!1},!0):__uspapi.a.push([].slice.apply(o));else return __uspapi.a}function n(o){var a=typeof o.data=="string";try{var d=a?JSON.parse(o.data):o.data;if(d.__cmpCall){var c=d.__cmpCall;e.__uspapi(c.command,c.parameter,function(u,p){var m={__cmpReturn:{returnValue:u,success:p,callId:c.callId}};o.source.postMessage(a?JSON.stringify(m):m,"*")})}}catch(u){}}typeof __uspapi!="function"&&(e.__uspapi=s,__uspapi.msgHandler=n,e.addEventListener("message",n,!1))})()}catch(i){console.error("Error in sourcepointCCPAScript",i)}}});var Wo,Sg=f(()=>{Wo=()=>{try{window.__gpp_addFrame=function(i){if(!window.frames[i])if(document.body){var e=document.createElement("iframe");e.style.cssText="display:none",e.name=i,document.body.appendChild(e)}else window.setTimeout(window.__gpp_addFrame,10,i)},window.__gpp_stub=function(){var i=arguments;if(__gpp.queue=__gpp.queue||[],__gpp.events=__gpp.events||[],!i.length||i.length==1&&i[0]=="queue")return __gpp.queue;if(i.length==1&&i[0]=="events")return __gpp.events;var e=i[0],t=i.length>1?i[1]:null,r=i.length>2?i[2]:null;if(e==="ping")t({gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}},!0);else if(e==="addEventListener"){"lastId"in __gpp||(__gpp.lastId=0),__gpp.lastId++;var s=__gpp.lastId;__gpp.events.push({id:s,callback:t,parameter:r}),t({eventName:"listenerRegistered",listenerId:s,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else if(e==="removeEventListener"){for(var n=!1,o=0;o<__gpp.events.length;o++)if(__gpp.events[o].id==r){__gpp.events.splice(o,1),n=!0;break}t({eventName:"listenerRemoved",listenerId:r,data:n,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else e==="hasSection"?t(!1,!0):e==="getSection"||e==="getField"?t(null,!0):__gpp.queue.push([].slice.apply(i))},window.__gpp_msghandler=function(i){var e=typeof i.data=="string";try{var t=e?JSON.parse(i.data):i.data}catch(s){t=null}if(typeof t=="object"&&t!==null&&"__gppCall"in t){var r=t.__gppCall;window.__gpp(r.command,function(s,n){var o={__gppReturn:{returnValue:s,success:n,callId:r.callId}};i.source.postMessage(e?JSON.stringify(o):o,"*")},"parameter"in r?r.parameter:null,"version"in r?r.version:"1.1")}},"__gpp"in window&&typeof window.__gpp=="function"||(window.__gpp=window.__gpp_stub,window.addEventListener("message",window.__gpp_msghandler,!1),window.__gpp_addFrame("__gppLocator"))}catch(i){console.error("Error in sourcepointGPPScript",i)}}});var Xl,bg=f(()=>{Xl=()=>{try{let i=function(e){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)};(function(){var e=function(){for(var t,r,s=[],n=window,o=n;o;){try{if(o.frames.__tcfapiLocator){t=o;break}}catch(a){}if(o===n.top)break;o=o.parent}t||(function a(){var d=n.document,c=!!n.frames.__tcfapiLocator;if(!c)if(d.body){var u=d.createElement("iframe");u.style.cssText="display:none",u.name="__tcfapiLocator",d.body.appendChild(u)}else setTimeout(a,5);return!c}(),n.__tcfapi=function(){for(var a=arguments.length,d=new Array(a),c=0;c<a;c++)d[c]=arguments[c];if(!d.length)return s;d[0]==="setGdprApplies"?d.length>3&&parseInt(d[1],10)===2&&typeof d[3]=="boolean"&&(r=d[3],typeof d[2]=="function"&&d[2]("set",!0)):d[0]==="ping"?typeof d[2]=="function"&&d[2]({gdprApplies:r,cmpLoaded:!1,cmpStatus:"stub"}):s.push(d)},n.addEventListener("message",function(a){var d=typeof a.data=="string",c={};if(d)try{c=JSON.parse(a.data)}catch(p){}else c=a.data;var u=i(c)==="object"&&c!==null?c.__tcfapiCall:null;u&&window.__tcfapi(u.command,u.version,function(p,m){var g={__tcfapiReturn:{returnValue:p,success:m,callId:u.callId}};a&&a.source&&a.source.postMessage&&a.source.postMessage(d?JSON.stringify(g):g,"*")},u.parameter)},!1))};e()})()}catch(i){console.error("Error in sourcepointGDPRScript",i)}}});var Ag=f(()=>{yg();Ig();Sg();bg()});function wg(i,e){let t=Oi(i),r=Gt(i);Ql({isGDPRCountry:t,isUspApplicable:r,mspsPrivacyManagerId:freestar.fsdata.mspsPrivacyManagerId||Kc,gdprPrivacyManagerId:freestar.fsdata.gdprPrivacyManagerId||jc}),t&&(Xl(),Wo()),r&&(Jl(),Wo()),se(Yc,e)}var vg=f(()=>{J();re();ko();ie();Ag()});var Tg,BI,Rg=f(()=>{re();Tg=i=>{BI()?window.__uspapi("getUSPData",1,(e,t)=>t&&e.uspString?i(e.uspString):i(null)):i(null)},BI=()=>!!window.__uspapi});function Cg(i){let e=freestar.fsdata.quantcastDomain;if(!e){freestar.log(10,"loadQuantcast","Could not get quantcastDomain from fsdata, quantcast will not be loaded!");return}var t="https://cmp.inmobi.com".concat("/choice/","wZt3yQfgdwnz-","/",e,"/choice.js?tag_version=V2"),r=0,s=3;se(t,i);function n(){var c="__tcfapiLocator",u=[],p=window,m;function g(){var S=p.document,_=!!p.frames[c];if(!_)if(S.body){var y=S.createElement("iframe");y.style.cssText="display:none",y.name=c,S.body.appendChild(y)}else setTimeout(g,5);return!_}function h(){var S,_=arguments;if(_.length)if(_[0]==="setGdprApplies")_.length>3&&_[2]===2&&typeof _[3]=="boolean"&&(S=_[3],typeof _[2]=="function"&&_[2]("set",!0));else if(_[0]==="ping"){var y={gdprApplies:S,cmpLoaded:!1,cmpStatus:"stub"};typeof _[2]=="function"&&_[2](y)}else _[0]==="init"&&typeof _[3]=="object"&&(_[3]=Object.assign(_[3],{tag_version:"V2"})),u.push(_);else return u}function A(S){var _=typeof S.data=="string",y={};try{_?y=JSON.parse(S.data):y=S.data}catch(x){}var N=y.__tcfapiCall;N&&window.__tcfapi(N.command,N.version,function(x,q){var M={__tcfapiReturn:{returnValue:x,success:q,callId:N.callId}};_&&(M=JSON.stringify(M)),S&&S.source&&S.source.postMessage&&S.source.postMessage(M,"*")},N.parameter)}for(;p;){try{if(p.frames[c]){m=p;break}}catch(S){}if(p===window.top)break;p=p.parent}m||(g(),p.__tcfapi=h,p.addEventListener("message",A,!1))}n();var o=function(){var c=arguments;typeof window.__uspapi!==o&&setTimeout(function(){typeof window.__uspapi!="undefined"&&window.__uspapi.apply(window.__uspapi,c)},500)},a=function(){r++,window.__uspapi===o&&r<s?console.warn("USP is not accessible"):clearInterval(d)};if(typeof window.__uspapi=="undefined"){window.__uspapi=o;var d=setInterval(a,6e3)}}function Og(i=new Date(new Date().getTime()+1e3*60*60*24*390)){function e(t,r,s){return s.substring(0,t)+r+s.substring(t+r.length)}if(window.freestar.fsdata.cmpType==="FREESTAR"&&window.freestar.locData.iso==="US"){let t="usprivacy",r=ht({name:t});if(hs.includes(window.freestar.locData.state))if(!r)ot({name:t,value:"1-N-",domain:`.${window.location.host}`,expires:i});else{let n=document.evaluate("//a[text()='Do Not Sell My Personal Information']",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;r[1]==="N"&&(n?ot({name:t,value:e(1,"Y",r),domain:`.${window.location.host}`,expires:i}):ot({name:t,value:e(1,"-",r),domain:`.${window.location.host}`,expires:i}))}}}var Zl=f(()=>{ie();J();Fe()});function Pg(i,e){var r,s;let t=(s=(r=e.fsdata)==null?void 0:r.disallowedGeos)==null?void 0:s.includes(e.locData.iso);if(i){e.newAdSlots=()=>{console.warn("Invalid consent for newAdSlots.")};return}if(tr())throw new Error("Ad serving is blocked in "+e.locData.iso);t||e.fsdata.placements.length&&(e.newAdSlots=xg,e.deleteAdSlots=UI,qI(),e.refresh=GI,e.trackPageview=VI,e.config.enabled_slots.length&&(googletag.cmd.push(function(){googletag.pubads().setTargeting("fspbg","freestar"),googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})}),xg(e.config.enabled_slots)))}function FI(i){if(!i)return[];let e=Array.isArray(i)?i:[i];return As(e.filter(({placementName:t})=>!!Q({name:t})),"slotId")}function xg(i,e){let t=FI(i);t.length&&(!e&&freestar.config.channel&&(e=freestar.config.channel),freestar.config.orignalChannel||(freestar.config.orignalChannel="{{channel}}"),e&&freestar.config.orignalChannel!==e&&(freestar.fsdata.placements=freestar.fsdata.placements.map(r=>(r.dfpId=r.dfpId.replace(freestar.config.orignalChannel,e),r)),freestar.config.orignalChannel=e),t.forEach(function(r){let{placementName:s,slotId:n,targeting:o}=r,a=document.getElementById(n),d=Q({name:s}),c=zn(d);a&&a.id&&d&&c&&googletag.cmd.push(function(){let p=googletag.pubads().getSlots().find(m=>m.getAdUnitPath()===d.dfpId&&m.getSlotElementId()===a.id);p||(p=googletag.defineSlot(d.dfpId,c,a.id).addService(googletag.pubads())),o&&Object.entries(o).forEach(([m,g])=>{p.setTargeting(m,g)}),googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(a.id),googletag.pubads().refresh([p])})}))}function UI(i){if(i===void 0){googletag.cmd.push(function(){googletag.destroySlots()});return}Array.isArray(i)||(i=[i]),i.forEach(e=>{let t=De({elementId:e});t&&googletag.destroySlots([t])})}function GI(){}function VI(){}function qI(){let i=Cr({queue:[]},freestar);freestar.queue={push:function(e){googletag.cmd.push(e)}};for(let e=0;e<i.queue.length;e++)freestar.queue.push(i.queue[e])}var Ng=f(()=>{z();Ge();re();ke();re()});function Dg(){let i=window,e,t={};for(;i;){try{if(i.frames.__tcfapiLocator){e=i;break}}catch(s){}if(i===window.top)break;i=i.parent}if(!e)return;window.__tcfapi=function(s,n,o,a){if(!e)o({msg:"CMP not found"},!1);else{let d=Math.random()+"",c={__tcfapiCall:{command:s,parameter:typeof a=="function"?void 0:a,version:n,callId:d}};t[d]=o,e.postMessage(c,"*")}};function r(s){let n={};try{n=typeof s.data=="string"?JSON.parse(s.data):s.data}catch(a){}let o=n.__tcfapiReturn;o&&typeof t[o.callId]=="function"&&t[o.callId](o.returnValue,o.success)}window.addEventListener("message",r,!1)}var Lg=f(()=>{});function $I(i,...e){return i&&e?e.every(t=>!!i[t]):!1}function YI(i,...e){return i&&e?e.every(t=>!!i[t]):!1}function WI(i,e,t){var n;let r=e||t,s={cmpType:i,tcfapi:e,uspapi:t};(n=freestar==null?void 0:freestar.analyticsQueue)==null||n.push(new Y({eventName:"PRIVACY_COMPLIANCE",eventType:`SITE_HAS_CMP=${r}`,data:s})),freestar.log(0,`PRIVACY_COMPLIANCE SITE_HAS_CMP=${r} ${JSON.stringify(s)}`)}function fs(i){su(),ms.indexOf(freestar.locData.iso)>-1?Bg(i):(freestar.log(0,"Outside GDPR Zone"),i())}var zI,ic,rc,kg,ec,Mg,HI,jI,KI,Bg,tc,Fg,sc=f(()=>{ie();J();vg();re();ko();Rg();Zl();Ng();Le();Lg();zI=["tcloaded","useractioncomplete"],ic=1,rc=10,kg=!1,ec=0,Mg=i=>{let e={gdpr:!1,usp:{uspString:"1---"}};Gt()?Tg(t=>{t&&(e.usp={uspString:t}),i(e)}):Oi()?wh(t=>{t&&(e.gdpr={tcString:t}),i(e)}):i(e)},HI=function({consents:i}){freestar.consentManagement.consentData={consents:{[ic]:i?i[ic]:void 0,[rc]:i?i[rc]:void 0}}};jI=function({data:i}){let{eventStatus:e}=i;if(zI.includes(e)){let{purpose:t,vendor:r}=i,s=t?t.consents:void 0,n=r?r.consents:void 0;return HI({consents:s}),$I(s,ic,rc)&&YI(n,qc)}},KI=i=>(e,t)=>{if(e.eventStatus==="cmpuishown")return;let r=jI({data:e});t?!kg&&r?(kg=!0,i()):Pg(r,window.freestar):freestar.log(1,"Error: TCF Callback Failed")},Bg=function(i){if(ec++,ec===50){clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null;return}if(ec<50&&!window.__tcfapi){freestar.timers||(freestar.timers={}),freestar.timers.tcfapi=setTimeout(()=>Bg(i),500);return}freestar.timers&&freestar.timers.tcfapi&&(clearTimeout(freestar.timers.tcfapi),freestar.timers.tcfapi=null),window.__tcfapi("addEventListener",2,KI(i))};tc={QUANTCAST:"FREESTAR",PUBFIG:"FS_SOURCEPOINT_PUBFIG",PUBLISHER:"PUBLISHER"},Fg=(i,e,t)=>{let r=i===tc.PUBFIG,s=i===tc.QUANTCAST,n=i===tc.PUBLISHER,o=!!window.__tcfapi,a=!!window.__uspapi,d=Gt(e)&&!a,c=Oi(e)&&!o;r&&(d||c)?wg(e,t):s&&(d||c)?Cg(t):(n&&c&&Dg(),t()),WI(i,o,a)}});var kt,nc=f(()=>{cs();sc();J();kt=class extends Er{constructor({player:e,placement:t,bids:r,uuid:s,videoAd:n}){super({player:e,uuid:s,placement:t}),this.videoAd=n,this.bids=r,this.consentData=null,Mg(o=>{this.consentData=o}),this.init()}init(){this.updateAdTagURL(),this.renderAd()}updateAdTagURL(){this.adTagUrl=`https://tv.springserve.com/rt/${this.videoAd.videoId}?w=400&h=225&url=${encodeURIComponent(location.href)}&cb=${Math.random()}&consent=${this.consentData&&this.consentData.gdpr?this.consentData.gdpr.tcString:""}&gdpr=${this.consentData&&this.consentData.gdpr?1:0}&us_privacy=${this.consentData&&this.consentData.usp?this.consentData.usp.uspString:""}&schain=1.0,1!${Ft},${window.freestar.fsdata.companyId},1,,,,`+this.getFloorBasedOnBids()+this.getAPSBids()+this.getGPID()}getGPID(){return!this.placement.dfpId||!this.placement.name?"":`&gpid=${this.placement.dfpId}/${this.placement.name}`}getFloorBasedOnBids(){return!this.bids.pbjsBids||this.bids.pbjsBids.length===0?"":`&bid_floor=${this.bids.pbjsBids[0].cpm}`}getAPSBids(){if(!this.bids.apsBids||this.bids.apsBids.length<=0)return"";let e=this.bids.apsBids[0];return"&amznbid="+e.amznbid+"&amzniid="+e.amzniid}}});var oc=f(()=>{nc()});var ut,yr,Qo=f(()=>{ut={session:"session",page:"page"},yr={productOption:"productOption",placementSessionCap:"placementSessionCap",placementPageCap:"placementPageCap"}});var Ir,ac=f(()=>{Qo();Ir=class{constructor({win:e=window,placement:t,product:r=void 0,callback:s=void 0,pageLevelCapPathOption:n=yr.placementPageCap,sessionLevelCapPathOption:o=yr.placementSessionCap}){this.win=e,this.placement=t,this.product=r,this.productKey=r+"Options",this.pageLevelCapPathOption=n,this.sessionLevelCapPathOption=o,this.key=`fs.${this.product}.sessionfrequencycap`,this.callback=s,this.pageLevelData={},this.sessionLevelData={},this.init()}init(){var e;(e=this.win.freestar)!=null&&e.frequencyLibraryV2||(this.win.freestar.frequencyLibraryV2={}),this.setCapData(),this.win.freestar.frequencyLibraryV2[this.placement.name]=this}resetIteration({level:e=ut.page}={}){e===ut.page?this.pageLevelData.iteration=0:(this.sessionLevelData.iteration=0,sessionStorage.setItem(this.key,"0"))}incrementIteration(){this.pageLevelData.iteration++,this.sessionLevelData.iteration++,sessionStorage.setItem(this.key,this.sessionLevelData.iteration.toString())}subtractIteration(){this.win.freestar.log(1,"Frequency Cap: iteration will remove this attempt as an iteration. Setting new sessionStorage item value."),this.pageLevelData.iteration>0&&this.pageLevelData.iteration--,this.sessionLevelData.iteration>0&&(this.sessionLevelData.iteration--,sessionStorage.setItem(this.key,this.sessionLevelData.iteration.toString()))}getCapPath(e){var r,s,n,o;return{[yr.productOption]:(s=(r=this.placement)==null?void 0:r[this.productKey])==null?void 0:s.cap,[yr.placementSessionCap]:(n=this.placement)==null?void 0:n.sessionFrequencyCap,[yr.placementPageCap]:(o=this.placement)==null?void 0:o.pageViewFrequencyCap}[e]}getCapValue(e){return e&&e>0?e:-1}setCapData(){this.pageLevelData={cap:this.getCapValue(this.getCapPath(this.pageLevelCapPathOption)),iteration:this.getIteration({level:ut.page})},this.sessionLevelData={iteration:this.getIteration({level:ut.session}),cap:this.getCapValue(this.getCapPath(this.sessionLevelCapPathOption))}}getIteration({level:e}={}){if(e===ut.session){let t=sessionStorage.getItem(this.key);return Number(t)||0}if(e===ut.page)return this.pageLevelData.iteration||0}hasExceededCap(e){let{iteration:t,cap:r}=e;return r>0&&t>=r}isProductAllowed(){let e=this.hasExceededCap(this.sessionLevelData),t=this.hasExceededCap(this.pageLevelData);if(e||t){let r=e?"session":"page",s=e?this.sessionLevelData:this.pageLevelData;return this.win.freestar.log(1,`Frequency Cap: iteration of ${s.iteration} is higher than cap of ${s.cap}. ${this.product} will not run again until the next ${r}.`),!1}return this.win.freestar.log(1,`Frequency Cap: iteration of ${Math.max(this.sessionLevelData.iteration+1,this.pageLevelData.iteration+1)} is lower than or equal to the cap. Continue with ${this.product}.`),!0}}});var dc,de,ai,Sr=f(()=>{k();dc={BR:{bottom:10,right:10},BL:{bottom:10,left:10},TR:{top:10,right:10},TL:{top:10,left:10},mobile:{top:10,left:"50%",transform:"translateX(-50%)"}},de={SMALL:"SMALL",LARGE:"LARGE",CUSTOM:"CUSTOM"},ai=[{token:l.WINDOW,alias:"win"},l.FREESTAR,l.PREBID_MANAGER,l.AMAZON_MANAGER,l.DEVICE_INFO,l.FOP_VIDEO_SCRIPTS]});var QI,Jo,di,Ug,us=f(()=>{Sr();QI=i=>typeof i=="number"?`${i}px`:i,Jo=({adLocation:i="BR",isMobile:e=!1,topSpacing:t,bottomSpacing:r})=>{let s=["TR","TL"].includes(i)&&e?dc.mobile:dc[i];return s?Object.entries(s).reduce((n,[o,a])=>(o==="top"&&typeof a=="number"&&t&&(a=a+t),o==="bottom"&&typeof a=="number"&&r&&(a=a+r),n+`${o}: ${QI(a)};`),""):""},di=({width:i=0,maxWidth:e=null,widthOnMaxExceeded:t=null}={})=>{let r=i,s;return e&&i>e?(r=t||e,s=Ug(e)):s=Ug(r),[r,s]},Ug=i=>Math.round(i*9/16)});var JI,XI,ZI,eS,tS,li,Xo=f(()=>{Ri();ie();ls();Yl();oc();cs();ac();Pe();Sr();us();J();L();k();JI={[de.SMALL]:()=>[312,176],[de.LARGE]:()=>[400,225],[de.CUSTOM]:di},XI={[de.SMALL]:()=>["45%",300],[de.LARGE]:()=>["100%",400],[de.CUSTOM]:di},ZI={[de.SMALL]:()=>[300,200],[de.LARGE]:()=>[400,300],[de.CUSTOM]:di},eS={[de.SMALL]:()=>[300,200],[de.LARGE]:()=>[400,300],[de.CUSTOM]:di},tS=1,li=class extends oi{constructor({params:t,freestar:r,prebidManager:s,amazonManager:n,doc:o=document,win:a=window,deviceInfo:d}){super({params:t});E(this,"_scheduleNextAd",(t=this._delayBetweenAdsMs)=>{this._nextAdTimeoutId&&this._window.clearTimeout(this._nextAdTimeoutId),this._freestar.debug&&this._freestar.log(this._loggingLevel,`${this._name}: Scheduling next Ad in ${t}ms for "${this.videoAd.name}"`),this._nextAdTimeoutId=this._window.setTimeout(()=>{this._requestBids()},t)});E(this,"_handleBidResponse",(t={})=>{this.renderAd(t)});this._loggingLevel=1,this._name="InContentVideoAd";let{callback:c,videoAd:u}=this.params;if(c&&typeof c!="function")throw new Error("Callback must be a function");this.callback=c,this.videoAd=u,this._document=o,this._window=a,this._freestar=r,this._prebidManager=s,this._deviceInfo=d,this._prebidManager=s,this._amazonManager=n,this._stylesheetId=`fs-player-${this.uuid}`,this._containerId=`fs-player-container-${this.uuid}`,this.placement=this._createVideoPlacement(u),this.adUnit=this._createAdUnit(this.placement);let{timeToWaitBetweenVideos:p=5}=this.videoAd;this._delayBetweenAdsMs=p*1e3,this._nextAdTimeoutId=null,this.init()}init(){var r;if(this.initFrequencyCap(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});if(!this.targetElement){this._window.freestar.log(this._loggingLevel,`${this._name}: Target element "${this.videoAd.name}" not found.`),(r=this.callback)==null||r.call(this,`Target element "${this.videoAd.name}" not found.`,{uuid:this.uuid});return}this._validateVideoAd()&&(this.addHTML(),this.addCSS(),this._prebidManager.instance.addAdUnits([this.adUnit]),this._requestFirstBid(),this._freestar.log(this._loggingLevel,`InContentVideoPlayer: Initialized for "${this.videoAd.name}"`))}initFrequencyCap(){let{videoAd:t}=this.params,{vendor:r,adType:s}=t;this.frequencyCapManager=new Ir({placement:t,product:`${r}_${s}`,win:this._window})}get targetElement(){let{parentElement:t,classIndex:r,name:s}=this.videoAd;if(t){let n=r>-1?r:0;return this._document.querySelectorAll(t)[n]}return this._document.getElementById(s)}get playerContainerElement(){return this._document.getElementById(this._containerId)}addHTML(){if(!this.playerContainerElement){let t=b({type:"div",id:this._containerId});this.targetElement.appendChild(t)}}_removeHTML(){var t;(t=this.playerContainerElement)==null||t.remove()}_addVideoElement(t=this.playerContainerElement){if(!t)return;let r=this._document.getElementById(this._playerId);r||(r=b({type:"video",id:this._playerId,classList:["video-js","vjs-16-9","vjs-default-skin"],attributes:[{muted:!0},{playsinline:!0}]}),t.appendChild(r))}addCSS(){let{width:t,height:r}=this._getVideoPlayerDimensions(),s=!1,n=this._document.getElementById(this._stylesheetId);n||(n=b({type:"style",id:this._stylesheetId}),s=!0),n.textContent=` #${this._containerId} { display: flex; align-items: center; justify-content: center; width: ${t}; min-height: ${r}; margin: 0 auto; border-radius: 10px; position: relative; border-radius: 10px; border: 0px; overflow: hidden; } #${this._containerId}:after { content: 'ADVERTISEMENT'; display: block; position: absolute; top: 50%; left: 50%; transform: translateX(-50%); z-index: 1; font-family: sans-serif; font-size: 0.8rem; color: #646464; } `,s&&this._document.head.appendChild(n)}_getVideoPlayerDimensions(){let t=this._deviceInfo.device.type===ee?XI:JI,r=t[this.videoAd.playerSize]||t[de.LARGE],[s,n]=r({width:this.videoAd.width}),o=typeof s=="number"?`${s}px`:s,a=typeof n=="number"?`${n}px`:n;return{width:o,height:a}}renderAd(t){var r;this._addVideoElement(),this.addPlayer(),this.bindEvents(),this._freestar.debug&&this._freestar.log(this._loggingLevel,`${this._name}: Rendering Ad for "${this.videoAd.name}"`),this.bids=t,this.renderer=new kt({player:this.player,bids:t,placement:this.placement,videoAd:this.videoAd}),(r=this.onRender)==null||r.call(this)}completeAd(){var t;if(this.player){if(this.player.dispose(),this.player=null,this.renderer=null,this._freestar.debug&&this._freestar.log(this._loggingLevel,`${this._name}: Video Ad "${this.videoAd.name}" completed.`),this.frequencyCapManager.incrementIteration(),!this.frequencyCapManager.isProductAllowed())return this.callback(null,{uuid:this.uuid});this._scheduleNextAd(),(t=this.onCompleted)==null||t.call(this)}}handleEndedEvent(){this.completeAd()}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){var s;let{pbjsBids:t}=(s=this.bids)!=null?s:{},[r]=t||[];if(this.renderer instanceof kt&&(r==null?void 0:r.cpm)>=tS){this.renderer=new Lt({player:this.player,adTagUrl:r.vastUrl});return}this.completeAd()}handleAllAdsCompleteEvent(){this.completeAd()}remove(){this._removeHTML(),this._window.clearTimeout(this._nextAdTimeoutId),this._prebidManager.instance.removeAdUnit(this.adUnit.code),super.remove()}_requestBids(){this.request=new _r({aps:this.videoAd.amazonActive,apsSlot:this.videoAd.amazonApsSlot||null,pbjs:!0,pbjsCode:this.adUnit.code,cb:this._handleBidResponse,prebid:this._prebidManager.instance,apstag:this._amazonManager.instance})}_requestFirstBid(){if(this.videoAd.delayTime){this._scheduleNextAd(this.videoAd.delayTime*1e3);return}this._requestBids()}_createVideoPlacement(t){let{name:r,prebidStoredRequestId:s}=t,n=[{bidder:"appnexus",params:{placementId:32347997}}],o=this._getPlayerSize();return{name:r,bidders:n,sizes:o,ignoreSiteBidders:!0,sizeMappings:[{size:o,viewport:{size:[0,0]},mediaTypes:["video"]},{size:o,viewport:{size:[768,0]},mediaTypes:["video"]}],storedRequestId:s}}_getPlayerSize(){var o;let{width:t,playerSize:r}=this.videoAd,s=this._deviceInfo.device.type===ee?eS:ZI;return[((o=s[r])!=null?o:s[de.LARGE])({width:t})]}_createAdUnit(t){let r=ze(t);return r.mediaTypes.video=B(w({},r.mediaTypes.video),{context:"outstream",renderer:{url:`${Tt}/videos/blank1s-20231016.mp4`,render:()=>{}}}),this._prebidManager.instance.addAdUnits([r]),r}_validateVideoAd(){var s;let{adType:t,vendor:r}=this.videoAd;return t!==this.constructor.adType||r!=="FREESTAR_OUTSTREAM_PLAYER"?(this._freestar.log(this._loggingLevel,`${this._name}: Invalid ad type or vendor for "${this.videoAd.name}".`),(s=this.callback)==null||s.call(this,`Invalid ad type or vendor for "${this.videoAd.name}".`,{uuid:this.uuid}),!1):!0}};E(li,"adType","INCONTENT");I.class(li,{token:l.INCONTENT_VIDEO_AD,dependencies:ai})});function tt({bidder:i,cpm:e=null,requestTimestamp:t,videoAd:r,playerType:s=null}){let n=Date.now(),o={bidder:W(i),cpm:e,playerType:s,placementId:r.name||r.id,requestTimestamp:t,responseTimestamp:n,timeToRespond:n-t,bidCpm:e};freestar.log({title:X},Gg+`bid won for bidder ${i} and placement id ${r.name}. VIDEO MSG OBJECT: ${JSON.stringify(o)}`),D.instance.resolve(l.ANALYTICS).then(a=>{a.track(new Cn(o))})}function it({bidder:i,placementId:e,tagUrl:t}){let r={bidder:W(i),placementId:e,tagUrl:t};freestar.log({title:X},Gg+`tag loaded for bidder ${i} and placement id ${e}. VIDEO MSG OBJECT: ${JSON.stringify(r)}`),D.instance.resolve(l.ANALYTICS).then(s=>{s.track(new On(r))})}var Gg,ci=f(()=>{ct();L();k();Ot();Be();Gg="Video Messaging: "});var Vg,iS,qg,zg,lc,Hg=f(()=>{ls();xi();Ri();ie();ci();nc();cs();Mi();Yl();ac();xe();Pe();Sr();us();L();k();Vg={[Ee]:{[de.SMALL]:()=>["312px","176px"],[de.LARGE]:()=>["400px","225px"],[de.CUSTOM]:di},[ee]:{[de.SMALL]:()=>["45%","112px"],[de.LARGE]:()=>["100%","175px"],[de.CUSTOM]:i=>di(B(w({},i),{maxWidth:300,widthOnMaxExceeded:"100%"}))}},iS=i=>{let{name:e,sizeMappings:t}=st(i),n={name:e,bidders:[{bidder:"appnexus",params:{placementId:32347997}},{bidder:"pubmatic",params:{adSlot:"Freestar_FOP_RON_Outstream",publisherId:156696,siteId:1260033}}],sizes:[[400,300]],sizeMappings:t};return n.name=n.name+"_outstream",n.ignoreSiteBidders=!0,n.sizeMappings=n.sizeMappings.map(o=>(o.mediaTypes=["video"],o.playerSize&&o.playerSize==="LARGE"&&(o.size=[[400,300]]),o.playerSize&&o.playerSize==="SMALL"&&(o.size=[[300,200]]),o)),n._storedRequestId="6d0caa66-2299-488d-a87a-1a82fcea7862",n},qg=!1,zg=!1,lc=class extends oi{constructor({params:t,prebidManager:r,amazonManager:s}){super({params:t});E(this,"handlePrebidAuctionEndEvent",t=>{t.adUnitCodes.includes(this.prebidAdUnit.code)&&this.updatePrebidConfig("original")});E(this,"handleBidResponse",t=>{this.sendPbjsBidsEvent(),this.renderAd({data:t})});this.params=t;let{callback:n,videoAd:o,placement:a}=this.params;this.callback=n,this.placement=a,this.videoAd=o,this._prebidManager=r,this._amazonManager=s,this.abortController=new AbortController,this.videoPlacement=iS(this.placement),this.prebidAdUnit=this.addPrebidAdUnit(),this.pbjsConfigs={original:{ortb2:w({},r.instance.getConfig("ortb2")),s2sConfig:w({},r.instance.getConfig("s2sConfig"))},outstream:{ortb2:w({},r.instance.getConfig("ortb2")),s2sConfig:w({},r.instance.getConfig("s2sConfig"))}},this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest||(this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest={}),this.pbjsConfigs.outstream.ortb2.ext.prebid.storedrequest.id="6d0caa66-2299-488d-a87a-1a82fcea7862",this.pbjsConfigs.outstream.s2sConfig.bidders=["appnexus"],this.init()}init(){zg||(zg=!0,this.sendEvent({type:"videoTagLoaded",value:{player:gr,placementId:this.placement.name}})),this.sendEvent({type:"videoPlayerLoaded",value:{player:gr,placementId:this.placement.name}}),this.initFrequencyCap(),this.frequencyCapManager.isProductAllowed()&&(this.addCSS(),this.addHTML(),this.addPlayer(),this.bindEvents(),qg||(this._prebidManager.instance.onEvent(yt,this.handlePrebidAuctionEndEvent),qg=!0),this.updatePrebidConfig(),this.requestBids())}addPrebidAdUnit(){let t=ze(this.videoPlacement);return t.mediaTypes.video.context="outstream",this._prebidManager.instance.addAdUnits([t]),t}initFrequencyCap(){let{videoAd:t}=this.params,{vendor:r,adType:s}=t;this.frequencyCapManager=new Ir({placement:t,product:`${r}_${s}`})}getDeviceType(){return freestar.deviceInfo.device.type!==ee?Ee:ee}getVideoPlayerDimensions(){var c;let t=this.getDeviceType(),r=(c=this.videoAd)==null?void 0:c.playerSize,s=this.videoAd.width,n=Vg[t]||Vg[Ee],o=n[r]||n[de.LARGE],[a,d]=o({width:s});return{width:typeof a=="number"?`${a}px`:a,height:typeof d=="number"?`${d}px`:d}}addHTML(){let t=b({type:"div",id:"fs-player-container"});t.innerHTML=`<div class='fs-player-close' aria-labe='Close Player'><button class='fs-close-button'>&nbsp;</button></div><div class='fs-player-container-shim'><video id='fsPlayer_${this.uuid}' muted playsinline class='video-js vjs-16-9 vjs-default-skin'></video></div>`,document.body.appendChild(t),t.querySelector("button").addEventListener("click",()=>{this.remove({params:{userEnded:!0}})},{signal:this.abortController.signal})}addCSS(){let t=document.getElementById("fs-video-player"),r=!1;t||(t=b({type:"style",id:"fs-video-player"}),r=!0);let{width:s,height:n}=this.getVideoPlayerDimensions(),o=this.videoAd.videoAdhesionPosition.split("")[0]==="B"?"bottom":"top",a=this.videoAd.videoAdhesionPosition.split("")[1]==="R"?"right":"left",{bottomSpacing:d=0}=this.params||{},c=o==="bottom"?d:0;t.textContent=` #fs-player-container { position: fixed; border: 1px solid black; border-radius: 5px; overflow: visible; background-color: black; z-index: 2147483647; ${o}: ${c}px; ${a}: 0; width: ${s}; height: ${n}; transition: unset; ${a}: -${s}; visibility: hidden; } .fs-player-close { position: absolute; top: -13px; right: 5px; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; z-index: 2147483647; } .fs-player-close button { top: inherit !important; right: inherit !important; } `,this.getDeviceType()===Ee?(c+=10,t.textContent+=` #fs-player-container { box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.75); ${o}: ${c}px; } #fs-player-container.fs-show { visibility: visible; ${a}: 10px; transition: ${a} 0.5s; } `):t.textContent+=` .fs-player-container-shim { margin: 0 auto; max-width: 300px; } `,r&&document.head.appendChild(t)}updatePrebidConfig(t="outstream"){let r=this._prebidManager.instance.getConfig("s2sConfig"),s=this._prebidManager.instance.getConfig("ortb2");switch(t){case"outstream":r.bidders=["appnexus","pubmatic"],s.ext.prebid.storedrequest.id="6d0caa66-2299-488d-a87a-1a82fcea7862";break;default:r.bidders=this.pbjsConfigs.original.s2sConfig.bidders,s.ext.prebid.storedrequest.id=this.pbjsConfigs.original.ortb2.ext.prebid.storedrequest.id;break}this._prebidManager.instance.mergeConfig({s2sConfig:r,ortb2:s})}requestBids(){this.request=new _r({aps:this.videoAd.amazonActive,apsSlot:this.videoAd.amazonApsSlot||null,pbjs:!0,pbjsCode:this.prebidAdUnit.code,cb:this.handleBidResponse,prebid:this._prebidManager.instance,apstag:this._amazonManager.instance})}sendPbjsBidsEvent(){var t;(t=this.request.pbjsBids)==null||t.forEach(r=>{this.sendEvent({type:"videoBidRequest",value:{placementId:this.placement.name,player:gr,bids:[r]}})})}renderAd({data:t}){this.bids=t,this.renderer=new kt({player:this.player,bids:this.bids,placement:this.placement,videoAd:this.videoAd})}handleAdsReadyEvent(){this.player.play()}handleAdsErrorEvent(){let{pbjsBids:t=[]}=this.bids;this.renderer instanceof kt&&t&&t.length!==0&&t[0].cpm>=1?this.renderer=new Lt({player:this.player,adTagUrl:this.bids.pbjsBids[0].vastUrl}):this.callback&&this.callback(!1,{ended:!0,uuid:this.uuid})}handleImpressionEvent({event:t}){if(this.show(),tt({bidder:Dt,requestTimestamp:Date.now(),videoAd:this.videoAd,playerType:this.renderer instanceof kt?"springserve":"prebid"}),this.renderer instanceof Lt){let u=w({},this.request.pbjsBids[0]);u.videoAdserverTargeting=[u.adserverTargeting],delete u.adserverTargeting,this.sendEvent({type:"videoBidImpression",value:w({player:gr,placementId:this.placement.name},u)})}let{adSystem:r,creativeAdId:s,creativeId:n,duration:o,universalAdIds:a,vastMediaHeight:d,vastMediaWidth:c}=t.ad.data;this.sendEvent({type:"videoAdImpression",value:{player:gr,placementId:this.placement.name,adSystem:r,creativeAdId:s,creativeId:n,duration:o,universalAdIds:a,vastMediaHeight:d,vastMediaWidth:c}})}handleAllAdsCompleteEvent(){this.frequencyCapManager.incrementIteration(),this.hide(),this.callback&&this.callback(null,{ended:!0,uuid:this.uuid})}show(){let t=document.getElementById("fs-player-container");t&&t.classList.add("fs-show")}hide(){let t=document.getElementById("fs-player-container");t&&t.classList.remove("fs-show")}remove(){this.hide();let t=document.getElementById("fs-video-player");t&&t.remove(),this._prebidManager.instance.removeAdUnit(this.prebidAdUnit.code);let r=document.getElementById("fs-player-container");r&&r.remove(),super.remove(),this.abortController.abort(),this._prebidManager.instance.offEvent(yt,this.handlePrebidAuctionEndEvent)}};I.class(lc,{token:l.OUTSTREAM_VIDEO_PLAYER,dependencies:ai})});var Zo,$g=f(()=>{Xo();ie();us();Pe();L();k();Sr();Zo=class extends li{constructor(e){super(e),this._name="FloatingVideoAd"}get targetElement(){let{parentElement:e,classIndex:t,name:r}=this.videoAd;if(e){let n=t>-1?t:0;return this._document.querySelectorAll(e)[n]}let s=this._document.getElementById(r);return s||this._document.body}addCloseButton(){if(!this.playerContainerElement)return;let e=b({type:"div",classList:["fs-player-close"],attributes:[{"aria-label":"Close Player"}]}),t=b({type:"button",classList:["fs-close-button"]});t.innerHTML="&nbsp;",t.addEventListener("click",()=>this.callback(null,{uuid:this.uuid})),e.appendChild(t),this.playerContainerElement.appendChild(e)}addHTML(){super.addHTML(),this.addCloseButton()}addCSS(){let{width:e,height:t}=this._getVideoPlayerDimensions(),r=!1,s=this._document.getElementById(this._stylesheetId);s||(s=b({type:"style",id:this._stylesheetId}),r=!0),s.textContent=` #${this._containerId} { display: flex; align-items: center; justify-content: center; width: ${e}; min-height: ${t}; margin: 0 auto; border-radius: 10px; border: 0px; position: fixed; z-index: 9999; ${this._adPosition} } #${this._containerId} .fs-player-close { visibility: hidden; position: absolute; ${["TL","TR"].includes(this._adLocation)?"bottom":"top"}: -13px; right: 5px; z-index: 10000; } #${this._containerId} .fs-player-close button { top: inherit !important; right: inherit !important; } `,r&&this._document.head.appendChild(s)}get _adPosition(){let{headerHeight:e}=this.videoAd,{bottomSpacing:t}=this.params||{},s=(this._deviceInfo.device.type||Ee)===ee;return Jo({adLocation:this._adLocation,isMobile:s,topSpacing:e,bottomSpacing:t})}get _adLocation(){return this.videoAd.adLocation||"BR"}_setCloseButtonVisibility(e){let t=this.playerContainerElement.querySelector(".fs-player-close");t&&(t.style.visibility=e?"visible":"hidden")}onRender(){this._setCloseButtonVisibility(!0)}onCompleted(){this._setCloseButtonVisibility(!1)}};E(Zo,"adType","FLOATING");I.class(Zo,{token:l.FLOATING_VIDEO_AD,dependencies:ai})});function ea({classList:i=[]}={}){return b({type:"button",classList:i,attributes:[{"aria-label":"Close Ad"},{tabindex:0}]})}var cc=f(()=>{z()});var rS,fc,uc,ta,Yg=f(()=>{ie();cc();us();Xo();Pe();L();k();Sr();rS={root:null,rootMargin:"0px",threshold:.5},fc="fs-in-content",uc="fs-floating",ta=class extends li{constructor(t){super(t);E(this,"_onIntersection",t=>{t.forEach(r=>{let s=!r.isIntersecting;s!==this._isInFloatingMode&&(this._isInFloatingMode=s,this._updateStyles())})});this._name="InContentToFloatingVideoAd",this._observer=null,this._isInFloatingMode=!1,this._isLockedInContent=!1,this._attachIntersectionObserver()}addHTML(){if(!this.playerContainerElement){let t=ea({classList:["fs-close-button"]});t.addEventListener("click",()=>this._handleClose());let r=b({type:"div",id:this._containerId,children:[b({type:"div",classList:["fs-player-close"],attributes:[{"aria-label":"Close Player"}],children:[t]})]}),s=b({type:"div",id:`${this._containerId}-placeholder`,children:[r]});this.targetElement.appendChild(s)}}addCSS(){var c,u;let{width:t,height:r}=this._getVideoPlayerDimensions(),s=((u=(c=this._deviceInfo)==null?void 0:c.device)==null?void 0:u.type)===ee,{headerHeight:n}=this.videoAd,{bottomSpacing:o}=this.params||{},a=!1,d=this._document.getElementById(this._stylesheetId);d||(d=b({type:"style",id:this._stylesheetId}),a=!0),d.textContent=` #${this._containerId}-placeholder { display: flex; align-items: center; justify-content: center; width: ${t}; min-height: ${r}; margin: 0 auto; border-radius: 10px; position: relative; overflow: hidden; } #${this._containerId}-placeholder:after { content: 'ADVERTISEMENT'; display: block; position: absolute; top: 50%; left: 50%; z-index: 1; transform: translateX(-50%); font-family: sans-serif; font-size: 0.8rem; color: #646464; } #${this._containerId} { width: ${t}; min-height: ${r}; border-radius: 10px; border: 0px; } .${fc} { position: relative; } .${uc} { position: fixed; z-index: 9999; ${Jo({adLocation:this._adLocation,isMobile:s,topSpacing:n,bottomSpacing:o})} } #${this._containerId} .fs-player-close { visibility: hidden; position: absolute; ${["TL","TR"].includes(this._adLocation)?"bottom":"top"}: -13px; right: 5px; z-index: 10000; } #${this._containerId} .fs-player-close button { top: inherit !important; right: inherit !important; } `,a&&this._document.head.appendChild(d)}_setCloseButtonVisibility(t){let r=this.playerContainerElement.querySelector(".fs-player-close");r&&(r.style.visibility=t?"visible":"hidden")}_removeHTML(){let t=this._document.getElementById(`${this._containerId}-placeholder`);t==null||t.remove()}remove(){var t;(t=this._observer)==null||t.disconnect(),this._observer=null,super.remove()}_updateStyles(){if(!this.playerContainerElement)return;let{classList:t}=this.playerContainerElement;if(this._isInFloatingMode&&!this._isLockedInContent){t.add(uc),t.remove(fc);return}t.remove(uc),t.add(fc)}get _adLocation(){return this.videoAd.adLocation||"BR"}_handleClose(){this._isLockedInContent=!0,this._updateStyles()}_attachIntersectionObserver(){this._observer=new IntersectionObserver(this._onIntersection,rS),this._observer.observe(this.targetElement)}onRender(){this._setCloseButtonVisibility(!0)}onCompleted(){this._setCloseButtonVisibility(!1)}};E(ta,"adType","INCONTENT_TO_FLOATING");I.class(ta,{token:l.INCONTENT_TO_FLOATING_VIDEO_AD,dependencies:ai})});var jg=f(()=>{Xo();Hg();$g();Yg();oc()});var Kg=f(()=>{jg()});function ia({type:i,device:e}){return i&&(e&&e===ee||e===Ee)&&i[e]?i[e]:i[ee]}function sS(){let i=freestar.deviceInfo.device.type;return i===Vt||i===ee&&window.innerWidth>780?Ee:i}function Wg({selectedSize:i}){return i&&i.videoAdhesionPosition&&i.videoAdhesionPosition!=="DEFAULT_VIDEO_ADHESION_POSITION"?i.videoAdhesionPosition:"BR"}function Jg({callback:i,videoAd:e,placement:t}){let r=window.freestar.fsdata.placementVideos.find(_=>_.id===e.videoId),s=sS(),n={mobile:"625208",desktop:"625207"},o={mobile:"frstrOSm_8",desktop:"frstrOSd_8"},a=Wg(t),d=Wg(t),c={mobile:{widthm:e.playerSize==="LARGE"?"100%":"45%",heightm:e.playerSize==="LARGE"?"175":"112",posm:d},desktop:{widthd:e.playerSize==="LARGE"?"400":"312",heightd:e.playerSize==="LARGE"?"225":"176",posd:a}};if(window.freestar.fsdata.networks.some(_=>_.slug==="amazon")&&r.amazonActive){let _=r.amazonApsSlot||`springserve_${window.freestar.fsdata.siteId}_${location.host.split(".").length>2?location.host.split(".")[1]:location.host.split(".")[0]}`;c.mobile.apsSlot=_,c.desktop.apsSlot=_}let p=()=>r.supplyId&&r.supplyId.length?r.supplyId:ia({type:n,device:s}),m={mobile:{spIdm:p()},desktop:{spIdd:p()}},g=`https://cdn.springserve.com/assets/0/playerJS/${ia({type:o,device:s})}.js`;window._ssPlayer=Object.assign(ia({type:m,device:s}),ia({type:c,device:s}));function h({userEnded:_=!1}={}){freestar.log(1,"Spring Serve Footer Video Iteration Complete",arguments),delete window.AdPlayerPro,typeof i=="function"&&(_?i(void 0,{userEnded:!0}):i(void 0,{ended:!0}),i=void 0)}let A=Date.now(),S=()=>{window.AdPlayerPro().on("AdStarted",function(){freestar.log(1,"Spring Serve Footer Video Started"),tt({bidder:"springserve",videoAd:e,requestTimestamp:A}),freestar.frequencyLibrary[t.name]&&freestar.frequencyLibrary[t.name].cap&&freestar.frequencyLibrary[t.name].incrementIteration()}),window.AdPlayerPro().on("AdError",function(){freestar.log(1,"Spring Serve Footer Ad Fetch Error"),h({})}),window.AdPlayerPro().on("AdUserClose",function(){freestar.log(1,"Spring Serve Footer Ad User Ended"),h({userEnded:!0})}),["AdStopped","AdVideoComplete"].forEach(y=>{window.AdPlayerPro().on(y,h)})};se(g,()=>{Qg||(Qg=!0,it({bidder:"springserve",placementId:e.videoId?e.videoId:"",tagUrl:g}));let _=()=>window.AdPlayerPro&&typeof window.AdPlayerPro=="function"&&typeof window.AdPlayerPro()=="object"&&typeof window.AdPlayerPro().on=="function",y=0,N=50,x=setInterval(()=>{if(_()?(clearInterval(x),S()):y+=1,y>=N)try{S()}catch(q){freestar.log(1,"Error binding events to SpringServe Video Player",q)}},10)})}var Qg,Xg=f(()=>{ci();ie();Pe();Qg=!1});var pc,Zg=f(()=>{Yd();pc=({elementSelector:i,callback:e,timeout:t=5e3,frequency:r=300,doc:s=document})=>{mo({getIsFound:()=>!!s.querySelector(i),callback:n=>{e(n,s.querySelector(i))},timeout:t,frequency:r})}});function br({placement:i,videoInstance:e={},refreshLibrary:t}){this.body=document.body,this.placement=i,this._refreshLibrary=t,this.iteration=0,this.FOOTER_CORDIAL_KEY="fs.stickyfooter.cordial",this.stickyFooterId="fs-sticky-footer",this.stickyElement=void 0,this.stickySlotElement=void 0,this.slotWrapper=void 0,this.closeButton=void 0,this.brandingElement=void 0,this.reportAdIconElement=void 0,this.error=!1,this.disabled=!1,this.options=mt({placement:this.placement,type:pe.STICKY_FOOTER_OPTIONS}),this.errorSet=()=>{this.error=!0},this.disabledSet=()=>{this.disabled=!0},this.cordial={set:()=>{if(this.cordial.isCordial()){freestar.log({title:Re},"Cordial is being set in local storage with the following time : "+this.options.session);let r=this.options.session&&this.options.session>0?this.options.session:180,s=Date.now()+1e3*60*r;localStorage.setItem(this.FOOTER_CORDIAL_KEY,s.toString())}},isCordial:()=>(this.options.cordial?freestar.log({title:Re},"Cordial is active."):freestar.log({title:Re},"Cordial is not active."),this.options.cordial),isActivated:()=>{let r=localStorage.getItem(this.FOOTER_CORDIAL_KEY);if(r){if(r&&Date.now()>r)return freestar.log({title:Re},"Cordial storage item found, but time has lapsed and storage item will be removed."),localStorage.removeItem(this.FOOTER_CORDIAL_KEY),!1}else return freestar.log({title:Re},"Cordial storage item not found. Cordial not activated."),!1;return freestar.log({title:Re},"Cordial is activated. Exiting process"),!0}},this.isAdhesionDisabled=()=>{if(!this.placement||!this.options||!this.placement.sizes.length||!this.body)return freestar.log({title:Re},"No document body, placement, options, or sizes found! Exiting process."),this.errorSet(),!0;if(he({name:"stickyFooter"}))return this.disabledSet(),!0;if(this.options.remove){if(freestar.log({title:Re},"Option to remove is true."),document.querySelector("fs-select-footer-remove")||document.querySelector(this.options.remove))return freestar.log({title:Re},"Option to remove is on DOM! Exiting process."),this.disabledSet(),!0;freestar.log({title:Re},"Option to remove is not on DOM sticky footer will continue.")}return freestar.frequencyLibrary[this.placement.name].cap>-1&&!freestar.frequencyLibrary[this.placement.name].allowProduct()?(freestar.log({title:Re},"Frequency Cap has been met. Exiting process."),this.disabledSet(),!0):this.cordial.isCordial()&&this.cordial.isActivated()?(this.disabledSet(),!0):(freestar.log({title:Re},"Placement, options, and sizes found. No rules to disable have been accepted. Process will continue."),!1)},this.gumgumBidderRemoval=function(){this.options.gumgumSelect&&!document.getElementById("adhesion-select-one")&&(pa(this.placement.bidders,r=>r.bidder==="gumgum"),window.fsprebid.adUnits=window.fsprebid.adUnits.map(r=>(r.code===this.placement.name&&pa(r.bids,function(s){return W(s.bidder)==="gumgum"}),r)),freestar.log({title:Re},"Gumgum has been removed as a bidder"))},this.createStickyElement=function(){this.stickyElement=b({type:"div",id:this.stickyFooterId,classList:[this.stickyFooterId]}),this.stickyElement.style.zIndex=this.options.zindex&&`${this.options.zindex}`||"",this.body.appendChild(this.stickyElement)},this.setSlotMinHeight=function(){let{selectedSize:r}=freestar.fsdata.placements.find(d=>d.name===this.placement.name),s=r.size.map(d=>d[1]),n=Math.max.apply(Math,s),a=freestar.deviceInfo.device.type===ee&&Os()==="CONFIANT"&&freestar.fsdata.adQualityOptions&&freestar.fsdata.adQualityOptions.confiantReportThisAdEnabled&&j().allowConfiant()?n+20:n;this.stickyElement.style.minHeight=`${a}px`},this.createSlotElement=function(){this.stickySlotElement=b({type:"div",id:this.placement.name,classList:["fs-sticky-slot-element"],attributes:{name:this.placement.name,[Js]:"false"}}),this.stickySlotElement.style.visibility="inherit",this.slotWrapper=b({type:"div",id:"fs-slot-footer-wrapper",classList:["fs-sticky-parent","fs-sticky-wrapper"]}),this.slotWrapper.style.visibility="inherit",this.slotWrapper.style.zIndex="inherit",this.slotWrapper.appendChild(this.stickySlotElement),this.stickyElement.appendChild(this.slotWrapper);let r=()=>this.options.backgroundRgba&&this.options.backgroundRgba.length?this.options.backgroundRgba:freestar.fsdata.stickyFooterBackgroundRgba&&freestar.fsdata.stickyFooterBackgroundRgba.length?freestar.fsdata.stickyFooterBackgroundRgba:"rgba(247,247,247,.9)";this.backgroundColor=r(),this.setSlotMinHeight(),this.stickySlotElement.style.backgroundColor=this.backgroundColor,this.stickyElement.style.backgroundColor=this.backgroundColor;let s=()=>{this.stickyElement.style.minHeight=`${this.slotWrapper.offsetHeight}px`},n=()=>{let a=document.getElementsByClassName("fs-sticky-slot-element")[0]||{},{offsetHeight:d,offsetWidth:c}=a;this.brandingElement&&(d>50&&c<468?this.brandingElement.classList.add("fs-mobile-tall"):this.brandingElement.classList.remove("fs-mobile-tall"))};googletag.pubads().addEventListener("slotOnload",a=>{a.slot.getSlotElementId()===this.placement.name&&(this.elementToggle("visible"),n(),s())}),googletag.pubads().addEventListener(we,a=>{this.onSlotRenderEnded(a)}),fsprebid.que.push(()=>{fsprebid.onEvent(zi,a=>{a.adUnitCode===this.placement.name&&this.onBidWon(a.bidderCode)})});function o(a){let d=document.getElementById(a),c=d==null?void 0:d.querySelector("div[id*='google_ads_iframe']");c&&c.setAttribute("style","display: none;")}D.instance.resolve(l.EVENT_BUS).then(a=>{a.subscribe(Ki,({payload:{elementId:d,bid:c}})=>{d===this.placement.name&&(o(d),typeof c.height=="number"&&(this.stickyElement.style.minHeight=`${c.height+4}px`),n(),freestar.log({title:Re},"Sticky footer rendered natively."))}),a.subscribe(yo,({payload:{elementId:d}})=>{d===this.placement.name&&this.removeSpecialAdhesion()})})},this.removeSpecialAdhesion=()=>{var r,s;(s=(r=this.specialAdhesionElement)==null?void 0:r.parentNode)==null||s.removeChild(this.specialAdhesionElement),delete this.specialAdhesionElement},this.buttonEvents={onPage:!1,clicked:!1},this.closeButtonCreate=()=>{this.closeButton=ea(),this.closeButton.setAttribute("class","fs-close-button fs-close-button-sticky"),this.closeButton.style.visibility="inherit",this.buttonEvents.onPage||(this.buttonEvents.onPage=!0,D.instance.resolve(l.ANALYTICS).then(r=>{r.track(new Y({eventName:"STICKY_BUTTON_SHOWED",eventType:"STICKY_FOOTER",data:{value:!0}}))})),this.slotWrapper.appendChild(this.closeButton),this.closeButton.addEventListener("click",this.closeButtonMethod)},this.closeButtonMethod=()=>{this.cordial.set(),this.removeStickyElements(),this.buttonEvents.clicked||(this.buttonEvents.clicked=!0,D.instance.resolve(l.ANALYTICS).then(r=>{r.track(new Y({eventName:"STICKY_CLOSE_CLICKED",eventType:"STICKY_FOOTER",data:{value:!0}}))}))},this.createReportThisAd=function(r,s){let n=document.createElement("a");n.textContent="Report This Ad",n.style.color="#999",D.instance.resolve(l.CONFIANT).then(o=>{n.addEventListener("click",function(){o.reportSingleAd(r)})}),s.appendChild(n)},this.createBranding=()=>O(this,null,function*(){let[r,s]=yield Promise.all([l.BRANDING,l.REPORT_AD].map(d=>D.instance.resolve(d,!0))),n;r&&(n=r.createLink(this.placement));let o=this.placement.name,a=s==null?void 0:s.createTextButton(o,this.placement);if(n!=null&&n.enabled||a!=null&&a.enabled){let d=b({classList:["fs-sticky-popup-container"],style:{display:"none"}}),c=document.createElement("div");if(c.style.position="relative",n!=null&&n.enabled){this.brandingElement=b({type:"div",classList:["__fs-branding"]});let u=b({type:"a",attributes:[{target:"_blank"}]});this.brandingElement.style.visibility="inherit";let p=b({type:"img",src:n.getLogoUrl(),attributes:[{alt:"Freestar"}]});u.style.cursor.pointer,u.appendChild(p),this.brandingElement.appendChild(u),this.slotWrapper.appendChild(this.brandingElement),d.appendChild(n.getElement()),a.enabled&&d.appendChild(a.getElement()),c.appendChild(d),document.body.appendChild(c),this.brandingElement.addEventListener("click",function(m){var h,A;m.stopPropagation(),d.style.display=d.style.display==="none"?"grid":"none";var g=this.getBoundingClientRect();Ya(d,{position:"fixed",top:`${g.top-70}px`,left:`${g.left-70}px`,backgroundColor:((h=this.options)==null?void 0:h.backgroundRgba)||((A=freestar.fsdata)==null?void 0:A.stickyFooterBackgroundRgba)||"rgba(247,247,247,.9)"})})}else{this.reportAdIconElement=b({type:"div",classList:["__fs-branding"]});let u=s.createIconButton(o,this.placement);this.reportAdIconElement.style.visibility="inherit",this.reportAdIconElement.appendChild(u.getElement()),this.slotWrapper.appendChild(this.reportAdIconElement)}document.addEventListener("click",function(){d.style.display="none"})}}),this.closeButtonMethod.bind(this),this.frequencyCapInit=()=>{freestar.frequencyLibrary[this.placement.name]=new ur({placement:this.placement,product:"stickyFooter"})},this.videoAdRequest=function(r){var o;let s=Date.now(),n=(a,d)=>{var g;if(this.stickyFooterDeleted)return;if(d&&d.userEnded){freestar.log(1,"Sticky Footer Video: User ended video. Will not refresh sticky footer."),this.cordial.set();return}let c=((g=this._refreshLibrary[this.placement.name])==null?void 0:g.refreshTime)||30,u=(Date.now()-s)/1e3,p=c-u;function m(){p>=10?freestar.currentStickyFooter.fillSlot(p):freestar.currentStickyFooter.fillSlot()}document.hasFocus()?m():freestar.focusQueue.push(m)};this.hideAdhesion(),(o=e.footerVideoInit)==null||o.call(e,{videoAd:r,callback:n,placement:this.placement})},this.fillSlot=function(r=void 0,s){var a,d,c;r||this.iteration++;let n=(a=e.videoFetch)==null?void 0:a.call(e,{iteration:this.iteration,placement:this.placement}),o=this._refreshLibrary.getRefreshLibraryItem({slotId:this.placement.name});if(n&&!r)this.isVideo=!0,this.hideAdhesion(),o!=null&&o.refreshTime&&o.setRefreshTime(-1),this.videoAdRequest(n);else{this.isVideo=!1,(d=o==null?void 0:o.setRefreshTime)==null||d.call(o,r);let u={fsrefresh:String((c=o==null?void 0:o.timesRefreshed)!=null?c:0)};Jt([{slotId:this.placement.name,placementName:this.placement.name,targeting:u}],null,s)}},this.elementToggle=r=>{this.stickyElement&&(this.stickyElement.style.setProperty("display","block"),this.stickyElement.style.setProperty("visibility",r),this.stickyElement.style.setProperty("background-color",this.backgroundColor))},this.hideAdhesion=()=>{this.elementToggle("hidden")},this.showAdhesion=()=>{this.elementToggle("visible")},this.fetchCLSElement=()=>document.getElementById(this.placement.name+"-sticky-footer-cls"),this.init=function(){if(this.frequencyCapInit(),!this.isAdhesionDisabled()){if(jt({slotId:this.placement.name,placementName:this.placement.name}),this.gumgumBidderRemoval(),this.options.clsEnabled?(this.stickyElement=this.fetchCLSElement(),this.stickyElement&&(this.stickyElement.className+=` ${this.stickyFooterId}`)):this.createStickyElement(),!this.stickyElement){freestar.log({title:Re},"There is no sticky element! Exiting!");return}this.createSlotElement(),this.closeButtonCreate(),this.createBranding(),this.fillSlot()}},this.init(),this.onSlotRenderEnded=({isEmpty:r,slot:s})=>{s.getSlotElementId()===this.placement.name&&(r?this.hideAdhesion():(this.showAdhesion(),pc({elementSelector:gs.ogury,callback:(n,o)=>{n&&(this.hideAdhesion(),this.specialAdhesionElement=o)}})),freestar.performanceLogger.logMark({markerName:oe.pubfigStickyFooterSlotRenderEnded,compareTo:[oe.pubfigStickyFooterSlotRequested]}))},this.onBidWon=function(r){r=W(r),this.showAdhesion(),gs[r]&&pc({elementSelector:gs[r],callback:(s,n)=>{s&&(this.hideAdhesion(),this.specialAdhesionElement=n)},timeout:10*1e3})},this.getIsNextVideo=()=>{var s;return!!((s=e.videoFetch)==null?void 0:s.call(e,{iteration:this.iteration+1,placement:this.placement}))},this.stickyFooterRefresh=r=>{r instanceof Promise?r.then(()=>{this.removeSpecialAdhesion()}):this.removeSpecialAdhesion();let s=this._refreshLibrary.getRefreshLibraryItem({slotId:this.placement.name});s.refreshTime=-1;let n=this.placement.name;r instanceof Promise&&r.then(()=>{window.freestar.superflex&&window.freestar.superflex.removeCSS({elementId:n})}),this.fillSlot(null,r)},this.removeStickyElements=()=>{[this.stickySlotElement,this.stickyElement,this.slotWrapper].forEach(r=>{try{r&&r.parentNode&&r.parentNode.removeChild(r)}catch(s){freestar.log(1,`Error: ${s}`)}})},this.deleteStickyFooter=()=>{this.stickyFooterDeleted=!0,this.isVideo&&window.AdPlayerPro&&window.AdPlayerPro().remove(),this.cordial.set(),Gr({elementId:this.placement.name}),this.removeSpecialAdhesion(),this.removeStickyElements()},this.isSticky=r=>this.placement.name===r.slot.getSlotElementId()}var ra=f(()=>{re();lt();nt();ns();z();cc();St();vi();J();Ge();Te();Pr();Ve();Be();xe();hi();Pe();ct();L();wi();k();Zg();ie();kr()});var Ar,wr,mc=f(()=>{ra();z();lt();ct();L();k();Le();Ar={},wr=class{constructor({placement:e,videoInstance:t,refreshLibrary:r}){this.placement=JSON.parse(JSON.stringify(e)),this.videoCount=0,this.timer=null,this._videoInstance=t||{},this._refreshLibrary=r,this.init()}init(){var t,r;if(this.videoAd=(r=(t=this._videoInstance).getEnabledVideo)==null?void 0:r.call(t,{placement:this.placement}),this.placement.stickyFooterOptions.videoPattern="NO_STICKY_FOOTER_OUTSTREAM_VIDEO_PATTERN",this.placement.stickyFooterOptions.video=!1,this.footer=new br({placement:this.placement,videoInstance:this._videoInstance,refreshLibrary:this._refreshLibrary}),this._appendCSS(),he({name:"videoAdhesion"}))return;let{delayTime:e=0}=this.videoAd||{};e<1&&(e=1),freestar.log({title:X},`${e}s before video loads...`),Ar.delay=setTimeout(()=>{clearTimeout(Ar.delay),this.initVendor()},e*1e3),this._attachStickyFooterResizeListener()}initVendor(){var e,t,r;!freestar.currentStickyFooter||!this.videoAd||(this.videoCount+=1,(r=(t=(e=this._videoInstance)==null?void 0:e.videoVendors)==null?void 0:t[this.videoAd.vendor])==null||r.call(t,{callback:(s=null,n=null)=>{this.handleCallback(s,n)},placement:this.placement,videoAd:this.videoAd}))}_appendCSS(){let e=b({type:"style",id:this._getStyleId()}),{offsetHeight:t}=this.footer.slotWrapper;e.textContent=this._getCustomStyles(t),document.head.appendChild(e)}handleCallback(e=null,t=null){if(!freestar.currentStickyFooter)return;if(e){freestar.log({title:X},"ERROR",e);return}let{frequencyCap:r=0}=this.videoAd;if(t.userEnded){freestar.log({title:X},"User exited, no longer loading videos...");return}if(r>0&&this.videoCount>=r){freestar.log({title:X},`Frequency cap set to ${r}, no longer loading videos...`);return}document.hasFocus()?this.callNextVideo():freestar.focusQueue.push(()=>{this.callNextVideo()})}callNextVideo(){if(!freestar.currentStickyFooter)return;let{timeToWaitBetweenVideos:e=0}=this.videoAd;freestar.log({title:X},`${e}s before next video loads...`),Ar.delay=setTimeout(()=>{clearTimeout(Ar.delay),freestar.currentStickyFooter.initVendor()},e*1e3)}stickyFooterRefresh(e){this.footer.stickyFooterRefresh(e)}hideAdhesion(e){this.footer.hideAdhesion(e)}deleteStickyFooter(){if(Object.keys(Ar).forEach(e=>{clearTimeout(Ar[e])}),freestar.currentStickyFooter.footer.deleteStickyFooter(),window.AdPlayerPro){let e=window.AdPlayerPro();e&&e.remove()}if(freestar.currentOutstreamPlayer){freestar.currentOutstreamPlayer.videoPlayer.dispose();let e=document.getElementById("fs-player-container");e==null||e.parentNode.removeChild(e)}delete freestar.currentStickyFooter}_adjustVideoPosition({payload:{stickyFooterHeight:e}}){let t=document.querySelector(`#${CSS.escape(this._getStyleId())}`);t&&(t.textContent=this._getCustomStyles(e))}_attachStickyFooterResizeListener(){D.instance.resolve(l.EVENT_BUS).then(e=>{e.subscribe(ar,t=>this._adjustVideoPosition(t))})}_getCustomStyles(e=0){return` .orp-player-wrapper { margin-bottom: ${e+10}px !important; bottom: 0px !important; }`}_getStyleId(){return`${this.placement.name}-stylesheet`}isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}}});function t_(i,e,t,r){let s=freestar.fsdata.placements.filter(o=>We({placement:o,type:pe.STICKY_FOOTER_OPTIONS})&&o[pe.STICKY_FOOTER_OPTIONS].isOnCall);if(Me()&&s.length&&!e_){e_=!0,freestar.log("Sticky Footer: Sticky is on Call and PSO enabled next pub needs to call newStickyFooter");return}if(Me()&&!freestar.fsdata.psoDisableInteraction&&!hc){Bi({name:"stickyFooter",callback:nS.bind(null,{})});return}let n;if(i&&i.length?(freestar.log(1,`Sticky Footer: newStickyFooter method invoked and requesting placement with the name ${i}.`),n=Q({name:i})):(n=window.freestar.fsdata.placements.filter(o=>o.stickyFooterOptions&&o.stickyFooterOptions.active)[0],n&&freestar.log(1,`Sticky Footer: newStickyFooter method invoked without a name for a placement. The default Sticky Footer ${n.name} was found and will be used.`)),n){freestar.log(1,`Sticky Footer: newStickyFooter method - attempting a new sticky footer using placement ${n.name}.`),freestar.currentStickyFooter&&freestar.currentStickyFooter.placement&&(freestar.log(1,`Sticky Footer: newStickyFooter method - the current sticky footer will be removed ${freestar.currentStickyFooter.placement.name}.`),freestar.currentStickyFooter=void 0),freestar.currentStickyFooter&&freestar.currentStickyFooter.deleteStickyFooter&&freestar.currentStickyFooter.deleteStickyFooter();let{stickyFooterOutstreamVideoPattern:o}=ps(n);o==="VIDEO_DISPLAY_CONCURRENT"?freestar.currentStickyFooter=new wr({placement:n,videoInstance:e,refreshLibrary:r}):freestar.currentStickyFooter=new br({placement:n,videoInstance:e,refreshLibrary:r}),freestar.deleteStickyFooter=freestar.currentStickyFooter.deleteStickyFooter}else freestar.log(1,"Sticky Footer: newStickyFooter method - no placement found for the sticky footer!");t&&t()}var hc,e_,nS,ps,gc=f(()=>{z();ra();mc();nt();xr();ke();hi();hc=!1,e_=!1,nS=function(i){hc||(hc=!0,freestar.newStickyFooter()),freestar.log(1,`${i}`)},ps=i=>{let e=!1;return i.sizeMappings.some(t=>{if(Je()>=t.viewport.size[0]){let{stickyFooterOutstreamVideoPattern:r,delayTime:s,playerSize:n,timeToWaitBetweenVideos:o,videoAdhesionPosition:a,videoEnabled:d,videoAdId:c,videoId:u,frequencyCap:p}=t;return e={stickyFooterOutstreamVideoPattern:r,delayTime:s,playerSize:n,timeToWaitBetweenVideos:o,videoAdhesionPosition:a,videoEnabled:d,videoAdId:c,videoId:u,frequencyCap:p},!0}}),e}});var sa,i_=f(()=>{Xg();gc();z();J();lt();sa=class{constructor({freestar:e,freestarOutstreamVideo:t}){E(this,"videoPatterns",{DISPLAY_INIT_DISPLAY_CONSECUTIVE:{enabledDisplayIterations:[],disabledVideoIterations:[4,6],enabledVideoIterations:[2,5,7]},DISPLAY_INIT_ALTERNATING:{enabledDisplayIterations:[],disabledVideoIterations:[],enabledVideoIterations:[2]},VIDEO_INIT_ALTERNATING:{enabledDisplayIterations:[2],disabledVideoIterations:[],enabledVideoIterations:[],videoInitial:!0},VIDEO_INIT_DISPLAY_CONSECUTIVE:{videoInitial:!0,enabledDisplayIterations:[],disabledVideoIterations:[10,15,18],enabledVideoIterations:[4,5,9,12,13,17,20,21,29,33]},DISPLAY_INIT_VIDEO_CONSECUTIVE:{enabledDisplayIterations:[],disabledVideoIterations:[],enabledVideoIterations:[...Array(34).keys()].splice(2)}});this._freestar=e,this._freestarOutstreamVideo=t}footerVideoInit({callback:e,videoAd:t,placement:r}){t&&t.vendor&&this.videoVendors[t.vendor]&&this.videoVendors[t.vendor]({callback:e,videoAd:t,placement:r})}getPlacementVideoAd({placement:e}){var s,n;let{selectedSize:t}=e;if(!(t!=null&&t.videoEnabled))return;let r=(s=freestar.fsdata.videoAds)==null?void 0:s.find(o=>o.name===t.videoAdId);return!r&&t.videoAdId&&(r=(n=freestar.fsdata.placementVideos)==null?void 0:n.find(o=>o.id===t.videoId)),r}getEnabledVideo({placement:e}){let t=this.getPlacementVideoAd({placement:e});return t?Object.assign(ps(e),t):!1}getIfEnabledVideo({placement:e}){return he({name:"videoAdhesion"})||freestar.locData&&freestar.locData.iso&&$c.indexOf(freestar.locData.iso)!==-1?!1:e.stickyFooterOptions&&e.stickyFooterOptions.video?this.getEnabledVideo({placement:e}):!1}videoFetch({iteration:e,placement:t}){let r=mp(t),{stickyFooterOutstreamVideoPattern:s}=r;if(s&&s!=="NO_STICKY_FOOTER_OUTSTREAM_VIDEO_PATTERN"&&this.videoPatterns[s]){let{disabledVideoIterations:n,enabledVideoIterations:o,enabledDisplayIterations:a,videoInitial:d=!1}=this.videoPatterns[s];if(d&&e===1)return this.getIfEnabledVideo({placement:t});if(a.length)return a.map(u=>e%u).includes(0)?!1:this.getIfEnabledVideo({placement:t});if(n.length&&n.map(u=>e%u).includes(0))return!1;if(o.length&&o.map(u=>e%u).includes(0))return this.getIfEnabledVideo({placement:t})}return!1}setVideoAdhesionEnabled(e){e?(freestar.currentStickyFooter&&(freestar.currentStickyFooter.iteration=0),freestar.config.products.videoAdhesion.disabled=!1):freestar.config.products.videoAdhesion.disabled=!0}get videoVendors(){return{SPRINGSERVE:Jg,FREESTAR_OUTSTREAM_PLAYER:this._freestarOutstreamVideo}}}});var r_,s_=f(()=>{r_=i=>{let{name:e,embedCode:t}=i;if(e&&t){let r=document.getElementById(e);if(r){let n=document.createRange().createContextualFragment(t);r.appendChild(n)}else freestar.log(20,`Failed to load STN video ad. Could not find container "${e}".`)}else freestar.log(30,"Failed to load STN video ad. Video ad must be configured with a name and embed code.")}});var n_,oS,o_,aS,dS,_c,lS,a_,d_=f(()=>{ci();z();Pe();J();ct();n_="freestarPrimisPlayer",oS=1.470588235,o_="freestarPrimisScript",aS=({videoAd:i,container:e})=>{if(e&&e.appendChild){let{primisToken:t,device:r}=i,s=r===Ee.toUpperCase()||window.innerWidth>768?400:300,n=parseInt(s/oS,10),o=Math.round(new Date().getTime()/1e3),a=encodeURIComponent(window.location.href),d=`${window.location.protocol}//live.primis.tech/live/liveView.php?s=${t}&cbuster=${o}&pubUrl=${a}&x=${s}&y=${n}&playerApiId=${n_}&schain=1.0,1!${Ft},${window.freestar.fsdata.companyId},1`;it({bidder:"primis",tagUrl:d,placementId:i.name}),cp({scriptSrc:d,target:_c({videoAd:i}),id:o_}),window.top.sekindoFlowingPlayerOn=!1}},dS=({player:i,requestTimestamp:e,videoAd:t})=>{i.addEventListener("adStarted",function(){tt({bidder:"primis",videoAd:t,requestTimestamp:e})}),window.freestar.deleteVideo=function(){window.freestar.log({title:X},"Video delete");let r=_c({videoAd:t});if(r){let s=document.getElementById(o_);s&&s.remove();let n=Array.from(r.children).find(o=>o.querySelector("#primis_container_div")!==null||o.id==="primis_container_div");n&&r.removeChild(n)}}},_c=({videoAd:i})=>{let e=document.querySelector("body");if(i.parentElement&&i.parentElement.indexOf("#")===0){if(e=document.querySelectorAll(i.parentElement)[0],i.nthElement>-1)try{e=e.children[i.nthElement]}catch(t){return freestar.log({title:X},"PRIMIS ELEMENT NOT FOUND ON PAGE, SKIPPING"),!1}}else if(i.nthElement>-1)if(i.parentElement&&i.parentElement.length){let t=document.querySelectorAll(i.parentElement)[i.classIndex];try{e=t.children[i.nthElement]}catch(r){return freestar.log({title:X},"PRIMIS ELEMENT NOT FOUND ON PAGE, SKIPPING"),!1}}else i.nthElement?e=document.body[i.nthElement]:freestar.log({title:X},"COULD NOT ACQUIRE DOM NODE FOR PRIMIS VIDEO. CONFIGURATION FOR VIDEO INCORRECT!");return e},lS=i=>{window.addEventListener("primisPlayerInit",function(t){t.detail.playerApiId===n_&&dS({player:t.detail,requestTimestamp:Date.now(),videoAd:i})});let e=_c({videoAd:i});if(e===null){freestar.log({title:X},"COULD NOT ACQUIRE DOM NODE FOR PRIMIS VIDEO");return}aS({videoAd:i,container:e})},a_=lS});function cS({videoAd:i}){let e="//cd.connatix.com/connatix.player.js?cid=f9509d53-804e-427d-a0bc-1204c0a3bcb1";freestar.log({title:X},"CONNATIX ELEMENTS : script loading..."),it({bidder:"connatix",placementId:i.name,tagUrl:e}),function(t){if(!window.cnx){window.cnx={},window.cnx.cmd=[];var r=t.createElement("iframe");r.src="javascript:false",r.display="none",r.onload=function(){var s=r.contentWindow.document,n=s.createElement("script");n.src=e,n.setAttribute("async","1"),n.setAttribute("type","text/javascript"),s.body.appendChild(n)},t.head.appendChild(r)}}(document)}function fS({videoAd:i,targetElement:e}){let t=b({type:"script",id:i.scriptId});e.appendChild(t),freestar.log({title:X},"CONNATIX ELEMENTS : script element created : ",t)}function uS({videoAd:i}){let e={playerId:i.playerId,settings:{defaultSoundMode:window.cnx.configEnums.DefaultSoundModeEnum.Off}};return(!i.parentElement.length||i.toFloat||i.adType&&i.adType==="SLIDER")&&(e.settings.customization={floating:{mode:window.cnx.configEnums.FloatingModeEnum[!i.parentElement||i.adType==="SLIDER"?"Always":"AfterInView"],fixedPosition:window.cnx.configEnums.FloatingFixedPositionModeEnum.Page,scrollPosition:window.cnx.configEnums.FloatingScrollPositionEnum.BottomRight,floatingWidth:i.width&&i.width>100?i.width:401,floatingGutterX:5,floatingGutterY:100}}),e}function Ec(i){if(freestar.log({title:X},"CONNATIX ELEMENTS : video init..."),!i.scriptId)return;let{parentElement:e,classIndex:t}=i,r=t&&t>-1?t:0,s=e?document.querySelectorAll(e)[r]:document.body;if(s){freestar.log({title:X},"CONNATIX ELEMENTS : video target element : ",s);let n=Date.now();cS({videoAd:i}),fS({videoAd:i,targetElement:s}),window.cnx.cmd.push(function(){cnx(uS({videoAd:i})).render(i.scriptId,function(o,a){a&&a.on&&window.cnx.configEvents&&window.cnx.configEvents.AdPlay&&a.on(window.cnx.configEvents.AdPlay,()=>{tt({bidder:"connatix",videoAd:i,requestTimestamp:n})})})})}else freestar.log({title:X},"CONNATIX ELEMENTS : video ad parent element not found. Skipping...")}var l_=f(()=>{ci();z();ct()});function pS({videoAd:i}){let e="//cd.connatix.com/connatix.playspace.js?cid=f9509d53-804e-427d-a0bc-1204c0a3bcb1";freestar.log({title:X},"CONNATIX PLAYSPACE : script loading..."),it({bidder:"connatix",placementId:i.name,tagUrl:e}),function(t){if(!window.cnxps){window.cnxps={},window.cnxps.cmd=[];var r=t.createElement("iframe");r.src="javascript:false",r.display="none",r.onload=function(){var s=r.contentWindow.document,n=s.createElement("script");n.src=e,n.setAttribute("async","1"),n.setAttribute("type","text/javascript"),s.body.appendChild(n)},t.head.appendChild(r)}}(document)}function mS({videoAd:i,targetElement:e}){let t=b({type:"script",id:i.scriptId});e.appendChild(t),freestar.log({title:X},"CONNATIX PLAYSPACE : script element created : ",t)}function hS({videoAd:i}){let e={playerId:i.playerId,settings:{defaultSoundMode:window.cnxps.configEnums.DefaultSoundModeEnum.Off}};return(!i.parentElement.length||i.toFloat||i.adType&&i.adType==="SLIDER")&&(e.settings.customization={floating:{mode:window.cnxps.configEnums.FloatingModeEnum[!i.parentElement||i.adType==="SLIDER"?"Always":"AfterInView"],fixedPosition:window.cnxps.configEnums.FloatingFixedPositionModeEnum.Page,scrollPosition:window.cnxps.configEnums.FloatingScrollPositionEnum.BottomRight,floatingWidth:i.width&&i.width>100?i.width:401,floatingGutterX:5,floatingGutterY:100}}),e}function c_(i){if(freestar.log({title:X},"CONNATIX PLAYSPACE : video init..."),!i.scriptId)return;let{parentElement:e,classIndex:t}=i,r=t&&t>-1?t:0,s=e?document.querySelectorAll(e)[r]:document.body;if(s){freestar.log({title:X},"CONNATIX PLAYSPACE : video target element : ",s);let n=Date.now();pS({videoAd:i}),mS({videoAd:i,targetElement:s}),window.cnxps.cmd.push(function(){cnxps(hS({videoAd:i})).render(i.scriptId,function(o,a){a&&a.on&&window.cnxps.configEvents&&window.cnxps.configEvents.AdPlay&&a.on(window.cnxps.configEvents.AdPlay,()=>{tt({bidder:"connatix",videoAd:i,requestTimestamp:n})})})})}else freestar.log({title:X},"CONNATIX PLAYSPACE : video ad parent element not found. Skipping...")}var f_=f(()=>{ci();z();ct()});var gS,yc,u_=f(()=>{Kg();i_();Le();ct();k();lt();Ws();wi();Pe();s_();d_();l_();f_();L();gS={DISPLAY:"InBannerVideoPlayer",OUTSTREAM:"OutstreamVideoPlayer",INCONTENT:"InContentVideoAd",FLOATING:"FloatingVideoAd",INCONTENT_TO_FLOATING:"InContentToFloatingVideoAd"},yc=class{constructor({freestar:e,eventBus:t,dispensaryData:r}){E(this,"videoPlayers",{});E(this,"_stickyFooterVideo");E(this,"remove",({uuid:e=null,name:t=null})=>{e&&this.videoPlayers[e]&&(this.videoPlayers[e].remove(),delete this.videoPlayers[e]),t&&Object.keys(this.videoPlayers).forEach(r=>{this.videoPlayers[r].videoAd.name===t&&(this.videoPlayers[r].remove(),delete this.videoPlayers[e])})});E(this,"add",e=>O(this,null,function*(){if(he({name:"video"}))return;let t=this._dispensaryData.fsdata.videoAds.find(d=>d.name===e);if(!t)return;let{vendor:r,device:s,name:n,videoSelect:o,adType:a}=t;if(r&&s&&this._isVideoAllowed({device:s,videoSelect:o})){if(freestar.log({title:X},`${n} eligible to run with device type ${freestar.deviceInfo.device.type} and is a ${r} video.`),r==="FREESTAR_OUTSTREAM_PLAYER"){let u=(h,A)=>{A!=null&&A.uuid&&this.remove({uuid:A.uuid})},p=gS[a];if(!p)return;let m=yield D.instance.create(p,{provide:{params:{videoAd:t,callback:u}}});this.videoPlayers[m.uuid]=m;let g=es();m.updateBottomSpacing(g);return}let d={connatixInit:Ec,primisInit:a_,connatixplayspaceInit:c_,stnInit:r_},c=`${r.split("_").join("").toLowerCase()}Init`;d[c]&&d[c](t)}}));E(this,"init",({isAfterLoadingPage:e=!1,failSafeStart:t=!1}={})=>{this._dispensaryData.fsdata.videoAds&&this._dispensaryData.fsdata.videoAds.length&&(performance.mark("video-initialization-start"),this._dispensaryData.fsdata.videoAds.forEach(r=>{r&&(r.videoAdStarted||r.adType!=="VIDEO_ADHESION_FLOATING"&&(!t&&(!e&&r.delayVideoAd||e&&!r.delayVideoAd)||(this._freestar.log(1,`VIDEO: Checking to see if ${r.name} should run`),r.onCallVideo?this._freestar.log(1,"VIDEO: Video is on call and will not run until the freestar.newVideo method is ran"):(this._freestar.log(1,`VIDEO: ${r.name} is being created!`),this.add(r.name)),r.videoAdStarted=!0)))}),performance.mark("video-initialization-end"))});E(this,"_isVideoAllowed",({device:e=Ee,videoSelect:t})=>this._videoDeviceCheck({videoDeviceType:e.toLowerCase()})||e==="ALL_DEVICES"&&this._videoAllowed({videoSelect:t}));E(this,"_videoAllowed",({videoSelect:e})=>!!(!e||!e.length||e!=null&&e.length&&document.getElementById(e)!==null));E(this,"_videoDeviceCheck",({videoDeviceType:e})=>e!=="all_devices"?freestar.deviceInfo.device.type===e||freestar.deviceInfo.device.type===Vt&&e===Ee:!0);this._freestar=e,this._dispensaryData=r,t.subscribe(ar,({payload:{stickyFooterHeight:s}})=>{this._updateBottomSpacingInAllPlayers(s)})}_updateBottomSpacingInAllPlayers(e){Object.values(this.videoPlayers).forEach(t=>{t.updateBottomSpacing(e)})}get stickyFooterVideoInstance(){return this._stickyFooterVideo||(this._stickyFooterVideo=new sa({freestar:this._freestar,freestarOutstreamVideo:({videoAd:e,callback:t,placement:r})=>{let n={videoAd:e,callback:(o,a)=>{a!=null&&a.uuid&&this.remove({uuid:a.uuid}),t(o,a)},placement:r};D.instance.create(l.OUTSTREAM_VIDEO_PLAYER,{provide:{params:n}}).then(o=>{let a=es();o.updateBottomSpacing(a),this.videoPlayers[o.uuid]=o})}})),this._stickyFooterVideo}};I.class(yc,{token:l.VIDEO,dependencies:["freestar",l.EVENT_BUS,l.DISPENSARY_DATA],defaultAlias:"video"})});var Ic,p_=f(()=>{Tl();L();k();Ic=class extends pr{constructor({freestar:e,gamManager:t}={}){super(),this._freestar=e,this._gamManager=t}shouldRefresh({elementId:e}){var t,r;return e===((r=(t=this._freestar.currentStickyFooter)==null?void 0:t.placement)==null?void 0:r.name)}fetchBids({elementId:e}){var s;let t=((s=this._freestar.currentStickyFooter)==null?void 0:s.footer)||this._freestar.currentStickyFooter;if(t!=null&&t.getIsNextVideo())return;let r=this.getSignal(e);this._freestar.currentStickyFooter.stickyFooterRefresh(r)}refresh({elementId:e,refreshLibraryItem:t}){var n;this._gamManager.instance.pubads().getSlots().find(o=>o.getSlotElementId()===e).setTargeting("fsrefresh",`${(n=t.timesRefreshed)!=null?n:0}`);let s=this.getPendingRequest(e);typeof s=="function"?s():this._freestar.currentStickyFooter.stickyFooterRefresh()}};I.class(Ic,{token:l.STICKY_FOOTER_REFRESHER,dependencies:[l.FREESTAR,l.GAM_MANAGER]})});function _S(){let{removeFooter:i,specialAdhesionRemoved:e,customFooter:t}=freestar.fsdata;if(i||e||t){let r=["#fs-select-footer-remove","#fs-special-remove"];for(let s=0;s<r.length;s++)if(Sc({domSelector:r[s]}))return!0}return!1}function m_({placement:i}){if(_S())return!0;let{remove:e,adhesionRemove:t,add:r}=mt({placement:i,type:pe.STICKY_FOOTER_OPTIONS});return!!(e&&Sc({domSelector:e})||t&&Sc({domSelector:t})||r&&!document.getElementById("fs-select-footer"))}var Sc,h_=f(()=>{nt();hi();Sc=({domSelector:i})=>document.querySelector(i)});var bc,g_=f(()=>{L();nt();p_();h_();ra();mc();gc();hi();k();Le();Xd();bc=class{constructor({freestar:e,video:t={},eventBus:r,refreshLibrary:s}){E(this,"newStickyFooter",e=>{t_(e,this._videoInstance,this._attachStickyFooterResizeListener.bind(this),this._refreshLibrary)});E(this,"setVideoAdhesionEnabled",e=>{var t,r;return(r=(t=this._videoInstance).setVideoAdhesionEnabled)==null?void 0:r.call(t,e)});E(this,"_attachStickyFooterResizeListener",()=>{this._resizeObserver&&this._resizeObserver.disconnect(),this._resizeObserver=new ResizeObserver(()=>{let t=es();this._eventBus.emit(ar,{stickyFooterHeight:t})});let e=Jd();e&&this._resizeObserver.observe(e)});E(this,"init",()=>{try{performance.mark("stickyFooter-initialization-start");let e="Sticky Footer: initStickyFooter method - ";this._freestar.log(1,e+" invoked looking for sticky placements!");let t=this._freestar.fsdata.placements.filter(r=>r.validAdSizes&&We({placement:r,type:pe.STICKY_FOOTER_OPTIONS})&&r[pe.STICKY_FOOTER_OPTIONS].isOnCall);if(t.length)this._freestar.log(1,`${e} there are ${t.length} on call sticky footer placements. There will be no standard sticky footer invoked by Pubfig.js!`);else{this._freestar.log(1,e+" there are no on call sticky footer placements. Attempting to find a default sticky footer placement");let r=this._freestar.fsdata.placements.filter(s=>s.validAdSizes&&We({placement:s,type:pe.STICKY_FOOTER_OPTIONS})&&!s[pe.STICKY_FOOTER_OPTIONS].isOnCall)[0];if(r&&!m_({placement:r})){this._freestar.log(1,`${e} ${r.name} is not blocked invoking AddStickyFooter.`);let{stickyFooterOutstreamVideoPattern:s}=ps(r);s==="VIDEO_DISPLAY_CONCURRENT"&&r.stickyFooterOptions.video?this._freestar.currentStickyFooter=new wr({placement:r,videoInstance:this._videoInstance,refreshLibrary:this._refreshLibrary}):this._freestar.currentStickyFooter=new br({placement:r,videoInstance:this._videoInstance,refreshLibrary:this._refreshLibrary}),this._attachStickyFooterResizeListener(),this._freestar.deleteStickyFooter=this._freestar.currentStickyFooter.deleteStickyFooter||this._freestar.currentStickyFooter.footer.deleteStickyFooter}else this._freestar.log(1,e+"no default sticky placement found or it is blocked due to rules found in the footerIsBlocked method. There will be no standard sticky footer invoked by Pubfig.js!")}performance.mark("stickyFooter-initialization-end")}catch(e){this._freestar.log({title:"STICKY FOOTER",styles:"background: red; color: white; border-radius: 3px; padding: 3px"},e.message)}});this._freestar=e,this._eventBus=r,this._videoInstance=t.stickyFooterVideoInstance||{},this._refreshLibrary=s}};I.class(bc,{token:"StickyFooter",dependencies:[l.FREESTAR,{token:"Video",optional:!0},l.EVENT_BUS,l.REFRESH_LIBRARY],defaultAlias:"stickyFooter"})});var na,__=f(()=>{L();k();ie();xi();ci();na=class{load(){return O(this,null,function*(){["https://vjs.zencdn.net/7.20.2/video-js.css","https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.css","https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.css"].forEach(e=>{document.head.appendChild(b({type:"link",attributes:{rel:"stylesheet",href:e}}))}),yield Ai("https://vjs.zencdn.net/7.20.2/video.min.js"),yield Promise.all([Ai("https://imasdk.googleapis.com/js/sdkloader/ima3.js"),Ai("https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.9.0/videojs-contrib-ads.js"),Ai("https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.js")]),it({bidder:Dt,placementId:"",tagUrl:""})})}};I.class(na,{token:l.FOP_VIDEO_SCRIPTS,factory:()=>O(void 0,null,function*(){let i=new na;return yield i.load(),i})})});var E_=f(()=>{__();xi();cs()});function y_({placementName:i=void 0,callback:e=void 0}){freestar.log(1,"Stand Alone Player: Invoked",arguments);let t=!0,r=freestar.fsdata.placements.filter(s=>s.name===i)[0];if(r){freestar.log(1,"Stand Alone Player: Placement",r);let s=document.getElementById(r.name),n=document.createElement("div");if(n.style=s.style,n.style.width="100%",n.style.height="100%",n.id="_"+s.id,n.className="_wrapper",s.appendChild(n),freestar.log(1,"Stand Alone Player: Div",s),s){let{width:o}=s.getBoundingClientRect();if(o>=300){freestar.log(1,"Stand Alone Player: eligible width!");let a=freestar.fsdata.placementVideos.filter(d=>d.id===r.standAloneVideoOptions.videoId)[0];a&&(freestar.log(1,"Stand Alone Player: videoAd",a),t=!1,ES({videoAd:a,placement:r,width:o,callback:e}))}else freestar.log(1,"Stand Alone Player: width is not equal to or greater than 400px!")}}t&&e&&(freestar.log(1,"Stand Alone Player: Failure!"),e(!0))}function ES({videoAd:i,placement:e,width:t,callback:r=void 0}){performance.mark("springServe-initialization-start"),window._ssPlayer=window._ssPlayer||{spIdi:i.supplyId,widthi:`${t}`,aspecti:"16:9",divi:"_"+e.name};let s="https://cdn.springserve.com/assets/0/playerJS/frstrIN_2.js",n=Date.now();it({bidder:"springserve",placementId:i.id?i.id:"",tagUrl:s});function o(){r&&(r(null,{completed:!0}),r=void 0)}load_script(s,function(){window.AdPlayerPro().on("AdStarted",function(){tt({bidder:"springserve",videoAd:i,requestTimestamp:n}),r&&r(null,{videoAdStarted:!0}),["AdStopped","AdClosed"].forEach(a=>{window.AdPlayerPro().on(a,()=>{o()})}),window.AdPlayerPro().on("AdSkipped",()=>{r&&(r(null,{videoAdSkipped:!0,completed:!0}),r=void 0)})}),window.AdPlayerPro().on("AdError",function(){freestar.log(1,"Stand Alone Player: Error loading video requesting bids via new ad slots method"),r&&(r(null,{videoAdStarted:!1}),freestar.standAlonePlayer.callback=r,freestar.standAlonePlayer.slotId=e.name),e.standAloneVideoOptions.backfillDisplayAd?(freestar.log(1,"Stand Alone Player: Backfill display ad requesting."),Jt([{placementName:e.name,slotId:e.name}])):(freestar.log(1,"Stand Alone Player: Backfill display not selected. Process terminating"),r(null,{completed:!0}))}),performance.mark("springServe-initialization-end")})}function I_({event:i}){let e=i.slot.getSlotElementId(),t=freestar.fsdata.placements.filter(r=>r.name===e)[0];if(t){let{standAloneVideoOptions:r}=t;if(r&&r.videoId&&r.videoId.length&&freestar.fsdata.placementVideos.filter(n=>n.id===t.standAloneVideoOptions.videoId)[0]){freestar.standAlonePlayer&&freestar.standAlonePlayer.callback&&typeof freestar.standAlonePlayer.callback=="function"&&(freestar.standAlonePlayer.callback(null,{displayAdServed:!i.isEmpty,completed:!0}),freestar.standAlonePlayer.callback=void 0);let n=document.getElementById(t.name);if(n){let o=n.querySelector("div[id^=google_ads_iframe_]");o&&(o.className+="center-ad")}}}}function S_({placementName:i=void 0,callback:e=void 0}){let t=freestar.fsdata.placements.filter(r=>r.name===i)[0];t&&(freestar.log(1,"Stand Alone Player: Placement",t),document.getElementById(t.name).innerHTML="",delete window.AdPlayerPro),e&&e(!0)}var Ac=f(()=>{ci();St()});function wc(){if(window.BrowsiScriptLoaded)return;let i=b({type:"script",id:"browsi-tag",src:"https://cdn.browsiprod.com/bootstrap/bootstrap.js",attributes:[{"data-pubKey":"freestar"},{"data-siteKey":"d_mapping"}]});i.type="text/javascript",i.async=!0,i.onload=function(){window.BrowsiScriptLoaded=!0},document.getElementsByTagName("head")[0].appendChild(i)}var b_=f(()=>{ie()});function w_({firstAdRequestedElement:i}){googletag.pubads().addEventListener(we,function(e){i&&e.slot.getSlotElementId()===i&&freestar.performanceLogger.logMark({markerName:oe.pubfigSlotRenderEnded,compareTo:[oe.pubfigSlotRequested]}),I_({event:e}),A_||(A_=!0,freestar.fsdata.browsiEnabled&&j().allowBrowsi()&&(wc(),freestar.log({title:"Browsi"},"Script loaded")))})}var A_,v_=f(()=>{Ac();b_();Ve();vi();xe();A_=!1});function yS(){return freestar.fsdata.placements.filter(i=>i.interstitialOptions&&i.interstitialOptions.active&&i.interstitialOptions.type==="UNDERTONE_GRABBER")[0]}function T_(i){if(he({name:"pageGrabber"})){i(!0);return}freestar.log(1,"Page Grabber: Init");let e=yS();if(e){performance.mark("pageGrabber-initialization-start"),freestar.log(1,"Page Grabber: placement ",e),freestar.frequencyLibrary[e.name]=new ur({placement:e,product:"interstitial",callback:i});let t=Number(sessionStorage.getItem("pageviews")||1),{interstitialPageViewsBefore:r}=mt({placement:e,type:"interstitialOptions"});if(freestar.frequencyLibrary[e.name].cap>-1&&!freestar.frequencyLibrary[e.name].allowProduct()){i(!0);return}if(r&&t<r){i(!0);return}let s=Xt({placement:e}),n=ze(e);if(n&&Kt({adUnits:n}),s&&e.name&&document.body){let o=function(p){if(p&&p.data)try{let m=p.data&&typeof p.data=="string"?JSON.parse(p.data):!1;m.method&&m.method==="close"&&a({slot:s,callback:i,name:e.name})}catch(m){freestar.log(1,`Error: ${m}`)}},a=function({slot:p,callback:m}){freestar.log(1,"Page Grabber: destroying page grabber div!"),freestar.newAdSlotsAllowed=!0,document.removeEventListener("click",o,!1),googletag.destroySlots([p]),m(null,!0)};freestar.newAdSlotsAllowed=!1;let d=b({type:"div",id:e.name});document.body.appendChild(d),googletag.cmd.push(function(){googletag.display(d.id)}),D.instance.resolve(l.BIDS_MANAGER).then(p=>{p.requestBids({elementIds:[e.name],slots:[s]})});let c=0,u=setInterval(function(){if(c++,c>50)clearInterval(u);else{let p=document.querySelectorAll('[title="Close"]')[0];p&&(clearInterval(u),p.addEventListener("click",function(){a({slot:s,callback:i})}))}},50);window.addEventListener("message",o)}else freestar.log(1,"Page Grabber: define slot error or document.body not available skipping page grabber!"),freestar.frequencyLibrary[e.name].cap&&freestar.frequencyLibrary[e.name].subtractIteration(),i(!0);performance.mark("pageGrabber-initialization-end")}else freestar.log(1,"Page Grabber: no placement aligned skipping page grabber!"),i(!0)}var R_=f(()=>{Ri();Ge();ji();z();ns();lt();nt();L();k()});function vc(){let i=document.createElement("script");i.src="https://btloader.com/tag?o=5714937848528896&upapi=true",document.head.insertBefore(i,document.head.firstElementChild),freestar.log("inserted blockthrough script")}var C_=f(()=>{});var O_,Tc,IS,x_,P_=f(()=>{z();Fe();me();O_="fs.session",Tc=class{constructor(){this.session=null,this.init()}init(){let e=V({key:O_});this.session=e?JSON.parse(e):{},this.session.id||(this.session.id=ue());let t=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].map(r=>({key:r,value:U(r)})).filter(r=>r.value!=="");if(t.length!==0){let r={};t.forEach(s=>{r[s.key]=s.value}),this.session.utm=r}ge({key:O_,type:G.object,value:this.session})}getSessionId(){return this.session.id}getUTMValue(e){return this.session.utm?this.session.utm[e]:null}},IS=new Tc,x_=()=>IS.getSessionId()});function Rc(){function i(){let t=new Date().getTime();return window.performance&&typeof window.performance.now=="function"&&(t+=performance.now()),"xxxxxxxxxx".replace(/[x]/g,function(){let r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),r.toString(16)})}function e(){let t=i();return ot({name:"fs.identifier.hash",value:t,expires:365*5,path:"/"}),t}if(freestar.fsdata&&freestar.fsdata.hashEnabled){let t=ht({name:"fs.identifier.hash"});return window.location.hash=t&&t.length?t:e(),window.location.hash}return""}function N_(){freestar.msg=freestar.msg||{},freestar.msg.loadTime=freestar.msg.loadTime||0,freestar.msg.hash=Rc(),freestar.msg.sessionId=x_()}var D_=f(()=>{Fe();P_()});function L_({requestedRevolvingRail:i}){return typeof i!="object"&&(i={placementName:i,slotId:i}),i}function k_({placements:i}){let e={};return i.forEach(t=>{let{container:r}=t.revolvingRailOptions;Object.prototype.hasOwnProperty.call(e,r)||(e[r]=[]),e[r].push(t)}),e}function M_({placements:i}){return i.find(e=>e.revolvingRailOptions.isOnCall&&e.revolvingRailOptions.isOnCall===!0)}function B_({element:i}){return[...i.querySelectorAll(".fs-rr-ad-x250, .fs-rr-ad-x600")].map(t=>({slotId:t.id,placementName:t.getAttribute("data-ad-unit")}))}function F_({event:i}){document.querySelector(`#${i.slot.getSlotElementId()}`).parentNode.parentNode.classList.add("fs-rr-rendered")}function U_({sizes:i}){return i[0][1]===250?"x250":!1}function G_({sizes:i}){return i[0][1]===600?"x600":!1}function V_({numAds:i}){D.instance.resolve(l.ANALYTICS).then(e=>{e.track(new Y({eventName:"revolvingRail",data:{numAds:i}}))})}var q_=f(()=>{L();k();Ot()});var SS,bS,Cc,z_,H_,$_=f(()=>{z();nt();lt();xr();Ge();q_();SS=(i=0)=>{Yn(` .fs-rr-ads-outer { position: relative; height: 200vh; margin-bottom: 50px; } .fs-rr-ads-inner { top: ${i}px; position: sticky; } .fs-rr-ad-x250 { text-align: center; height: 250px; } .fs-rr-ad-x250:first-child { margin-bottom: 100px; } .fs-rr-ad-x600 { text-align: center; height: 600px; } `)},bS=i=>{new IntersectionObserver(([t])=>{if(t.isIntersecting){let r=[...t.target.classList].indexOf("fs-rr-rendered")>-1,s=B_({element:t.target});if(r){let n=s.map(o=>o.slotId);at().forEach(o=>{n.indexOf(o.getSlotElementId())>-1&&googletag.pubads().refresh([o])})}else window.freestar.newAdSlots(s),V_({numAds:s.length}),s.forEach(({slotId:n})=>{window.freestar.gamImpressionCallbacks[n]=F_})}},{root:null,rootMargin:`0px 0px ${window.innerHeight/3}px 0px`,threshold:0}).observe(document.querySelector(i))},Cc=({adUnits:i})=>{let{container:e,padddingTop:t,paddingTop:r}=mt({placement:i[0],type:"revolvingRailOptions"});SS(r||t);let s=qr(e);s||console.error(`Revolving Rail initialization failed: No ${e} DOM element found in page.`);let n=window.innerHeight*2+window.innerHeight/2+(r||t),o=s.parentNode.offsetHeight,a=i.reduce((h,A)=>{if(A.sizes.length){let{sizes:S}=A,_=G_({sizes:S})||U_({sizes:S});if(!_)return h;h[_]||(h[_]=[]),h[_].push(A)}return h},{});if(Object.keys(a).length===0)return window.freestar.log({title:"RevolvingRail",style:"background: orange; color: #fff; border-radius: 3px; padding: 3px"},"No usable sizes from revolving rail placements"),!1;let d=b({classList:["fs-rr-ads"]}),c=n,u=0,p=0,m=Object.keys(a),g=m.length-1;for(;c<o;){let h=b({classList:["fs-rr-ads-outer"],id:`fs-rr-ads-outer-${p}`}),A=b({classList:["fs-rr-ads-inner"]});h.appendChild(A);let S=m[u],_=a[S];if(S==="x250"){let y=_[0].name,N=_[1].name;A.appendChild(b({classList:[`fs-rr-ad-${S}`],id:`${y}-a-${p}`,attributes:[{"data-ad-unit":y}]})),A.appendChild(b({classList:[`fs-rr-ad-${S}`],id:`${N}-b-${p}`,attributes:[{"data-ad-unit":N}]}))}else{let y=_[0].name;A.appendChild(b({classList:[`fs-rr-ad-${S}`],id:`${y}-${p}`,attributes:[{"data-ad-unit":y}]}))}c+=n,d.appendChild(h),p++,u=u===g?0:u+1}s.appendChild(d);for(let h=0;h<p;h++)bS(`#fs-rr-ads-outer-${h}`)},z_=()=>{if(he({name:"revolvingRail"}))return window.freestar.log(1,"Revolving Rail is disabled."),!1;performance.mark("revolvingRail-initialization-start");let i=window.freestar.fsdata.placements.filter(t=>We({placement:t,type:"revolvingRailOptions"})),e=k_({placements:i});for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let r=e[t],s=M_({placements:r}),n=qr(t);!s&&n?Me()&&!freestar.fsdata.psoDisableInteraction?Bi({name:"revolvingRail",callback:Cc.bind(null,{adUnits:r,container:n})}):Cc({adUnits:r,container:n}):window.freestar.log(1,`Revolving Rail initialization failed for the ${t} container. The Revolving Rail is onCall or No DOM element found on page.`)}performance.mark("revolvingRail-inititialization-end")},H_=(i=void 0)=>{if(!i){window.freestar.log(1,'newRevolvingRail - must have either a string with a placement name or an object like {placementName: "myPlacementName", slotId: "my-id-one"}');return}i=L_({requestedRevolvingRail:i}),window.freestar.log(1,"newRevolvingRail - requested revolving rail ",i);let e=window.freestar.fsdata.placements.find(r=>r.name===i.placementName),t=qr(i.slotId);t||(t=qr(e.revolvingRailOptions.container)),e&&t?Cc({adUnits:[e],container:t}):window.freestar.log(1,`newRevolvingRail - initialization failed for the ${i.placementName} requested placement. There is no record of this placement in fsdata or the slotId ${i.slotId} was not found on the DOM.`)}});var AS,wS,vS,Y_,j_=f(()=>{J();z();ie();lt();Le();k();L();AS=({placements:i})=>{i.forEach(e=>{let{name:t,contextId:r}=e;D.instance.resolve(l.ANALYTICS).then(s=>{s.track(new on({partnerName:"DIANOMI",placementName:t,contextId:r}))})}),performance.mark("dianomi-initialization-end")},wS=({placement:i})=>{let{name:e,contextId:t}=i,r=document.querySelector(`#${e}`);if(!r)return window.freestar.log(1,`Dianomi Target Node with ID "${e}" Does Not Exist`),!1;r.appendChild(b({classList:["dianomi_context"],attributes:[{"data-dianomi-context-id":t}]}))},vS=()=>{let i=window.freestar.fsdata.placements.filter(e=>e.partnerName==="DIANOMI");if(he({name:"dianomiContentRec"})||i.length<1)return!1;performance.mark("dianomi-initialization-start"),i.forEach(e=>{wS({placement:e})}),lp({id:ua})?performance.mark("dianomi-initialization-end"):se(zc,AS.bind(null,{placements:i}),ua)},Y_=vS});function W_(){window.addEventListener("focus",()=>{let i=[...freestar.focusQueue];freestar.focusQueue=[],i.forEach(e=>e.apply())})}function Q_(){K_||(K_=!0,document.addEventListener("visibilitychange",function(){return!document.hidden&&freestar.visibilityRefresh.timeLeft&&Date.now()-freestar.visibilityRefresh.timeLeft>freestar.visibilityRefresh.refreshTimeMinimum*1e3&&(freestar.visibilityRefresh.timeLeft=null,freestar.refreshActiveSlots()),freestar.visibilityRefresh.timeLeft=Date.now(),!0}))}var K_,J_=f(()=>{K_=!1});var X_,Z_=f(()=>{X_=document.createElement("style");X_.textContent='.fs-sticky-footer{bottom:0;display:block;display:-webkit-box;display:-ms-flexbox;display:flex;position:fixed;right:0;width:100vw;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:2147483647}.fs-sticky-slot-element>div>iframe{margin:0!important}.fs-sticky-slot-element>div{position:relative}.fs-sticky-parent{bottom:0;left:0;padding-top:0;position:fixed;right:0;text-align:center;z-index:2147483647}.fs-sticky-wrapper{margin:auto}.fs-dynamic{clear:both;text-align:center}.fs-iai{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;clear:both}.fs-iai-sticky{-webkit-box-align:top;-ms-flex-align:top;align-items:top}.fs-iai-sticky>div{position:sticky;-ms-flex-item-align:start;align-self:flex-start}.fs-close-button{all:unset;-moz-appearance:none!important;-webkit-appearance:none!important;appearance:none!important;background-color:#fff!important;background-image:url(https://a.pub.network/core/imgs/freestar_close_button.svg)!important;background-position:50%!important;background-repeat:no-repeat!important;border:none!important;border-radius:50%!important;-webkit-box-shadow:0 0 0 1px #888,0 0 0 1px #f7f7f7bf!important;box-shadow:0 0 0 1px #888,0 0 0 1px #f7f7f7bf!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important;cursor:pointer!important;display:block!important;height:20px!important;outline:none!important;padding:0!important;position:absolute!important;right:25px!important;top:25px!important;-webkit-transition:all .3s ease-in-out!important;transition:all .3s ease-in-out!important;width:20px!important}.fs-close-button:focus,.fs-close-button:hover{background-color:#000!important}.fs-sticky-popup-container{-webkit-filter:drop-shadow(2px 2px 2px grey);filter:drop-shadow(2px 2px 2px grey);font-family:arial;font-size:.8em;height:auto;padding:7px;text-align:center;white-space:nowrap;width:auto;z-index:2147483647!important}.fs-sticky-popup-container a:nth-child(2){border-top:1px solid #999}.fs-sticky-popup-container .fs-report-ad-button{color:#999}.fs-close-button:hover{-webkit-box-shadow:0 0 0 1px #888,0 0 0 8px #f7f7f7bf;box-shadow:0 0 0 1px #888,0 0 0 8px #f7f7f7bf}.fs-close-button-pushdown{right:12px!important;top:12px!important}@media screen and (min-width:820px){.fs-close-button-sticky{right:10px!important;top:9.3%!important}}@media screen and (max-width:820px){.fs-close-button-sticky{right:10px!important;top:3px!important}.fs-close-button-pushdown{right:0!important;top:0!important}}.fs-branding-spacer{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.fs-report-ad-button{background:none;color:#000;font-size:12px;-webkit-text-decoration:none;text-decoration:none}.fs-report-ad-button,.fs-report-ad-button-icon{border:none;cursor:pointer;display:block;padding:0}.fs-report-ad-button-icon{background-color:initial;background-image:url(https://a.pub.network/core/imgs/freestar_report_ad_icon.png);background-size:18px;content:"";moz-appearance:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-position:50%;background-repeat:no-repeat;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;height:16px;outline:none;width:16px}.fs-pushdown{width:100%}.fs-pushdown,.fs-pushdown-sticky{background-color:#f7f7f7e6;display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;top:0;z-index:2147483647;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.fs-pushdown-sticky{left:0!important;position:sticky!important}.__fs-ancillary{--childHeight:16px;display:-webkit-box;display:-ms-flexbox;width:var(--childWidth,100%);-webkit-box-align:center;-ms-flex-align:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin:0 auto;position:relative;-webkit-box-ordinal-group:1000;-ms-flex-order:999;align-items:center;display:flex;height:16px;height:var(--childHeight,16px);order:999;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.__fs-ancillary>div>.__fs-branding{-webkit-box-flex:20;-ms-flex-positive:20;flex-grow:20}.fs-sticky-wrapper .__fs-ancillary{display:none!important}.__fs-branding{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.__fs-branding>a{display:block;height:var(--childHeight);max-width:var(--childWidth);width:100%}.__fs-branding>a>img{-webkit-box-shadow:none;box-shadow:none;display:block;height:calc(var(--childHeight) - 2px)!important;margin:0 auto 0 0!important;width:auto!important}.fs-sticky-wrapper .__fs-branding{border:none;border-radius:50%;height:30px;position:absolute;right:6px;top:0;top:50%;width:30px}.fs-mobile-tall{top:30%!important}.fs-sticky-wrapper .__fs-branding>a{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;width:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.fs-sticky-wrapper .__fs-branding>a>img{height:100%!important;opacity:1;width:100%!important}@media screen and (max-width:820px){.fs-sticky-wrapper .__fs-branding>a>img{height:70%!important;opacity:1;width:70%!important}}.fs-sticky-wrapper .__fs-branding{background-color:#f7f7f7bf;background-size:58%}.fs-sticky-wrapper .__fs-branding>a>img{height:90%;width:90%}.fs-sticky-wrapper{background-color:#f6f3f3;display:inline-block;padding-right:38px;visibility:inherit;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:inherit}.center-ad{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}._wrapper .orp-player-wrapper{height:100%!important;width:100%!important}';document.head.appendChild(X_)});var eE,tE=f(()=>{eE=document.createElement("style");eE.textContent=".fs-flying-carpet{background:-webkit-gradient(linear,left top,left bottom,color-stop(10%,#00c389),to(#000));background:linear-gradient(180deg,#00c389 10%,#000);-webkit-box-shadow:0 4px 8px #0000001a;box-shadow:0 4px 8px #0000001a;height:175vh;margin:0 -1.1rem .5rem;position:relative}.fs-flying-carpet-ad-container{margin:0 auto;position:sticky;top:0;-ms-flex-item-align:center;align-self:center;bottom:10vh;padding-bottom:10vh;padding-top:10vh}.fs-flying-carpet-ad-container,.fs-powered-by{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.fs-powered-by{background-color:#000;bottom:0;color:#00c389;font-size:18px;height:6vh;padding:10px 0;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.fs-flying-carpet-header,.fs-powered-by{-webkit-box-shadow:0 -2px 4px #0000001a;box-shadow:0 -2px 4px #0000001a;position:absolute;text-align:center;width:100%}.fs-flying-carpet-header{background-color:#34495e;color:#fff;font-family:Arial,Helvetica,sans-serif!important;font-size:11px;padding:5px 0;top:0}.fs-flying-carpet-v2{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.fs-flying-carpet-v2,.fs-flying-carpet-v2-ad-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.fs-flying-carpet-v2-ad-container{-webkit-box-pack:center;-ms-flex-pack:center;background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;height:65vh;justify-content:center;margin-left:auto;margin-right:auto;overflow-x:hidden;overflow-y:scroll;width:300px}.fs-flying-carpet-v2-text-border{background-color:#333;color:#fff;font-family:Arial,sans-serif;font-size:.8em;letter-spacing:1px;padding:5px 0;text-align:center;text-transform:uppercase;width:100%}.fs-flying-carpet-v3{display:-webkit-box;display:-ms-flexbox;display:flex;margin:0 auto;position:relative;width:300px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:5px 0}.fs-flying-carpet-v3-text-border{background-color:#333;color:#fff;font-family:Arial,sans-serif;font-size:.8em;left:50%;letter-spacing:1px;margin-left:-50vw;padding:5px 0;position:relative;text-align:center;text-transform:uppercase;width:100vw;z-index:9999}.fs-flying-carpet-v3-container{position:sticky;top:0;-webkit-transition:opacity .3s ease;transition:opacity .3s ease;z-index:0}.fs-flying-carpet-v3-content{height:350px;position:relative;width:300px}.fs-flying-carpet-v3-slot-wrapper{clip-path:inset(0);-webkit-clip-path:inset(0);height:350px;overflow:hidden;position:absolute;width:300px}.fs-flying-carpet-v3-slot{-webkit-backface-visibility:hidden;backface-visibility:hidden;left:50%;-o-object-fit:contain;object-fit:contain;-o-object-position:top;object-position:top;position:fixed;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:300px;z-index:-9999}";document.head.appendChild(eE)});var oa,iE=f(()=>{oa=class{constructor(){this.modifications={emxdigital:{modification:"emx_digital"},synacor:{modification:"synacormedia"}}}slugModification(e=""){return this.modifications[e]?this.modifications[e].modification:e}reassignNetworkSlug(e=[]){return e.map(t=>(t.slug=this.slugModification(t.slug),t))}init(){window.freestar.fsdata.networks=this.reassignNetworkSlug(window.freestar.fsdata.networks),window.freestar.fsdata.placements=window.freestar.fsdata.placements.map(e=>(e.networks=this.reassignNetworkSlug(e.networks),e))}}});function rE(){return Oc==null&&(Oc=new xc),Oc}var xc,Oc,sE=f(()=>{L();k();Ot();xc=class{initiateWatcher(e){e.que.push(()=>{e.onEvent("adRenderFailed",this.handleAdRenderFailed.bind(this))})}handleAdRenderFailed({message:e,adId:t,reason:r,bid:s}){freestar.log({title:"Pubfig",styles:"background: red; color: white; border-radius: 3px; padding: 3px"},`Prebid adRenderFailed. Reason: ${r} - ${e} - ${s.adUnitCode}`),D.instance.resolve(l.ANALYTICS).then(n=>{n.track(new Y({eventName:"AD_RENDER_FAILED",eventType:e,data:{adId:t,reason:r,bid:s}}))})}},Oc=null});var nE,oE=f(()=>{Qo();nE=({win:i=window,level:e=ut.page}={})=>{var r;let t=(r=i==null?void 0:i.freestar)==null?void 0:r.frequencyLibraryV2;t&&Object.values(t).forEach(s=>{s&&typeof s.resetIteration=="function"&&s.resetIteration({level:e})})}});var aE,dE=f(()=>{Ii();me();aE=i=>{let e;e=window.googletag||{},e.cmd=e.cmd||[],window.googletag=e,e.cmd.push(()=>{let t=V({key:Hs});t&&e.pubads().setTargeting("tg",t),e.pubads().setTargeting("fs_session_id",freestar.msg.sessionId),e.pubads().setTargeting("fs_pageview_id",i),e.pubads().setTargeting("fs_version",freestar.version)})}});function lE({isActive:i=!1}){window.freestar.debug=i||TS()?99:!1}var TS,cE=f(()=>{TS=()=>window.location.search.includes("fslog")});var fE,uE=f(()=>{fE=(i,e,t=document)=>{t.readyState==="loading"?t.addEventListener("DOMContentLoaded",()=>{t.body.appendChild(i),e==null||e()}):(t.body.appendChild(i),e==null||e())}});var pE,mE=f(()=>{pE=document.createElement("style");pE.textContent=".fs-test-mode-label{background-color:#000000a6;border-radius:5px 0 0 5px;bottom:40%;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;font-family:monospace;position:fixed;right:0;-webkit-transform:translateX(calc(100% - 25px));transform:translateX(calc(100% - 25px));-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:background-color .3s ease-in,-webkit-transform .3s ease-in;transition:background-color .3s ease-in,-webkit-transform .3s ease-in;transition:transform .3s ease-in,background-color .3s ease-in;transition:transform .3s ease-in,background-color .3s ease-in,-webkit-transform .3s ease-in;z-index:2147483647}.fs-test-mode-label>span:first-of-type{border-right:1px solid #03c38b;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px;-webkit-writing-mode:tb-rl;-ms-writing-mode:tb-rl;writing-mode:tb-rl}.fs-test-mode-label>span:first-of-type>img{margin-top:5px;width:17px}.fs-test-mode-label>div>button{background-color:#03c38b;border:none;border-radius:5px;color:#fff;cursor:pointer;font-family:monospace;padding:5px 10px}.fs-test-mode-label>div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:10px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 5px}.fs-test-mode-label>input[type=checkbox]{height:0;visibility:hidden;width:0}.fs-test-mode-label:has(input[type=checkbox]:checked){background-color:#000c;-webkit-transform:translateX(0);transform:translateX(0)}@media only screen and (max-width:450px){.fs-test-mode-label{-webkit-transform:translateX(calc(100% - 30px));transform:translateX(calc(100% - 30px))}.fs-test-mode-label>span:first-of-type{font-size:18px;padding:7px 5px}.fs-test-mode-label>span:first-of-type>img{width:20px}}";document.head.appendChild(pE)});var hE,gE=f(()=>{me();Nr();ie();Ke();uE();mE();J();Ba();hE=()=>{let i=V({key:Vi}),e=U(qt.fsaltconfig);if(!i&&!e)return;let t=i;e&&i!==e&&(ge({key:Vi,value:e}),t=e);let r=b({type:"input",attributes:[{type:"checkbox"}]}),s=b({type:"img"});s.src=`${Tt}/imgs/fslogo-green.svg`;let n=b({type:"span"});n.textContent="Test Session",n.appendChild(s);let o=b({type:"span"});o.textContent=`Config v.${t}`;let a=b({type:"span"});a.textContent=`Pubfig v.${freestar.version}`;let d=b({type:"button"});d.textContent="End session",d.onclick=()=>{Fi({key:Vi}),Zc(qt.fsaltconfig)};let c=b({children:[o,a,d]}),u=b({type:"label",id:Df,classList:[Lf],children:[r,n,c]});fE(u)}});function RS(){let i={gpp:typeof window.__gpp=="function",tcf:typeof window.__tcfapi=="function",usp:typeof window.__uspapi=="function"};return Object.fromEntries(Object.entries(i).filter(([e,t])=>t))}function _E(){var o,a,d,c;window.freestar=window.freestar||{};let i=["CA","CO","CT","VA","UT"],e=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK"],t=(a=(o=window==null?void 0:window.freestar)==null?void 0:o.locData)==null?void 0:a.iso,r=(c=(d=window==null?void 0:window.freestar)==null?void 0:d.locData)==null?void 0:c.state,s=t==="US"&&i.includes(r),n=e.includes(t);return new Promise(u=>{if(!s&&!n)return u();function p(){let h=RS(),A=s&&(h.gpp||h.usp),S=n&&h.tcf;return A||S?(window.freestar.consentLibrary=h,!0):!1}if(p())return u();let m=0,g=setInterval(()=>{if(p())return clearInterval(g),u();m++,m>=100&&(clearInterval(g),console.warn("consent libraries not detected within timeout."),u())},50)})}var EE=f(()=>{});var NS=pi(Pc=>{u_();g_();Le();E_();ji();Ka();Wn();J();Xa();z();ie();ul();Ri();St();nn();ke();Fe();bi();Ge();v_();R_();Ja();C_();nt();Ac();D_();ns();$_();j_();xr();J_();Te();Za();Z_();tE();ir();iE();Ve();Zl();Gl();sE();hd();Mr();re();wd();oE();Qo();sc();dE();lt();Fs();Ua();Vl();cE();L();xe();k();yi();vi();gE();EE();var yE=({callback:i})=>{if(freestar.fsdata.footerBiddingEnabled&&!he({name:"footerBidding"})){let{psoDisableInteraction:e=!1}=freestar.fsdata;(!Me()||Me()&&e)&&(document.readyState==="complete"?fs(i):window.addEventListener("load",()=>fs(i))),Me()&&!e&&Bi({name:"engine",callback:()=>fs(i)})}else fs(i)},CS=function(i){window.googlefc=window.googlefc||{},window.googlefc.callbackQueue=window.googlefc.callbackQueue||[],window.googlefc.callbackQueue.push({CONSENT_DATA_READY:i})},OS=()=>O(Pc,null,function*(){yield Ue().fetch({fetchFn:qi,requestId:"getIdealData",onError:()=>{Et({siteId:freestar.fsdata.siteId})||Ue().fetch({requestId:"getFloorsData",fetchFn:()=>{var i,e;return mr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:(e=(i=window.freestar)==null?void 0:i.fsdata)==null?void 0:e.isTriple13Enabled})}})},onSuccess:({data:i})=>{Et({siteId:freestar.fsdata.siteId})||i&&i.floors||Ue().fetch({requestId:"getFloorsData",fetchFn:()=>{var e,t;return mr({deviceVendor:window.freestar.deviceInfo.device.vendor,deviceType:window.freestar.deviceInfo.device.type,refreshNumber:0,isFloorsActive:(t=(e=window.freestar)==null?void 0:e.fsdata)==null?void 0:t.isTriple13Enabled})}})}})});function xS(Ce){return O(this,arguments,function*({freestar:i,stickyFooter:e={},sideWall:t={},stickyRail:r={},initDynamicAds:s,newDynamicContent:n,DynamicAds:o,dispensaryData:a,pushdown:d={},video:c={},analytics:u,performanceLogger:p,identityManager:m,slidingUnit:g={},stickyAd:h={},interstitial:A,superflex:S,carousel:_={},joke:y={},confiant:N,adRefresher:x,logger:q,memoryMonitor:M,bidsManager:Ae,page:le}){var Nc,Dc,Lc;if(i.url=window.location.href,le.pageViewCount++,hE(),lE({}),ru(),N_(),aE(le.pageId),jo().initiateWatcher(fsprebid),rE().initiateWatcher(fsprebid),p.setAnalytics(u),(Nc=i.analyticsQueue)!=null&&Nc.length&&i.analyticsQueue.forEach(P=>u.track(P)),delete i.analyticsQueue,p.pushAllPendingMarksToMsgQue(),p.logMark({markerName:oe.pubfigEngineLoad,compareTo:[oe.pubfigEngineLoadInit]}),i.queue=i.queue||[],i.config=i.config||{},i.identity=m,i.isHttps=window.location.protocol==="https:"?1:0,i.dynamicIdNum=i.dynamicIdNum||1,i.rebidSlots=[],i.tools={},i.requests={},i.requests.que=[],i.requests.process=[],i.requests.timestamp=void 0,i.bidRequestNum=0,i.sideWallUnitControl=[],i.dfpSlotInfo={},i.func={},i.pushdownControl={},i.visibilityRefresh={},i.newAdSlotIds=[],i.server={},i.bidsWon={},i.networkFloor={},i.blockedRanges={},i.requestReference={},i.dynamicSlots=[],i.dynamicSlotLibrary={},i.googletagCorrelatorUpdate=!0,i.gamMap={},i.reportLibrary={},i.fsDfpId=Ku(),i.fsDevDfpId=Wu(),i.gamImpressionCallbacks=[],i.googleInterstitialPlacement,i.allowBidResponseCollection=!1,i.allowBidRequestedCollection=!1,i.viewableImpression={},i.newAdSlotsAllowed=!0,i.frequencyLibrary={},i.frequencyLibraryV2={},i.newAdSlotsQueue=[],i.focusQueue=[],i.initRequested=!1,i.adjustments={isLogged:U("adjustment-log"),bids:[]},i.logPerformanceMarks=i.performanceLogger.logPerformanceMarkers,i.newAdSlotsCalled=[],i.enabledSlotsCalled=[],i.standAlonePlayer={callback:void 0,slotId:void 0},i.currentStickyFooter=void 0,window.load_script=se,i.setVideoAdhesionEnabled=te(e.setVideoAdhesionEnabled,{name:"setVideoAdhesionEnabled",warn:!0}),i.slotTargeting=Ti,i.newDynamicContent=te(n,{name:"newDynamicContent",warn:!0}),i.newAdSlots=Jt,i.createAdSlot=gd,i.newStickyFooter=te(e.newStickyFooter,{name:"newStickyFooter",warn:!0}),i.deleteAdSlots=Vr,i.format_pbjs=ze,i.func.browserInfo=$n,i.newPushdown=te(d.add,{name:"newPushdown",warn:!0}),i.deletePushdown=te(d.delete,{name:"deletePushdown",warn:!0}),i.newSidewall=te(t.add,{name:"newSidewall",warn:!0}),i.deleteSidewall=te(t.delete,{name:"deleteSidewall",warn:!0}),i.newVideo=te(c.add,{name:"newVideo",warn:!0}),i.deleteVideo=P=>te(c.remove,{name:"deleteVideo",warn:!0})({name:P}),i.logRandomJoke=te(y.logRandomJoke,{name:"logRandomJoke",warn:!0}),i.newStandAlonePlayer=y_,i.newRevolvingRail=H_,i.newStickyRail=te(r.create,{name:"newStickyRail",warn:!0}),i.deleteStickyRail=te(r.destroy,{name:"deleteStickyRail",warn:!0}),i.deleteStandAlonePlayer=S_,i.reportingAdInfo=()=>{console.warn("freestar.reportingAdInfo() has been deprecated")},i.getActiveModulesFromConfig=yf(i.fsdata.placements,i.fsdata.videoAds),(Dc=i==null?void 0:i.config)!=null&&Dc.setNonPersonalizedAds&&i.queue.push(()=>{googletag.pubads().setRequestNonPersonalizedAds(1)}),(Lc=i==null?void 0:i.config)!=null&&Lc.ppid&&(typeof i.config.ppid=="string"?i.queue.push(()=>{googletag.pubads().setPublisherProvidedId(i.config.ppid)}):console.warn("freestar.config.ppid is not a string and will not be set")),j().allowConfiant()&&(yield N.init()),i.deleteStickyFooter=()=>{console.warn("The deleteStickyFooter method is not available!")},i.modulesLoaded.engine=!0,i.disableAutoTrackPageviews||function(P){var F=P.pushState,ae=P.replaceState;P.pushState=function(Ie){let K=new CustomEvent("pushState");return K.state=Ie,window.dispatchEvent(K),F.apply(P,arguments)},P.replaceState=function(Ie){let K=new CustomEvent("replaceState");return K.state=Ie,window.dispatchEvent(K),ae.apply(P,arguments)}}(window.history),i.trackPageview=({path:P=window.location.href}={})=>{P!==i.url&&(i.log(1,"TrackPageview invoked."),nE({level:ut.page}),i.url=P,i.hitTime=Date.now(),Rc(document.cookie),le.refreshId(),le.pageViewCount++,$n(),n==null||n(),x.resetCapCounter())},i.Browsi={pushAd:(P,F,ae)=>{i.newAdSlots({placementName:F,slotId:P,targeting:{browsiId:ae}})}},i.func.domloaded=!1,i.visibilityRefresh.runRefresh=!0,i.visibilityRefresh.enacted=!1,i.visibilityRefresh.timeLeft=null,i.visibilityRefresh.refreshTimeMinimum=30,i.videoAdsRan=!1,(i.fsdata.adRefreshRate==0||(i.fsdata.visibilityRefreshDisabled&&!!i.fsdata.visibilityRefreshDisabled)===!0)&&(i.visibilityRefresh.runRefresh=!1),i.fsdata.visibilityRefreshTime&&Number(i.fsdata.visibilityRefreshTime)>1&&(i.visibilityRefresh.refreshTimeMinimum=i.fsdata.visibilityRefreshTime),!j().getBypassFirstAuction()&&i.fsdata.networks.some(P=>P.slug==="consumable")&&se("https://sync.serverbid.com/ss/2000462.js"),W_(),ap(window.freestar.fsdata.customCss),Ne({name:"pubfigLoaded",detail:!0}),(U("blockthrough")||i.fsdata.blockthroughEnabled&&i.fsdata.blockthroughVersion===2)&&j().allowBlockthrough()&&vc(),et.setNetworks(),et.getBidderSettings(),et.setBidderSettings(),_u(),window.freestar.fsdata.identityProviders&&window.freestar.fsdata.identityProviders.findIndex(P=>P.slug==="merkleId")!==-1){let P=document.createElement("script");P.src="//js-sec.indexww.com/ht/p/184310-82987131453484.js",document.head.insertBefore(P,document.head.firstElementChild),i.log("inserted IX Identity Library script")}let Ye=IE();Vc.indexOf(i.fsdata.siteId)===-1&&(i.allowBidResponseCollection=Ye,(Math.floor(Math.random()*99)===50||window.location.search.indexOf("fssniffer")>-1)&&i.queue.push(function(){pp()})),i.allowBidRequestedCollection=Ye,uu(),i.debug>=99&&(console.clear=function(){}),i.log(1,"Freestar Version: "+i.version),Me()&&(i.log(1,"Page Speed Optimized in effect, filtering out the following products:",la.join(",")),la.forEach(P=>{i.config.products[P]||(i.config.products[P]={}),i.config.products[P]=Object.assign(i.config.products[P],{disabled:!0})}),googletag.cmd.push(function(){googletag.pubads().setTargeting("fs_optimization","true")})),window.setTimeout(window.freestar.func.browserInfo,3e4);let je=i.fsdata.retries,Mt=ht({name:"fs.direct.traffic"});i.fsdirect=Mt,new oa().init(),te(_.manipulatePlacements)(),Zi();let Bt=()=>{googletag.cmd.unshift(function(){i.log(1," googletag.cmd.unshift - init"),bt().getInitialFloorsData().then(pt)})},pt=()=>{p.logMark({markerName:oe.pubfigEngineSetupStart,compareTo:[oe.pubfigEngineLoad]}),googletag.pubads().disableInitialLoad(),Ip();let P=U("dfpkey"),F=U("block");P&&Xe({key:"test",value:P}),F&&F==="fsdirect"&&(ot({name:"fs.direct.traffic",value:!0}),i.fsdirect=!0,Xe({key:"block",value:"fsdirect"})),document.referrer.search(/facebook/i)>0?Xe({key:"referrer",value:"facebook"}):(document.referrer.search(/twiter/i)>0||document.referrer.search(/t.co/i)>0)&&Xe({key:"referrer",value:"twitter"});function ae(){let fe=i.deviceInfo.browser.name,Se=i.deviceInfo.os.name;return Se==="Mac OS"&&fe==="Safari"?"Safari":Se==="iOS"?"iOS":fe}switch(navigator.userAgent){case navigator.userAgent.search(/facebook/i)>0:case navigator.userAgent.search(/facebot/i)>0:case navigator.userAgent.search(/FB_IAB/i)>0:case navigator.userAgent.search(/FBAN/i)>0:case navigator.userAgent.search(/FBAV/i):Xe({key:"user-agent",value:"facebook"});break;case navigator.userAgent.search(/Twitter/i)>0:Xe({key:"user-agent",value:"twitter"});break;default:Xe({key:"user-agent",value:ae()})}["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(function(fe){let Se=U(fe);Se&&Xe({key:fe,value:Se})});let K=!1;function Z(){K||(K=!0,wt())}m.init(),Z(),i.fsdata.disableSingleRequest||googletag.pubads().enableSingleRequest();let Oe=null;googletag.pubads().addEventListener("impressionViewable",function(fe){var vr;let Se=fe.slot.getSlotElementId();i.log(1,`GAM impressionViewable ${Se}`),Se&&i.gamImpressionCallbacks[Se]&&i.gamImpressionCallbacks[Se]({event:fe}),(vr=A==null?void 0:A.postRender)==null||vr.call(A,{event:fe,elementId:Se})}),googletag.pubads().addEventListener(Rt,function(fe){i.log(1,`GAM ${Rt} ${fe.slot.getSlotElementId()}`),Oe===null&&(Oe=fe.slot.getSlotElementId(),p.logMark({markerName:oe.pubfigSlotRequested})),i.currentStickyFooter&&typeof i.currentStickyFooter.isSticky=="function"&&i.currentStickyFooter.isSticky(fe)&&p.logMark({markerName:oe.pubfigStickyFooterSlotRequested})}),w_({firstAdRequestedElement:Oe}),i.fsdata.collapseEmptyDivs&&(i.log("GAM Option set to collapseEmptyDivs(true)"),googletag.pubads().collapseEmptyDivs(!0)),googletag.pubads().addEventListener(we,function(fe){Mh(fe);let Se=fe.slot.getSlotElementId();i.log(1,`GAM ${we} ${Se}`),fe.slot.getSlotElementId()===Oe&&p.logMark({markerName:oe.pubfigSlotRenderEnded,compareTo:[oe.pubfigSlotRequested]}),i.reportLibrary[Se]=fe,bd(fe,!1)}),googletag.pubads().addEventListener("slotOnload",fp);let fi=Yi({freestar:i}),ui=[fi.format,fi.size,fi.pb,fi.adid,fi.bidder];googletag.pubads().addEventListener(we,fe=>{let{slot:Se}=fe;ui.forEach(vr=>{Se.getTargeting(vr).length!==0&&Se.clearTargeting(vr)})}),i.fsdata.customDirectAdRefresh&&setInterval(sn,5e3),googletag.enableServices(),p.logMark({markerName:oe.pubfigEngineSetupEnd,compareTo:[oe.pubfigEngineSetupStart]}),a.cdep&&Xe({key:"cdep",value:a.cdep})};if(tr())throw new Error("Ad serving is blocked in "+i.locData.iso);if(performance.mark("pubfig-init"),googletag.cmd.unshift?Bt():(i.log({title:"WARNING!",styles:"background: red; color: white; border-radius: 3px; padding: 3px"}," googletag.cmd.unshift not found skipping"),bt().getInitialFloorsData().then(_E).then(pt).catch(pt)),document.readyState==="complete")te(c.init)({isAfterLoadingPage:!0}),v();else{let P=setInterval(function(){document.readyState==="complete"&&(clearInterval(P),te(c.init)({isAfterLoadingPage:!0}),v())},100)}window.addEventListener("load",function(P){te(c.init)({isAfterLoadingPage:!0}),v(P)}),i.reloadAllAdSlots=()=>x.refreshAll(),i.refreshAllSlots=()=>x.refreshAll(),i.refreshActiveSlots=()=>x.refreshAllVisible(),i.refresh=P=>{let F=typeof P=="string"?[P]:P;x.refresh({elementIds:F})},i.disableRefresh=()=>x.disable(),i.disableRefreshOn=(P={})=>x.disableForItem(P),i.enableRefresh=()=>x.enable(),i.enableRefreshOn=(P={})=>x.enableForItem(P),i.freestarReloadAdSlot=P=>(q.warning(["freestar.freestarReloadAdSlot() is deprecated. Use freestar.refresh() instead."]),x.refresh({elementIds:typeof P=="string"?[P]:P})),i.freestarReloadAllAdSlots=({slotIds:P}={slotIds:null})=>(q.warning(["freestar.freestarReloadAllAdSlots() has been deprecated and will be"," removed in the future use freestar.refreshAllSlots()"]),P?x.refresh({elementIds:P}):x.refreshAll()),i.DynamicAds=o;function wt(){fsprebid.que.push(function(){i.log(1,"fspbjs.que.push - init"),Object.keys(i.fsdata.aliases).forEach(function(F){fsprebid.aliasBidder(i.fsdata.aliases[F],F)}),et.setEventListeners(),et.settingConfig(fsprebid,j(),m),et.setSChain(),et.enableTIDs(),m.realtimeProviders.waitForUserSync||et.enableRTDProviders(m),fsprebid.refreshUserIds().then(()=>{m.realtimeProviders.waitForUserSync&&et.enableRTDProviders(m)});let P=Hr().filter(F=>Qn(F)).map(F=>ze(F));Kt({adUnits:P}),i.coppa=new Kn(window.freestar,window.googletag,window.fsprebid),vt()})}function vt(){if(i.log(1," initAdserver"),!fsprebid.initAdserverSet){if(!googletag.pubadsReady&&fsprebid.retries<=je){setTimeout(vt,50),fsprebid.retries++;return}fsprebid.initAdserverSet=!0,R()}}function Pi({placement:P}){for(let F in Fr){let ae;if(F==="dynamicAds"?ae=cn(P):ae=P[Fr[F].optionsPath||`${F}Options`],ae&&ae.active||ae&&F==="pushdown"&&ae.isPushdownUnit||ae&&F==="sideWall"&&ae.type>0)return!1}return!!document.getElementById(P.name)}function Ni(){let P={elementIds:[],bidObjects:[],slots:[]},F=(K,Z)=>{Z&&(P.elementIds.push(Z.placement.name),P.bidObjects.push(Z.bidObject),P.slots.push(Z.slot))};C(),te(d.init)(F),te(t.init)(F),te(_.init)(F),z_(),S==null||S.init(),te(r.init)(),Y_(),te(g.init)(),te(h.init)(),i.fsdata.singleLineEnabled&&(i.log({title:"SLO"},"Single line of code enabled"),i.fsdata.placements.forEach(K=>{Pi({placement:K})&&i.config.enabled_slots.push({placementName:K.name,slotId:K.name})})),te(s)(),i.newIai=K=>{i.fsdata.placements.forEach(Z=>{if(K&&Z.name!==K)return;let Oe=Gn({placement:Z});Oe!=null&&Oe.active&&(md().registerConfig({placement:Z,intelligentAdInsertConfig:Oe}),md().initConfig(Z))})},i.newIai(),te(c.init)();let ae=setTimeout(()=>{te(c.init)({failSafeStart:!0}),window.clearTimeout(ae)},2e4);!i.visibilityRefresh.enacted&&i.visibilityRefresh.runRefresh===!0&&(i.visibilityRefresh.enacted=!0,Q_()),Me()?(i.log({title:"PSO"},"Loading Page Speed Optimized Sticky Footer"),i.newStickyFooter()):te(e.init)(),i.loaded=!0;let Ie=Cr({queue:[]},i);i.queue={push:function(K){googletag.cmd.push(K)}};for(let K=0;K<Ie.queue.length;K++)i.queue.push(Ie.queue[K]);Ie={},T(),(!i.initCallback||i.initCallback&&typeof i.initCallback=="function"&&i.initCallback.toString().indexOf("enabled_slots")===-1)&&i.config&&i.config.enabled_slots&&i.config.enabled_slots.length&&(performance.mark("check-ad-enabled-slots-start"),i.config.enabled_slots.forEach(function(K){typeof K!="object"&&(K={placementName:K,slotId:K});let Z=Q({name:ne({slotId:K.placementName})}),Oe=document.getElementById(K.slotId),{targeting:fi={}}=K;if(Oe&&Z&&Z.validAdSizes)if(Oe.setAttribute("name",Z.name),Z.lazyAd&&Z.selectedSize&&Z.selectedSize.lazyLoadViewportHeight>0)dn({element:Oe,placement:Z});else{let ui=hp({placement:Z,slotId:K.slotId,targeting:fi});ui&&(P.elementIds.push(K.slotId),ui.bidObject&&P.bidObjects.push(ui.bidObject),ui.slot&&P.slots.push(ui.slot))}}),performance.mark("check-ad-enabled-slots-end"),i.config.enabled_slots=[]),P.elementIds.length&&Ae.enqueueBids({bidObjects:P.bidObjects})}function R(){i.log(1," fsInitAdserver"),T_(function(P,F){i.log(1,`Page Grabber: ${F?"completed page grabber session":"either the grabber placement is failing or there is no grabber placement"}`),i.newAdSlotsAllowed=!0,i.newAdSlotsQueue.forEach(ae=>ae.process()),Ni()}),A==null||A.init()}function T(){return i.callbackIntervalCount++,fsprebid.initAdserverSet&&i.initCallback!==void 0&&i.initCallbackCalled===void 0&&typeof i.initCallback=="function"?(i.initCallbackCalled=!0,clearInterval(i.callbackInterval),i.initCallback(),function(F,ae){F.push=function(Ie){Array.prototype.push.call(F,Ie),ae(F)}}(i.config.enabled_slots,function(F){Jt([F[F.length-1]])}),!0):(i.callbackIntervalCount>50&&clearInterval(i.callbackInterval),!1)}function v(){if(i.func.domloaded)return;let P=document.getElementsByTagName("body")[0];$n(),i.disableAutoTrackPageviews||(window.addEventListener("pushState",F=>setTimeout(()=>Sd(F),1)),window.addEventListener("replaceState",F=>Sd(F)),window.addEventListener("popstate",()=>i.trackPageview())),i.fsdata.addIsFreestar&&!P.classList.contains("is-freestar")&&op("is-freestar"),i.func.domloaded=!0,i.callbackIntervalCount=0,i.callbackInterval=window.setInterval(T,200),Og(),M!=null&&M.enabled&&(M.start(),i.getMemoryReport=()=>M.getReport())}function C(){if((i.fsdata.quantcast===void 0||i.fsdata.quantcast!==!1)&&(window._qevents=window._qevents||[],Array.isArray(window._qevents)&&window._qevents.push({qacct:"p-UeXruRVtZz7w6"}),se("https://secure.quantserve.com/quant.js")),i.fsdata.scripts2&&Array.isArray(i.fsdata.scripts2)){let P=i.fsdata.scripts2;for(let F=0;F<P.length;F++)if(P[F].active===!0){let ae=Math.floor(Math.random()*100)+1,Ie=P[F].versions,K=0;i.log(2,`Rolled ${ae} for script ${P[F].name}`);for(let Z=0;Z<Ie.length;Z++)if(Ie[Z].active===!0&&(K+=Ie[Z].trafficPercentage,ae<=K)){i.log(2,`Selecting version ${Ie[Z].name} for script ${P[F].name}. ${Ie[Z].trafficPercentage}% chance.`);try{se(Ie[Z].href)}catch(Oe){console.error(Oe)}break}}}else if(i.fsdata.scripts&&Array.isArray(i.fsdata.scripts))for(let P=0;P<i.fsdata.scripts.length;P++)try{se(i.fsdata.scripts[P])}catch(F){console.error(F)}}function IE(){return Math.random()<Qc/100}})}I.function(xS,{token:"startEngine",dependencies:["freestar","DispensaryData",{token:"StickyFooter",optional:!0},{token:"Joke",optional:!0},{token:"SideWall",optional:!0},{token:"initDynamicAds",optional:!0},{token:"newDynamicContent",optional:!0},{token:"DynamicAds",optional:!0},{token:"SlidingUnit",optional:!0},{token:"StickyAd",optional:!0},{token:"StickyRail",optional:!0},{token:"Interstitial",optional:!0},{token:"Pushdown",optional:!0},{token:"Video",optional:!0},{token:"Superflex",optional:!0},{token:"Carousel",optional:!0},l.ANCILLARY,l.ANALYTICS,l.PERFORMANCE_LOGGER,l.IDENTITY_MANAGER,l.CONFIANT,l.AD_REFRESHER,l.LOGGER,l.REBID_MANAGER,l.DEVICE_ORIENTATION_TRACKER,l.VIRTUAL_KEYBOARD_REFRESH_CONTROL,l.MEMORY_MONITOR,l.BIDS_MANAGER,l.PAGE]});function PS(e){return O(this,arguments,function*({botTraffic:i}){var d;if(i.checkForBot(),i.isDetected)return;let t,r=new Promise(c=>{t=c}),s=()=>O(this,null,function*(){yield OS(),yield j().init(),t()}),n=()=>CS(()=>{yE({callback:s}),window.addEventListener("pubfigLoaded",()=>freestar.log(1,"checkPageSpeedOptimizationAndUserConsent called after googlefc validation"))}),o=()=>Fg(window.freestar.fsdata.cmpType,window.freestar.locData,()=>{yE({callback:s}),window.addEventListener("pubfigLoaded",()=>freestar.log(1,"checkPageSpeedOptimizationAndUserConsent called after CMP initialization"))}),a=window.freestar.fsdata.cmpType==="FUNDING_CHOICES"?n:o;(d=freestar==null?void 0:freestar.pubfigState)!=null&&d.configReady?a():window.addEventListener("pubfigRunEngine",a),yield r})}I.function(PS,{token:"init",dependencies:["BotTraffic"]});O(Pc,null,function*(){yield D.instance.call("init"),D.instance.call("startEngine")})});NS();})();
